/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck and Clare Macrae

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var yT=Object.create;var bi=Object.defineProperty,gT=Object.defineProperties,_T=Object.getOwnPropertyDescriptor,TT=Object.getOwnPropertyDescriptors,bT=Object.getOwnPropertyNames,kf=Object.getOwnPropertySymbols,vT=Object.getPrototypeOf,Pf=Object.prototype.hasOwnProperty,ET=Object.prototype.propertyIsEnumerable;var Af=(r,e,t)=>e in r?bi(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ee=(r,e)=>{for(var t in e||(e={}))Pf.call(e,t)&&Af(r,t,e[t]);if(kf)for(var t of kf(e))ET.call(e,t)&&Af(r,t,e[t]);return r},vt=(r,e)=>gT(r,TT(e));var p=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),wT=(r,e)=>{for(var t in e)bi(r,t,{get:e[t],enumerable:!0})},xf=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of bT(e))!Pf.call(r,i)&&i!==t&&bi(r,i,{get:()=>e[i],enumerable:!(n=_T(e,i))||n.enumerable});return r};var Vs=(r,e,t)=>(t=r!=null?yT(vT(r)):{},xf(e||!r||!r.__esModule?bi(t,"default",{value:r,enumerable:!0}):t,r)),OT=r=>xf(bi({},"__esModule",{value:!0}),r);var N=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var np=p((bA,ta)=>{var Ff,Uf,Lf,qf,Wf,Yf,$f,jf,Bf,Js,Fo,Gf,Hf,zf,Sn,Kf,Vf,Xf,Zf,Qf,Jf,ep,tp,rp,ea;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof ta=="object"&&typeof ta.exports=="object"?r(t(e,t(ta.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};Ff=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},Uf=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},Lf=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},qf=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},Wf=function(n,i){return function(s,a){i(s,a,n)}},Yf=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},$f=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(h){try{f(a.next(h))}catch(y){l(y)}}function d(h){try{f(a.throw(h))}catch(y){l(y)}}function f(h){h.done?u(h.value):o(h.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},jf=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(h){return d([f,h])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(h){f=[6,h],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Bf=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&ea(i,n,s)},ea=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},Js=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Fo=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},Gf=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Fo(arguments[i]));return n},Hf=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},zf=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},Sn=function(n){return this instanceof Sn?(this.v=n,this):new Sn(n)},Kf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(g){return new Promise(function(O,D){u.push([m,g,O,D])>1||c(m,g)})})}function c(m,g){try{d(a[m](g))}catch(O){y(u[0][3],O)}}function d(m){m.value instanceof Sn?Promise.resolve(m.value.v).then(f,h):y(u[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function y(m,g){m(g),u.shift(),u.length&&c(u[0][0],u[0][1])}},Vf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:Sn(n[o](l)),done:o==="return"}:u?u(l):l}:u}},Xf=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof Js=="function"?Js(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},Zf=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};Qf=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&ea(i,n,s);return t(i,n),i},Jf=function(n){return n&&n.__esModule?n:{default:n}},ep=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},tp=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},rp=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",Ff),r("__assign",Uf),r("__rest",Lf),r("__decorate",qf),r("__param",Wf),r("__metadata",Yf),r("__awaiter",$f),r("__generator",jf),r("__exportStar",Bf),r("__createBinding",ea),r("__values",Js),r("__read",Fo),r("__spread",Gf),r("__spreadArrays",Hf),r("__spreadArray",zf),r("__await",Sn),r("__asyncGenerator",Kf),r("__asyncDelegator",Vf),r("__asyncValues",Xf),r("__makeTemplateObject",Zf),r("__importStar",Qf),r("__importDefault",Jf),r("__classPrivateFieldGet",ep),r("__classPrivateFieldSet",tp),r("__classPrivateFieldIn",rp)})});var ie=p(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.matchAnyPattern=Cr.extractTerms=Cr.repeatedTimeunitPattern=void 0;function vb(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}Cr.repeatedTimeunitPattern=vb;function rh(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}Cr.extractTerms=rh;function Eb(r){return`(?:${rh(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}Cr.matchAnyPattern=Eb});var ee=p((Jo,eu)=>{(function(r,e){typeof Jo=="object"&&typeof eu!="undefined"?eu.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(Jo,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},O=function(P,E,b){var x=String(P);return!x||x.length>=E?P:""+Array(E+1-x.length).join(b)+P},D={s:O,z:function(P){var E=-P.utcOffset(),b=Math.abs(E),x=Math.floor(b/60),v=b%60;return(E<=0?"+":"-")+O(x,2,"0")+":"+O(v,2,"0")},m:function P(E,b){if(E.date()<b.date())return-P(b,E);var x=12*(b.year()-E.year())+(b.month()-E.month()),v=E.clone().add(x,l),q=b-v<0,w=E.clone().add(x+(q?-1:1),l);return+(-(x+(b-v)/(q?v-w:w-v))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},A="en",X={};X[A]=g;var ye=function(P){return P instanceof bt},_e=function(P,E,b){var x;if(!P)return A;if(typeof P=="string")X[P]&&(x=P),E&&(X[P]=E,x=P);else{var v=P.name;X[v]=P,x=v}return!b&&x&&(A=x),x||!b&&A},se=function(P,E){if(ye(P))return P.clone();var b=typeof E=="object"?E:{};return b.date=P,b.args=arguments,new bt(b)},H=D;H.l=_e,H.i=ye,H.w=function(P,E){return se(P,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var bt=function(){function P(b){this.$L=_e(b.locale,null,!0),this.parse(b)}var E=P.prototype;return E.parse=function(b){this.$d=function(x){var v=x.date,q=x.utc;if(v===null)return new Date(NaN);if(H.u(v))return new Date;if(v instanceof Date)return new Date(v);if(typeof v=="string"&&!/Z$/i.test(v)){var w=v.match(y);if(w){var F=w[2]-1||0,B=(w[7]||"0").substring(0,3);return q?new Date(Date.UTC(w[1],F,w[3]||1,w[4]||0,w[5]||0,w[6]||0,B)):new Date(w[1],F,w[3]||1,w[4]||0,w[5]||0,w[6]||0,B)}}return new Date(v)}(b),this.$x=b.x||{},this.init()},E.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},E.$utils=function(){return H},E.isValid=function(){return this.$d.toString()!==h},E.isSame=function(b,x){var v=se(b);return this.startOf(x)<=v&&v<=this.endOf(x)},E.isAfter=function(b,x){return se(b)<this.startOf(x)},E.isBefore=function(b,x){return this.endOf(x)<se(b)},E.$g=function(b,x,v){return H.u(b)?this[x]:this.set(v,b)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(b,x){var v=this,q=!!H.u(x)||x,w=H.p(b),F=function(Xe,Se){var ct=H.w(v.$u?Date.UTC(v.$y,Se,Xe):new Date(v.$y,Se,Xe),v);return q?ct:ct.endOf(o)},B=function(Xe,Se){return H.w(v.toDate()[Xe].apply(v.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(Se)),v)},W=this.$W,de=this.$M,fe=this.$D,Pe="set"+(this.$u?"UTC":"");switch(w){case d:return q?F(1,0):F(31,11);case l:return q?F(1,de):F(0,de+1);case u:var Ct=this.$locale().weekStart||0,Je=(W<Ct?W+7:W)-Ct;return F(q?fe-Je:fe+(6-Je),de);case o:case f:return B(Pe+"Hours",0);case a:return B(Pe+"Minutes",1);case s:return B(Pe+"Seconds",2);case i:return B(Pe+"Milliseconds",3);default:return this.clone()}},E.endOf=function(b){return this.startOf(b,!1)},E.$set=function(b,x){var v,q=H.p(b),w="set"+(this.$u?"UTC":""),F=(v={},v[o]=w+"Date",v[f]=w+"Date",v[l]=w+"Month",v[d]=w+"FullYear",v[a]=w+"Hours",v[s]=w+"Minutes",v[i]=w+"Seconds",v[n]=w+"Milliseconds",v)[q],B=q===o?this.$D+(x-this.$W):x;if(q===l||q===d){var W=this.clone().set(f,1);W.$d[F](B),W.init(),this.$d=W.set(f,Math.min(this.$D,W.daysInMonth())).$d}else F&&this.$d[F](B);return this.init(),this},E.set=function(b,x){return this.clone().$set(b,x)},E.get=function(b){return this[H.p(b)]()},E.add=function(b,x){var v,q=this;b=Number(b);var w=H.p(x),F=function(de){var fe=se(q);return H.w(fe.date(fe.date()+Math.round(de*b)),q)};if(w===l)return this.set(l,this.$M+b);if(w===d)return this.set(d,this.$y+b);if(w===o)return F(1);if(w===u)return F(7);var B=(v={},v[s]=e,v[a]=t,v[i]=r,v)[w]||1,W=this.$d.getTime()+b*B;return H.w(W,this)},E.subtract=function(b,x){return this.add(-1*b,x)},E.format=function(b){var x=this,v=this.$locale();if(!this.isValid())return v.invalidDate||h;var q=b||"YYYY-MM-DDTHH:mm:ssZ",w=H.z(this),F=this.$H,B=this.$m,W=this.$M,de=v.weekdays,fe=v.months,Pe=function(Se,ct,bn,sr){return Se&&(Se[ct]||Se(x,q))||bn[ct].substr(0,sr)},Ct=function(Se){return H.s(F%12||12,Se,"0")},Je=v.meridiem||function(Se,ct,bn){var sr=Se<12?"AM":"PM";return bn?sr.toLowerCase():sr},Xe={YY:String(this.$y).slice(-2),YYYY:this.$y,M:W+1,MM:H.s(W+1,2,"0"),MMM:Pe(v.monthsShort,W,fe,3),MMMM:Pe(fe,W),D:this.$D,DD:H.s(this.$D,2,"0"),d:String(this.$W),dd:Pe(v.weekdaysMin,this.$W,de,2),ddd:Pe(v.weekdaysShort,this.$W,de,3),dddd:de[this.$W],H:String(F),HH:H.s(F,2,"0"),h:Ct(1),hh:Ct(2),a:Je(F,B,!0),A:Je(F,B,!1),m:String(B),mm:H.s(B,2,"0"),s:String(this.$s),ss:H.s(this.$s,2,"0"),SSS:H.s(this.$ms,3,"0"),Z:w};return q.replace(m,function(Se,ct){return ct||Xe[Se]||w.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(b,x,v){var q,w=H.p(x),F=se(b),B=(F.utcOffset()-this.utcOffset())*e,W=this-F,de=H.m(this,F);return de=(q={},q[d]=de/12,q[l]=de,q[c]=de/3,q[u]=(W-B)/6048e5,q[o]=(W-B)/864e5,q[a]=W/t,q[s]=W/e,q[i]=W/r,q)[w]||W,v?de:H.a(de)},E.daysInMonth=function(){return this.endOf(l).$D},E.$locale=function(){return X[this.$L]},E.locale=function(b,x){if(!b)return this.$L;var v=this.clone(),q=_e(b,x,!0);return q&&(v.$L=q),v},E.clone=function(){return H.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},P}(),lt=bt.prototype;return se.prototype=lt,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(P){lt[P[1]]=function(E){return this.$g(E,P[0],P[1])}}),se.extend=function(P,E){return P.$i||(P(E,bt,se),P.$i=!0),se},se.locale=_e,se.isDayjs=ye,se.unix=function(P){return se(1e3*P)},se.en=X[A],se.Ls=X,se.p={},se})});var $e=p(Nr=>{"use strict";var wb=Nr&&Nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.findYearClosestToRef=Nr.findMostLikelyADYear=void 0;var Ob=wb(ee());function Db(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}Nr.findMostLikelyADYear=Db;function Rb(r,e,t){let n=Ob.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}Nr.findYearClosestToRef=Rb});var je=p(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.parseTimeUnits=j.TIME_UNITS_PATTERN=j.parseYear=j.YEAR_PATTERN=j.parseOrdinalNumberPattern=j.ORDINAL_NUMBER_PATTERN=j.parseNumberPattern=j.NUMBER_PATTERN=j.TIME_UNIT_DICTIONARY=j.ORDINAL_WORD_DICTIONARY=j.INTEGER_WORD_DICTIONARY=j.MONTH_DICTIONARY=j.FULL_MONTH_NAME_DICTIONARY=j.WEEKDAY_DICTIONARY=void 0;var fa=ie(),Sb=$e();j.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};j.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};j.MONTH_DICTIONARY=Object.assign(Object.assign({},j.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});j.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};j.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};j.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};j.NUMBER_PATTERN=`(?:${fa.matchAnyPattern(j.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function ih(r){let e=r.toLowerCase();return j.INTEGER_WORD_DICTIONARY[e]!==void 0?j.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}j.parseNumberPattern=ih;j.ORDINAL_NUMBER_PATTERN=`(?:${fa.matchAnyPattern(j.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Mb(r){let e=r.toLowerCase();return j.ORDINAL_WORD_DICTIONARY[e]!==void 0?j.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}j.parseOrdinalNumberPattern=Mb;j.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function kb(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return Sb.findMostLikelyADYear(e)}j.parseYear=kb;var sh=`(${j.NUMBER_PATTERN})\\s{0,3}(${fa.matchAnyPattern(j.TIME_UNIT_DICTIONARY)})`,nh=new RegExp(sh,"i");j.TIME_UNITS_PATTERN=fa.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",sh);function Ab(r){let e={},t=r,n=nh.exec(t);for(;n;)Pb(e,n),t=t.substring(n[0].length).trim(),n=nh.exec(t);return e}j.parseTimeUnits=Ab;function Pb(r,e){let t=ih(e[1]),n=j.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var ah=p((tu,ru)=>{(function(r,e){typeof tu=="object"&&typeof ru!="undefined"?ru.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(tu,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var Rt=p(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.implySimilarTime=Jt.assignSimilarTime=Jt.assignSimilarDate=Jt.assignTheNextDay=void 0;var oh=Ae();function xb(r,e){e=e.add(1,"day"),uh(r,e),lh(r,e)}Jt.assignTheNextDay=xb;function uh(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}Jt.assignSimilarDate=uh;function Cb(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",oh.Meridiem.AM):r.assign("meridiem",oh.Meridiem.PM)}Jt.assignSimilarTime=Cb;function lh(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}Jt.implySimilarTime=lh});var ch=p(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.toTimezoneOffset=Jr.TIMEZONE_ABBR_MAP=void 0;Jr.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function Nb(r){var e;return r==null?null:typeof r=="number"?r:(e=Jr.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Jr.toTimezoneOffset=Nb});var Te=p(er=>{"use strict";var dh=er&&er.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(er,"__esModule",{value:!0});er.ParsingResult=er.ParsingComponents=er.ReferenceWithTimezone=void 0;var Ib=dh(ah()),pa=dh(ee()),nu=Rt(),Fb=ch();pa.default.extend(Ib.default);var iu=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=Fb.toTimezoneOffset(e.timezone))}};er.ReferenceWithTimezone=iu;var en=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=pa.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new en(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return pa.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=pa.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new en(e);return t.hour||t.minute||t.second?(nu.assignSimilarTime(i,n),nu.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(nu.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};er.ParsingComponents=en;var Ci=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new en(e),this.end=s}clone(){let e=new Ci(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};er.ParsingResult=Ci});var S=p(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.AbstractParserWithWordBoundaryChecking=void 0;var su=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};ha.AbstractParserWithWordBoundaryChecking=su});var fh=p(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});var ou=je(),Ub=Te(),Lb=S(),qb=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${ou.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Wb=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${ou.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),au=class extends Lb.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?Wb:qb}innerExtract(e,t){let n=ou.parseTimeUnits(t[1]);return Ub.ParsingComponents.createRelativeFromReference(e.reference,n)}};uu.default=au});var _h=p(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var Yb=$e(),yh=je(),gh=je(),ma=je(),$b=ie(),jb=S(),Bb=new RegExp(`(?:on\\s{0,3})?(${ma.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${ma.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${$b.matchAnyPattern(yh.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${gh.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),ph=1,hh=2,Gb=3,mh=4,lu=class extends jb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Bb}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=yh.MONTH_DICTIONARY[t[Gb].toLowerCase()],s=ma.parseOrdinalNumberPattern(t[ph]);if(s>31)return t.index=t.index+t[ph].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[mh]){let a=gh.parseYear(t[mh]);n.start.assign("year",a)}else{let a=Yb.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[hh]){let a=ma.parseOrdinalNumberPattern(t[hh]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};cu.default=lu});var wh=p(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});var Hb=$e(),vh=je(),ya=je(),Eh=je(),zb=ie(),Kb=S(),Vb=new RegExp(`(${zb.matchAnyPattern(vh.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${ya.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${ya.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Eh.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),Xb=1,Zb=2,Th=3,bh=4,du=class extends Kb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Vb}innerExtract(e,t){let n=vh.MONTH_DICTIONARY[t[Xb].toLowerCase()],i=ya.parseOrdinalNumberPattern(t[Zb]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[bh]){let u=Eh.parseYear(t[bh]);s.assign("year",u)}else{let u=Hb.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Th])return s;let a=ya.parseOrdinalNumberPattern(t[Th]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};fu.default=du});var Rh=p(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var pu=je(),Qb=$e(),Jb=ie(),Dh=je(),ev=S(),tv=new RegExp(`((?:in)\\s*)?(${Jb.matchAnyPattern(pu.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Dh.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),rv=1,nv=2,Oh=3,hu=class extends ev.AbstractParserWithWordBoundaryChecking{innerPattern(){return tv}innerExtract(e,t){let n=t[nv].toLowerCase();if(t[0].length<=3&&!pu.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[rv]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=pu.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Oh]){let a=Dh.parseYear(t[Oh]);i.start.assign("year",a)}else{let a=Qb.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};mu.default=hu});var kh=p(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});var Mh=je(),iv=ie(),sv=S(),av=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${iv.matchAnyPattern(Mh.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),ov=1,uv=2,Sh=3,lv=4,yu=class extends sv.AbstractParserWithWordBoundaryChecking{innerPattern(){return av}innerExtract(e,t){let n=t[Sh]?parseInt(t[Sh]):Mh.MONTH_DICTIONARY[t[uv].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[ov]);return{day:parseInt(t[lv]),month:n,year:i}}};gu.default=yu});var Ah=p(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});var cv=S(),dv=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),fv=1,pv=2,_u=class extends cv.AbstractParserWithWordBoundaryChecking{innerPattern(){return dv}innerExtract(e,t){let n=parseInt(t[pv]),i=parseInt(t[fv]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Tu.default=_u});var tn=p(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.AbstractTimeExpressionParser=void 0;var Qe=Ae();function hv(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function mv(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var Ph=2,Cn=3,ga=4,_a=5,Ni=6,bu=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[Ph]);if(o>100){if(this.strictMode||t[Cn]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[Cn]!=null){if(t[Cn].length==1&&!t[Ni])return null;s=parseInt(t[Cn])}if(s>=60)return null;if(o>12&&(a=Qe.Meridiem.PM),t[Ni]!=null){if(o>12)return null;let u=t[Ni][0].toLowerCase();u=="a"&&(a=Qe.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=Qe.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",Qe.Meridiem.AM):i.imply("meridiem",Qe.Meridiem.PM),t[_a]!=null){let u=parseInt(t[_a].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[ga]!=null){let u=parseInt(t[ga]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[_a]!=null){let u=parseInt(t[_a].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[ga]!=null){let u=parseInt(t[ga]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[Ph]),a=0,o=-1;if(t[Cn]!=null?a=parseInt(t[Cn]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=Qe.Meridiem.PM),t[Ni]!=null){if(s>12)return null;let u=t[Ni][0].toLowerCase();u=="a"&&(o=Qe.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=Qe.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==Qe.Meridiem.AM?(n.start.imply("meridiem",Qe.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",Qe.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",Qe.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",Qe.Meridiem.PM)):s>12?i.imply("meridiem",Qe.Meridiem.PM):s<=12&&i.imply("meridiem",Qe.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=hv(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=mv(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};Ta.AbstractTimeExpressionParser=bu});var xh=p(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});var ba=Ae(),yv=tn(),vu=class extends yv.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",ba.Meridiem.PM)):i<6&&n.assign("meridiem",ba.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",ba.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",ba.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Eu.default=vu});var St=p(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.addImpliedTimeUnits=Nn.reverseTimeUnits=void 0;function gv(r){let e={};for(let t in r)e[t]=-r[t];return e}Nn.reverseTimeUnits=gv;function _v(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}Nn.addImpliedTimeUnits=_v});var Ch=p(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});var Ou=je(),Tv=Te(),bv=S(),vv=St(),Ev=new RegExp(`(${Ou.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),wv=new RegExp(`(${Ou.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),wu=class extends bv.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?wv:Ev}innerExtract(e,t){let n=Ou.parseTimeUnits(t[1]),i=vv.reverseTimeUnits(n);return Tv.ParsingComponents.createRelativeFromReference(e.reference,i)}};Du.default=wu});var Nh=p(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});var Su=je(),Ov=Te(),Dv=S(),Rv=new RegExp(`(${Su.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Sv=new RegExp("("+Su.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Mv=1,Ru=class extends Dv.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Sv:Rv}innerExtract(e,t){let n=Su.parseTimeUnits(t[Mv]);return Ov.ParsingComponents.createRelativeFromReference(e.reference,n)}};Mu.default=Ru});var Fn=p(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.MergingRefiner=In.Filter=void 0;var ku=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};In.Filter=ku;var Au=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};In.MergingRefiner=Au});var tr=p(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});var kv=Fn(),Pu=class extends kv.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};xu.default=Pu});var Ih=p(Ii=>{"use strict";var Av=Ii&&Ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ii,"__esModule",{value:!0});var Pv=Av(tr()),Cu=class extends Pv.default{patternBetween(){return/^\s*(to|-)\s*$/i}};Ii.default=Cu});var Fh=p(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.mergeDateTimeComponent=Un.mergeDateTimeResult=void 0;var xv=Ae();function Cv(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=Nu(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=Nu(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}Un.mergeDateTimeResult=Cv;function Nu(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==xv.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}Un.mergeDateTimeComponent=Nu});var cr=p(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var Nv=Fn(),Uh=Fh(),Iu=class extends Nv.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?Uh.mergeDateTimeResult(t,n):Uh.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};Fu.default=Iu});var Lh=p(Fi=>{"use strict";var Iv=Fi&&Fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fi,"__esModule",{value:!0});var Fv=Iv(cr()),Uu=class extends Fv.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};Fi.default=Uu});var qh=p(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var Uv=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Lv={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},Lu=class{constructor(e){this.timezone=Object.assign(Object.assign({},Lv),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=Uv.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};qu.default=Lu});var va=p(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});var qv=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Wv=1,Yv=2,$v=3,Wu=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=qv.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[Yv]),o=parseInt(s[$v]||"0"),u=a*60+o;u>14*60||(s[Wv]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};Yu.default=Wu});var Wh=p(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});var $u=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};ju.default=$u});var Yh=p(Ui=>{"use strict";var jv=Ui&&Ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ui,"__esModule",{value:!0});var Bv=jv(ee()),Bu=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=Bv.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};Ui.default=Bu});var $h=p(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var Gv=Fn(),Gu=class extends Gv.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};Hu.default=Gu});var Vu=p(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});var Hv=S(),zv=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Kv=1,Vv=2,Xv=3,jh=4,Zv=5,Bh=6,Gh=7,Hh=8,zh=9,zu=class extends Hv.AbstractParserWithWordBoundaryChecking{innerPattern(){return zv}innerExtract(e,t){let n={};if(n.year=parseInt(t[Kv]),n.month=parseInt(t[Vv]),n.day=parseInt(t[Xv]),t[jh]!=null)if(n.hour=parseInt(t[jh]),n.minute=parseInt(t[Zv]),t[Bh]!=null&&(n.second=parseInt(t[Bh])),t[Gh]!=null&&(n.millisecond=parseInt(t[Gh])),t[Hh]==null)n.timezoneOffset=0;else{let i=parseInt(t[Hh]),s=0;t[zh]!=null&&(s=parseInt(t[zh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};Ku.default=zu});var Kh=p(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});var Qv=Fn(),Xu=class extends Qv.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};Zu.default=Xu});var dr=p(Ln=>{"use strict";var rn=Ln&&Ln.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.includeCommonConfiguration=void 0;var Jv=rn(qh()),eE=rn(va()),Vh=rn(Wh()),tE=rn(Yh()),rE=rn($h()),nE=rn(Vu()),iE=rn(Kh());function sE(r,e=!1){return r.parsers.unshift(new nE.default),r.refiners.unshift(new iE.default),r.refiners.unshift(new Jv.default),r.refiners.unshift(new eE.default),r.refiners.unshift(new Vh.default),r.refiners.push(new Vh.default),r.refiners.push(new tE.default),r.refiners.push(new rE.default(e)),r}Ln.includeCommonConfiguration=sE});var pr=p(ne=>{"use strict";var aE=ne&&ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ne,"__esModule",{value:!0});ne.noon=ne.morning=ne.midnight=ne.yesterdayEvening=ne.evening=ne.lastNight=ne.tonight=ne.theDayAfter=ne.tomorrow=ne.theDayBefore=ne.yesterday=ne.today=ne.now=void 0;var rr=Te(),qn=aE(ee()),fr=Rt(),Li=Ae();function oE(r){let e=qn.default(r.instant),t=new rr.ParsingComponents(r,{});return fr.assignSimilarDate(t,e),fr.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}ne.now=oE;function uE(r){let e=qn.default(r.instant),t=new rr.ParsingComponents(r,{});return fr.assignSimilarDate(t,e),fr.implySimilarTime(t,e),t}ne.today=uE;function lE(r){return Xh(r,1)}ne.yesterday=lE;function Xh(r,e){return Qu(r,-e)}ne.theDayBefore=Xh;function cE(r){return Qu(r,1)}ne.tomorrow=cE;function Qu(r,e){let t=qn.default(r.instant),n=new rr.ParsingComponents(r,{});return t=t.add(e,"day"),fr.assignSimilarDate(n,t),fr.implySimilarTime(n,t),n}ne.theDayAfter=Qu;function dE(r,e=22){let t=qn.default(r.instant),n=new rr.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",Li.Meridiem.PM),fr.assignSimilarDate(n,t),n}ne.tonight=dE;function fE(r,e=0){let t=qn.default(r.instant),n=new rr.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),fr.assignSimilarDate(n,t),n.imply("hour",e),n}ne.lastNight=fE;function pE(r,e=20){let t=new rr.ParsingComponents(r,{});return t.imply("meridiem",Li.Meridiem.PM),t.imply("hour",e),t}ne.evening=pE;function hE(r,e=20){let t=qn.default(r.instant),n=new rr.ParsingComponents(r,{});return t=t.add(-1,"day"),fr.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",Li.Meridiem.PM),n}ne.yesterdayEvening=hE;function mE(r){let e=new rr.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}ne.midnight=mE;function yE(r,e=6){let t=new rr.ParsingComponents(r,{});return t.imply("meridiem",Li.Meridiem.AM),t.imply("hour",e),t}ne.morning=yE;function gE(r){let e=new rr.ParsingComponents(r,{});return e.imply("meridiem",Li.Meridiem.AM),e.imply("hour",12),e}ne.noon=gE});var Zh=p(Yt=>{"use strict";var _E=Yt&&Yt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),TE=Yt&&Yt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),bE=Yt&&Yt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&_E(e,r,t);return TE(e,r),e},vE=Yt&&Yt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yt,"__esModule",{value:!0});var EE=vE(ee()),wE=S(),OE=Rt(),qi=bE(pr()),DE=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,Ju=class extends wE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return DE}innerExtract(e,t){let n=EE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return qi.now(e.reference);case"today":return qi.today(e.reference);case"yesterday":return qi.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return qi.tomorrow(e.reference);case"tonight":return qi.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),OE.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};Yt.default=Ju});var Qh=p(Wi=>{"use strict";var RE=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var Ea=Ae(),SE=S(),ME=RE(ee()),kE=Rt(),AE=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,el=class extends SE.AbstractParserWithWordBoundaryChecking{innerPattern(){return AE}innerExtract(e,t){let n=ME.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Ea.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Ea.Meridiem.PM),i.imply("hour",20);break;case"midnight":kE.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Ea.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Ea.Meridiem.AM),i.imply("hour",12);break}return i}};Wi.default=el});var nn=p(Ir=>{"use strict";var PE=Ir&&Ir.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.toDayJSClosestWeekday=Ir.toDayJSWeekday=void 0;var Jh=PE(ee());function xE(r,e,t){if(!t)return em(r,e);let n=Jh.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}Ir.toDayJSWeekday=xE;function em(r,e){let t=Jh.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}Ir.toDayJSClosestWeekday=em});var rm=p(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var tm=je(),CE=ie(),NE=S(),IE=nn(),FE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${CE.matchAnyPattern(tm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),UE=1,LE=2,qE=3,tl=class extends NE.AbstractParserWithWordBoundaryChecking{innerPattern(){return FE}innerExtract(e,t){let n=t[LE].toLowerCase(),i=tm.WEEKDAY_DICTIONARY[n],s=t[UE],a=t[qE],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=IE.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};rl.default=tl});var sm=p(Yi=>{"use strict";var WE=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var im=je(),nm=Te(),YE=WE(ee()),$E=S(),jE=ie(),BE=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${jE.matchAnyPattern(im.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),GE=1,HE=2,nl=class extends $E.AbstractParserWithWordBoundaryChecking{innerPattern(){return BE}innerExtract(e,t){let n=t[GE].toLowerCase(),i=t[HE].toLowerCase(),s=im.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,nm.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,nm.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=YE.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Yi.default=nl});var $t=p($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.ParsingContext=$n.Chrono=void 0;var Wn=Te(),zE=il(),Yn=class{constructor(e){e=e||zE.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new Yn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new wa(e,t,n),s=[];return this.parsers.forEach(a=>{let o=Yn.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof Wn.ParsingResult?c=l:l instanceof Wn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};$n.Chrono=Yn;var wa=class{constructor(e,t,n){this.text=e,this.reference=new Wn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof Wn.ParsingComponents?e:new Wn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new Wn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};$n.ParsingContext=wa});var sn=p(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var am=$e(),KE=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Oa=1,om=5,um=2,lm=3,sl=4,al=class{constructor(e){this.groupNumberMonth=e?lm:um,this.groupNumberDay=e?um:lm}pattern(){return KE}extract(e,t){if(t[Oa]=="/"||t[om]=="/"){t.index+=t[0].length;return}let n=t.index+t[Oa].length,i=t[0].substr(t[Oa].length,t[0].length-t[Oa].length-t[om].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[sl]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[sl]){let u=parseInt(t[sl]),l=am.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=am.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};ol.default=al});var dm=p(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var cm=je(),VE=Te(),XE=S(),ZE=St(),QE=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${cm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),ul=class extends XE.AbstractParserWithWordBoundaryChecking{innerPattern(){return QE}innerExtract(e,t){let n=t[1].toLowerCase(),i=cm.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=ZE.reverseTimeUnits(i);break}return VE.ParsingComponents.createRelativeFromReference(e.reference,i)}};ll.default=ul});var pm=p(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var JE=Fn(),cl=Te(),e1=je(),t1=St();function fm(r){return r.text.match(/\s+(before|from)$/i)!=null}function r1(r){return r.text.match(/\s+(after|since)$/i)!=null}var dl=class extends JE.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!fm(t)&&!r1(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=e1.parseTimeUnits(t.text);fm(t)&&(i=t1.reverseTimeUnits(i));let s=cl.ParsingComponents.createRelativeFromReference(new cl.ReferenceWithTimezone(n.start.date()),i);return new cl.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};fl.default=dl});var il=p(Oe=>{"use strict";var Ne=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createConfiguration=Oe.createCasualConfiguration=Oe.parseDate=Oe.parse=Oe.GB=Oe.strict=Oe.casual=void 0;var n1=Ne(fh()),i1=Ne(_h()),s1=Ne(wh()),a1=Ne(Rh()),o1=Ne(kh()),u1=Ne(Ah()),l1=Ne(xh()),c1=Ne(Ch()),d1=Ne(Nh()),f1=Ne(Ih()),p1=Ne(Lh()),h1=dr(),m1=Ne(Zh()),y1=Ne(Qh()),g1=Ne(rm()),_1=Ne(sm()),pl=$t(),T1=Ne(sn()),b1=Ne(dm()),v1=Ne(pm());Oe.casual=new pl.Chrono(hm(!1));Oe.strict=new pl.Chrono(Da(!0,!1));Oe.GB=new pl.Chrono(Da(!1,!0));function E1(r,e,t){return Oe.casual.parse(r,e,t)}Oe.parse=E1;function w1(r,e,t){return Oe.casual.parseDate(r,e,t)}Oe.parseDate=w1;function hm(r=!1){let e=Da(!1,r);return e.parsers.unshift(new m1.default),e.parsers.unshift(new y1.default),e.parsers.unshift(new a1.default),e.parsers.unshift(new _1.default),e.parsers.unshift(new b1.default),e}Oe.createCasualConfiguration=hm;function Da(r=!0,e=!1){return h1.includeCommonConfiguration({parsers:[new T1.default(e),new n1.default,new i1.default,new s1.default,new g1.default,new o1.default,new u1.default,new l1.default(r),new c1.default(r),new d1.default(r)],refiners:[new v1.default,new p1.default,new f1.default]},r)}Oe.createConfiguration=Da});var mm=p(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var O1=tn(),hl=class extends O1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};ml.default=hl});var $i=p(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.parseTimeUnits=ae.TIME_UNITS_PATTERN=ae.parseYear=ae.YEAR_PATTERN=ae.parseNumberPattern=ae.NUMBER_PATTERN=ae.TIME_UNIT_DICTIONARY=ae.INTEGER_WORD_DICTIONARY=ae.MONTH_DICTIONARY=ae.WEEKDAY_DICTIONARY=void 0;var yl=ie(),D1=$e();ae.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};ae.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};ae.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};ae.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};ae.NUMBER_PATTERN=`(?:${yl.matchAnyPattern(ae.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function gm(r){let e=r.toLowerCase();return ae.INTEGER_WORD_DICTIONARY[e]!==void 0?ae.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ae.parseNumberPattern=gm;ae.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function R1(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return D1.findMostLikelyADYear(e)}ae.parseYear=R1;var _m=`(${ae.NUMBER_PATTERN})\\s{0,5}(${yl.matchAnyPattern(ae.TIME_UNIT_DICTIONARY)})\\s{0,5}`,ym=new RegExp(_m,"i");ae.TIME_UNITS_PATTERN=yl.repeatedTimeunitPattern("",_m);function S1(r){let e={},t=r,n=ym.exec(t);for(;n;)M1(e,n),t=t.substring(n[0].length),n=ym.exec(t);return e}ae.parseTimeUnits=S1;function M1(r,e){let t=gm(e[1]),n=ae.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var bm=p(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});var Tm=$i(),k1=ie(),A1=S(),P1=nn(),x1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${k1.matchAnyPattern(Tm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),C1=1,N1=3,I1=2,gl=class extends A1.AbstractParserWithWordBoundaryChecking{innerPattern(){return x1}innerExtract(e,t){let n=t[I1].toLowerCase(),i=Tm.WEEKDAY_DICTIONARY[n],s=t[C1],a=t[N1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=P1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};_l.default=gl});var Om=p(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var Fr=Ae(),F1=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),U1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),L1=2,vm=3,Em=4,wm=5,jn=class{pattern(e){return F1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=jn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=U1.exec(i);return s&&(n.end=jn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[L1]),t[vm]!=null&&(i=parseInt(t[vm])),i>=60||n>24)return null;if(n>=12&&(s=Fr.Meridiem.PM),t[wm]!=null){if(n>12)return null;let a=t[wm].toLowerCase();a.match(/morgen|vormittag/)&&(s=Fr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Fr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Fr.Meridiem.AM,n=0):n<6?s=Fr.Meridiem.AM:(s=Fr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Fr.Meridiem.AM):e.imply("meridiem",Fr.Meridiem.PM),t[Em]!=null){let a=parseInt(t[Em]);if(a>=60)return null;e.assign("second",a)}return e}};Tl.default=jn});var Dm=p(ji=>{"use strict";var q1=ji&&ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ji,"__esModule",{value:!0});var W1=q1(tr()),bl=class extends W1.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};ji.default=bl});var Rm=p(Bi=>{"use strict";var Y1=Bi&&Bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bi,"__esModule",{value:!0});var $1=Y1(cr()),vl=class extends $1.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};Bi.default=vl});var El=p(Hi=>{"use strict";var j1=Hi&&Hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hi,"__esModule",{value:!0});var B1=j1(ee()),an=Ae(),G1=S(),H1=Rt(),z1=St(),Gi=class extends G1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=B1.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return H1.implySimilarTime(s,n),Gi.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",an.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",an.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",an.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",an.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",an.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",an.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=z1.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",an.Meridiem.AM);break}return e}};Hi.default=Gi});var km=p(jt=>{"use strict";var K1=jt&&jt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),V1=jt&&jt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),X1=jt&&jt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&K1(e,r,t);return V1(e,r),e},Mm=jt&&jt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jt,"__esModule",{value:!0});var Z1=Mm(ee()),Q1=S(),on=Rt(),J1=Mm(El()),Sm=X1(pr()),ew=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),tw=1,rw=2,wl=class extends Q1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return ew}innerExtract(e,t){let n=Z1.default(e.refDate),i=(t[tw]||"").toLowerCase(),s=(t[rw]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=Sm.now(e.reference);break;case"heute":a=Sm.today(e.reference);break;case"morgen":on.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),on.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),on.assignSimilarDate(a,n),on.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),on.assignSimilarDate(a,n),on.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),on.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=J1.default.extractTimeComponents(a,s)),a}};jt.default=wl});var Im=p(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var nw=$e(),Cm=$i(),Nm=$i(),iw=ie(),sw=S(),aw=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${iw.matchAnyPattern(Cm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Nm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Am=1,Pm=2,ow=3,xm=4,Ol=class extends sw.AbstractParserWithWordBoundaryChecking{innerPattern(){return aw}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Cm.MONTH_DICTIONARY[t[ow].toLowerCase()],s=parseInt(t[Am]);if(s>31)return t.index=t.index+t[Am].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[xm]){let a=Nm.parseYear(t[xm]);n.start.assign("year",a)}else{let a=nw.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Pm]){let a=parseInt(t[Pm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Dl.default=Ol});var Fm=p(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var Ra=$i(),uw=Te(),lw=S(),cw=St(),dw=ie(),Rl=class extends lw.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Ra.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${dw.matchAnyPattern(Ra.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Ra.parseNumberPattern(t[2]):1,i=Ra.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=cw.reverseTimeUnits(s)),uw.ParsingComponents.createRelativeFromReference(e.reference,s)}};Sl.default=Rl});var qm=p(Ie=>{"use strict";var Bt=Ie&&Ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.createConfiguration=Ie.createCasualConfiguration=Ie.parseDate=Ie.parse=Ie.strict=Ie.casual=void 0;var fw=dr(),Um=$t(),pw=Bt(sn()),hw=Bt(Vu()),mw=Bt(mm()),yw=Bt(bm()),gw=Bt(Om()),_w=Bt(Dm()),Tw=Bt(Rm()),bw=Bt(km()),vw=Bt(El()),Ew=Bt(Im()),ww=Bt(Fm());Ie.casual=new Um.Chrono(Lm());Ie.strict=new Um.Chrono(Ml(!0));function Ow(r,e,t){return Ie.casual.parse(r,e,t)}Ie.parse=Ow;function Dw(r,e,t){return Ie.casual.parseDate(r,e,t)}Ie.parseDate=Dw;function Lm(r=!0){let e=Ml(!1,r);return e.parsers.unshift(new vw.default),e.parsers.unshift(new bw.default),e.parsers.unshift(new ww.default),e}Ie.createCasualConfiguration=Lm;function Ml(r=!0,e=!0){return fw.includeCommonConfiguration({parsers:[new hw.default,new pw.default(e),new mw.default,new gw.default,new Ew.default,new yw.default],refiners:[new _w.default,new Tw.default]},r)}Ie.createConfiguration=Ml});var Ym=p(Gt=>{"use strict";var Rw=Gt&&Gt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Sw=Gt&&Gt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Mw=Gt&&Gt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Rw(e,r,t);return Sw(e,r),e},kw=Gt&&Gt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gt,"__esModule",{value:!0});var Aw=kw(ee()),Pw=Ae(),xw=S(),Wm=Rt(),Sa=Mw(pr()),kl=class extends xw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=Aw.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Sa.now(e.reference);case"aujourd'hui":return Sa.today(e.reference);case"hier":return Sa.yesterday(e.reference);case"demain":return Sa.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(Wm.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",Pw.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),Wm.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Gt.default=kl});var $m=p(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var zi=Ae(),Cw=S(),Al=class extends Cw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",zi.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",zi.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",zi.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",zi.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",zi.Meridiem.AM);break}return i}};Pl.default=Al});var jm=p(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});var Nw=tn(),xl=class extends Nw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Cl.default=xl});var Bm=p(Ki=>{"use strict";var Iw=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});var Fw=Iw(cr()),Nl=class extends Fw.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};Ki.default=Nl});var Gm=p(Vi=>{"use strict";var Uw=Vi&&Vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vi,"__esModule",{value:!0});var Lw=Uw(tr()),Il=class extends Lw.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};Vi.default=Il});var Ur=p(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.parseTimeUnits=te.TIME_UNITS_PATTERN=te.parseYear=te.YEAR_PATTERN=te.parseOrdinalNumberPattern=te.ORDINAL_NUMBER_PATTERN=te.parseNumberPattern=te.NUMBER_PATTERN=te.TIME_UNIT_DICTIONARY=te.INTEGER_WORD_DICTIONARY=te.MONTH_DICTIONARY=te.WEEKDAY_DICTIONARY=void 0;var Fl=ie();te.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};te.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};te.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};te.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};te.NUMBER_PATTERN=`(?:${Fl.matchAnyPattern(te.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function zm(r){let e=r.toLowerCase();return te.INTEGER_WORD_DICTIONARY[e]!==void 0?te.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}te.parseNumberPattern=zm;te.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function qw(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}te.parseOrdinalNumberPattern=qw;te.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function Ww(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}te.parseYear=Ww;var Km=`(${te.NUMBER_PATTERN})\\s{0,5}(${Fl.matchAnyPattern(te.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Hm=new RegExp(Km,"i");te.TIME_UNITS_PATTERN=Fl.repeatedTimeunitPattern("",Km);function Yw(r){let e={},t=r,n=Hm.exec(t);for(;n;)$w(e,n),t=t.substring(n[0].length),n=Hm.exec(t);return e}te.parseTimeUnits=Yw;function $w(r,e){let t=zm(e[1]),n=te.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Xm=p(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});var Vm=Ur(),jw=ie(),Bw=S(),Gw=nn(),Hw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${jw.matchAnyPattern(Vm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),zw=1,Kw=2,Ul=class extends Bw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Hw}innerExtract(e,t){let n=t[zw].toLowerCase(),i=Vm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[Kw];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=Gw.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};Ll.default=Ul});var ey=p(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var Xi=Ae(),Vw=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),Xw=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),Zw=2,Zm=3,Qm=4,Jm=5,Bn=class{pattern(e){return Vw}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=Bn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=Xw.exec(i);return s&&(n.end=Bn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Zw]),t[Zm]!=null&&(i=parseInt(t[Zm])),i>=60||n>24)return null;if(n>=12&&(s=Xi.Meridiem.PM),t[Jm]!=null){if(n>12)return null;let a=t[Jm][0].toLowerCase();a=="a"&&(s=Xi.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=Xi.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Xi.Meridiem.AM):e.imply("meridiem",Xi.Meridiem.PM),t[Qm]!=null){let a=parseInt(t[Qm]);if(a>=60)return null;e.assign("second",a)}return e}};ql.default=Bn});var ay=p(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});var Qw=$e(),iy=Ur(),sy=Ur(),Ma=Ur(),Jw=ie(),eO=S(),tO=new RegExp(`(?:on\\s*?)?(${Ma.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Ma.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${Jw.matchAnyPattern(iy.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${sy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),ty=1,ry=2,rO=3,ny=4,Wl=class extends eO.AbstractParserWithWordBoundaryChecking{innerPattern(){return tO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=iy.MONTH_DICTIONARY[t[rO].toLowerCase()],s=Ma.parseOrdinalNumberPattern(t[ty]);if(s>31)return t.index=t.index+t[ty].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[ny]){let a=sy.parseYear(t[ny]);n.start.assign("year",a)}else{let a=Qw.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[ry]){let a=Ma.parseOrdinalNumberPattern(t[ry]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Yl.default=Wl});var uy=p(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});var oy=Ur(),nO=Te(),iO=S(),sO=St(),$l=class extends iO.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${oy.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=oy.parseTimeUnits(t[1]),i=sO.reverseTimeUnits(n);return nO.ParsingComponents.createRelativeFromReference(e.reference,i)}};jl.default=$l});var cy=p(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});var ly=Ur(),aO=Te(),oO=S(),Bl=class extends oO.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${ly.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=ly.parseTimeUnits(t[1]);return aO.ParsingComponents.createRelativeFromReference(e.reference,n)}};Gl.default=Bl});var dy=p(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});var ka=Ur(),uO=Te(),lO=S(),cO=St(),dO=ie(),Hl=class extends lO.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${ka.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${dO.matchAnyPattern(ka.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?ka.parseNumberPattern(t[1]):1,i=ka.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=cO.reverseTimeUnits(s)),uO.ParsingComponents.createRelativeFromReference(e.reference,s)}};zl.default=Hl});var hy=p(Fe=>{"use strict";var Mt=Fe&&Fe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createConfiguration=Fe.createCasualConfiguration=Fe.parseDate=Fe.parse=Fe.strict=Fe.casual=void 0;var fO=dr(),fy=$t(),pO=Mt(Ym()),hO=Mt($m()),mO=Mt(sn()),yO=Mt(jm()),gO=Mt(Bm()),_O=Mt(Gm()),TO=Mt(Xm()),bO=Mt(ey()),vO=Mt(ay()),EO=Mt(uy()),wO=Mt(cy()),OO=Mt(dy());Fe.casual=new fy.Chrono(py());Fe.strict=new fy.Chrono(Kl(!0));function DO(r,e,t){return Fe.casual.parse(r,e,t)}Fe.parse=DO;function RO(r,e,t){return Fe.casual.parseDate(r,e,t)}Fe.parseDate=RO;function py(r=!0){let e=Kl(!1,r);return e.parsers.unshift(new pO.default),e.parsers.unshift(new hO.default),e.parsers.unshift(new OO.default),e}Fe.createCasualConfiguration=py;function Kl(r=!0,e=!0){return fO.includeCommonConfiguration({parsers:[new mO.default(e),new vO.default,new yO.default,new bO.default,new EO.default,new wO.default,new TO.default],refiners:[new gO.default,new _O.default]},r)}Fe.createConfiguration=Kl});var my=p(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.toHankaku=void 0;function SO(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,MO)}Aa.toHankaku=SO;function MO(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var gy=p(Zi=>{"use strict";var kO=Zi&&Zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zi,"__esModule",{value:!0});var Vl=my(),AO=$e(),PO=kO(ee()),xO=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,yy=1,CO=2,Xl=3,NO=4,IO=5,FO=6,Zl=class{pattern(){return xO}extract(e,t){let n=parseInt(Vl.toHankaku(t[IO])),i=parseInt(Vl.toHankaku(t[FO])),s=e.createParsingComponents({day:i,month:n});if(t[yy]&&t[yy].match("\u540C|\u4ECA|\u672C")){let a=PO.default(e.refDate);s.assign("year",a.year())}if(t[CO]){let a=t[NO],o=a=="\u5143"?1:parseInt(Vl.toHankaku(a));t[Xl]=="\u4EE4\u548C"?o+=2018:t[Xl]=="\u5E73\u6210"?o+=1988:t[Xl]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=AO.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};Zi.default=Zl});var _y=p(Qi=>{"use strict";var UO=Qi&&Qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qi,"__esModule",{value:!0});var LO=UO(tr()),Ql=class extends LO.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};Qi.default=Ql});var by=p(Ht=>{"use strict";var qO=Ht&&Ht.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),WO=Ht&&Ht.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),YO=Ht&&Ht.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&qO(e,r,t);return WO(e,r),e},$O=Ht&&Ht.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ht,"__esModule",{value:!0});var jO=$O(ee()),Ty=Ae(),Jl=YO(pr()),BO=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,ec=class{pattern(){return BO}extract(e,t){let n=t[0],i=jO.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return Jl.yesterday(e.reference);case"\u660E\u65E5":return Jl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return Jl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Ty.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Ty.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};Ht.default=ec});var wy=p(Ue=>{"use strict";var tc=Ue&&Ue.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.createConfiguration=Ue.createCasualConfiguration=Ue.parseDate=Ue.parse=Ue.strict=Ue.casual=void 0;var GO=tc(gy()),HO=tc(_y()),zO=tc(by()),vy=$t();Ue.casual=new vy.Chrono(Ey());Ue.strict=new vy.Chrono(rc());function KO(r,e,t){return Ue.casual.parse(r,e,t)}Ue.parse=KO;function VO(r,e,t){return Ue.casual.parseDate(r,e,t)}Ue.parseDate=VO;function Ey(){let r=rc();return r.parsers.unshift(new zO.default),r}Ue.createCasualConfiguration=Ey;function rc(){return{parsers:[new GO.default],refiners:[new HO.default]}}Ue.createConfiguration=rc});var Pa=p(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.parseYear=nr.YEAR_PATTERN=nr.MONTH_DICTIONARY=nr.WEEKDAY_DICTIONARY=void 0;nr.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};nr.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};nr.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function XO(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}nr.parseYear=XO});var Dy=p(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});var Oy=Pa(),ZO=ie(),QO=S(),JO=nn(),e0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${ZO.matchAnyPattern(Oy.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),t0=1,r0=2,n0=3,nc=class extends QO.AbstractParserWithWordBoundaryChecking{innerPattern(){return e0}innerExtract(e,t){let n=t[r0].toLowerCase(),i=Oy.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[t0],a=t[n0],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=JO.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};ic.default=nc});var Ry=p(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var i0=tn(),sc=class extends i0.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};ac.default=sc});var Sy=p(Ji=>{"use strict";var s0=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var a0=s0(cr()),oc=class extends a0.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};Ji.default=oc});var My=p(es=>{"use strict";var o0=es&&es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(es,"__esModule",{value:!0});var u0=o0(tr()),uc=class extends u0.default{patternBetween(){return/^\s*(?:-)\s*$/i}};es.default=uc});var Ny=p(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});var l0=$e(),xy=Pa(),Cy=Pa(),c0=ie(),d0=S(),f0=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${c0.matchAnyPattern(xy.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${Cy.YEAR_PATTERN}))?(?=\\W|$)`,"i"),ky=1,Ay=2,p0=3,Py=4,lc=class extends d0.AbstractParserWithWordBoundaryChecking{innerPattern(){return f0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=xy.MONTH_DICTIONARY[t[p0].toLowerCase()],s=parseInt(t[ky]);if(s>31)return t.index=t.index+t[ky].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Py]){let a=Cy.parseYear(t[Py]);n.start.assign("year",a)}else{let a=l0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Ay]){let a=parseInt(t[Ay]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};cc.default=lc});var Iy=p(hr=>{"use strict";var h0=hr&&hr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),m0=hr&&hr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),y0=hr&&hr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&h0(e,r,t);return m0(e,r),e};Object.defineProperty(hr,"__esModule",{value:!0});var g0=S(),xa=y0(pr()),dc=class extends g0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return xa.now(e.reference);case"hoje":return xa.today(e.reference);case"amanha":case"amanh\xE3":return xa.tomorrow(e.reference);case"ontem":return xa.yesterday(e.reference)}return i}};hr.default=dc});var Fy=p(ts=>{"use strict";var _0=ts&&ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ts,"__esModule",{value:!0});var Ca=Ae(),T0=S(),b0=Rt(),v0=_0(ee()),fc=class extends T0.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=v0.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Ca.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Ca.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Ca.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":b0.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Ca.Meridiem.AM),i.imply("hour",12);break}return i}};ts.default=fc});var qy=p(Le=>{"use strict";var Lr=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Le,"__esModule",{value:!0});Le.createConfiguration=Le.createCasualConfiguration=Le.parseDate=Le.parse=Le.strict=Le.casual=void 0;var E0=dr(),Uy=$t(),w0=Lr(sn()),O0=Lr(Dy()),D0=Lr(Ry()),R0=Lr(Sy()),S0=Lr(My()),M0=Lr(Ny()),k0=Lr(Iy()),A0=Lr(Fy());Le.casual=new Uy.Chrono(Ly());Le.strict=new Uy.Chrono(pc(!0));function P0(r,e,t){return Le.casual.parse(r,e,t)}Le.parse=P0;function x0(r,e,t){return Le.casual.parseDate(r,e,t)}Le.parseDate=x0;function Ly(r=!0){let e=pc(!1,r);return e.parsers.push(new k0.default),e.parsers.push(new A0.default),e}Le.createCasualConfiguration=Ly;function pc(r=!0,e=!0){return E0.includeCommonConfiguration({parsers:[new w0.default(e),new O0.default,new D0.default,new M0.default],refiners:[new R0.default,new S0.default]},r)}Le.createConfiguration=pc});var Wy=p(rs=>{"use strict";var C0=rs&&rs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rs,"__esModule",{value:!0});var N0=C0(tr()),hc=class extends N0.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};rs.default=hc});var Yy=p(ns=>{"use strict";var I0=ns&&ns.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});var F0=I0(cr()),mc=class extends F0.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};ns.default=mc});var $y=p(mr=>{"use strict";var U0=mr&&mr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),L0=mr&&mr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),q0=mr&&mr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&U0(e,r,t);return L0(e,r),e};Object.defineProperty(mr,"__esModule",{value:!0});var W0=S(),Na=q0(pr()),yc=class extends W0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Na.now(e.reference);case"vandaag":return Na.today(e.reference);case"morgen":case"morgend":return Na.tomorrow(e.reference);case"gisteren":return Na.yesterday(e.reference)}return i}};mr.default=yc});var jy=p(is=>{"use strict";var Y0=is&&is.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(is,"__esModule",{value:!0});var Ia=Ae(),$0=S(),j0=Y0(ee()),B0=Rt(),G0=1,H0=2,gc=class extends $0.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=j0.default(e.refDate),i=e.createParsingComponents();switch(t[G0]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[H0].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",Ia.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",Ia.Meridiem.PM),i.imply("hour",20);break;case"middernacht":B0.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",Ia.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",Ia.Meridiem.AM),i.imply("hour",12);break}return i}};is.default=gc});var mt=p(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.parseTimeUnits=K.TIME_UNITS_PATTERN=K.parseYear=K.YEAR_PATTERN=K.parseOrdinalNumberPattern=K.ORDINAL_NUMBER_PATTERN=K.parseNumberPattern=K.NUMBER_PATTERN=K.TIME_UNIT_DICTIONARY=K.ORDINAL_WORD_DICTIONARY=K.INTEGER_WORD_DICTIONARY=K.MONTH_DICTIONARY=K.WEEKDAY_DICTIONARY=void 0;var Fa=ie(),z0=$e();K.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};K.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};K.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};K.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};K.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};K.NUMBER_PATTERN=`(?:${Fa.matchAnyPattern(K.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function Gy(r){let e=r.toLowerCase();return K.INTEGER_WORD_DICTIONARY[e]!==void 0?K.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}K.parseNumberPattern=Gy;K.ORDINAL_NUMBER_PATTERN=`(?:${Fa.matchAnyPattern(K.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function K0(r){let e=r.toLowerCase();return K.ORDINAL_WORD_DICTIONARY[e]!==void 0?K.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}K.parseOrdinalNumberPattern=K0;K.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function V0(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return z0.findMostLikelyADYear(e)}K.parseYear=V0;var Hy=`(${K.NUMBER_PATTERN})\\s{0,5}(${Fa.matchAnyPattern(K.TIME_UNIT_DICTIONARY)})\\s{0,5}`,By=new RegExp(Hy,"i");K.TIME_UNITS_PATTERN=Fa.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",Hy);function X0(r){let e={},t=r,n=By.exec(t);for(;n;)Z0(e,n),t=t.substring(n[0].length),n=By.exec(t);return e}K.parseTimeUnits=X0;function Z0(r,e){let t=Gy(e[1]),n=K.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Ky=p(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});var zy=mt(),Q0=Te(),J0=S(),_c=class extends J0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+zy.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=zy.parseTimeUnits(t[1]);return Q0.ParsingComponents.createRelativeFromReference(e.reference,n)}};Tc.default=_c});var Xy=p(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});var Vy=mt(),eD=ie(),tD=S(),rD=nn(),nD=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${eD.matchAnyPattern(Vy.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),iD=1,sD=2,aD=3,bc=class extends tD.AbstractParserWithWordBoundaryChecking{innerPattern(){return nD}innerExtract(e,t){let n=t[sD].toLowerCase(),i=Vy.WEEKDAY_DICTIONARY[n],s=t[iD],a=t[aD],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=rD.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};vc.default=bc});var rg=p(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});var oD=$e(),eg=mt(),Ua=mt(),tg=mt(),uD=ie(),lD=S(),cD=new RegExp(`(?:on\\s*?)?(${Ua.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${Ua.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+uD.matchAnyPattern(eg.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${tg.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),dD=3,Zy=1,Qy=2,Jy=4,Ec=class extends lD.AbstractParserWithWordBoundaryChecking{innerPattern(){return cD}innerExtract(e,t){let n=eg.MONTH_DICTIONARY[t[dD].toLowerCase()],i=Ua.parseOrdinalNumberPattern(t[Zy]);if(i>31)return t.index=t.index+t[Zy].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[Jy]){let u=tg.parseYear(t[Jy]);s.assign("year",u)}else{let u=oD.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Qy])return s;let a=Ua.parseOrdinalNumberPattern(t[Qy]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};wc.default=Ec});var ag=p(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});var ig=mt(),fD=$e(),pD=ie(),sg=mt(),hD=S(),mD=new RegExp(`(${pD.matchAnyPattern(ig.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${sg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),yD=1,ng=2,Oc=class extends hD.AbstractParserWithWordBoundaryChecking{innerPattern(){return mD}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[yD],s=ig.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[ng]){let a=sg.parseYear(t[ng]);n.assign("year",a)}else{let a=fD.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};Dc.default=Oc});var og=p(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});var gD=S(),_D=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),TD=1,bD=2,Rc=class extends gD.AbstractParserWithWordBoundaryChecking{innerPattern(){return _D}innerExtract(e,t){let n=parseInt(t[bD]),i=parseInt(t[TD]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Sc.default=Rc});var ug=p(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});var vD=tn(),Mc=class extends vD.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};kc.default=Mc});var dg=p(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});var cg=mt(),ED=ie(),wD=S(),OD=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${ED.matchAnyPattern(cg.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),DD=1,RD=2,lg=3,SD=4,Ac=class extends wD.AbstractParserWithWordBoundaryChecking{innerPattern(){return OD}innerExtract(e,t){let n=t[lg]?parseInt(t[lg]):cg.MONTH_DICTIONARY[t[RD].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[DD]);return{day:parseInt(t[SD]),month:n,year:i}}};Pc.default=Ac});var fg=p(ss=>{"use strict";var MD=ss&&ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ss,"__esModule",{value:!0});var kD=S(),La=Ae(),xc=Rt(),AD=MD(ee()),PD=1,xD=2,Cc=class extends kD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[PD].toLowerCase(),i=t[xD].toLowerCase(),s=e.createParsingComponents(),a=AD.default(e.refDate);switch(n){case"gisteren":xc.assignSimilarDate(s,a.add(-1,"day"));break;case"van":xc.assignSimilarDate(s,a);break;case"morgen":xc.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",La.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",La.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",La.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",La.Meridiem.PM),s.imply("hour",20);break}return s}};ss.default=Cc});var hg=p(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});var pg=mt(),CD=Te(),ND=S(),ID=St(),FD=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${pg.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Nc=class extends ND.AbstractParserWithWordBoundaryChecking{innerPattern(){return FD}innerExtract(e,t){let n=t[1].toLowerCase(),i=pg.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=ID.reverseTimeUnits(i);break}return CD.ParsingComponents.createRelativeFromReference(e.reference,i)}};Ic.default=Nc});var gg=p(as=>{"use strict";var UD=as&&as.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(as,"__esModule",{value:!0});var yg=mt(),mg=Te(),LD=UD(ee()),qD=S(),WD=ie(),YD=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${WD.matchAnyPattern(yg.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),$D=1,jD=2,Fc=class extends qD.AbstractParserWithWordBoundaryChecking{innerPattern(){return YD}innerExtract(e,t){let n=t[$D].toLowerCase(),i=t[jD].toLowerCase(),s=yg.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,mg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,mg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=LD.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};as.default=Fc});var _g=p(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});var Lc=mt(),BD=Te(),GD=S(),HD=St(),zD=new RegExp("("+Lc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),KD=new RegExp("("+Lc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),Uc=class extends GD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?KD:zD}innerExtract(e,t){let n=Lc.parseTimeUnits(t[1]),i=HD.reverseTimeUnits(n);return BD.ParsingComponents.createRelativeFromReference(e.reference,i)}};qc.default=Uc});var Tg=p($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});var Yc=mt(),VD=Te(),XD=S(),ZD=new RegExp("("+Yc.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),QD=new RegExp("("+Yc.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),JD=1,Wc=class extends XD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?QD:ZD}innerExtract(e,t){let n=Yc.parseTimeUnits(t[JD]);return VD.ParsingComponents.createRelativeFromReference(e.reference,n)}};$c.default=Wc});var wg=p(qe=>{"use strict";var Be=qe&&qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qe,"__esModule",{value:!0});qe.createConfiguration=qe.createCasualConfiguration=qe.parseDate=qe.parse=qe.strict=qe.casual=void 0;var eR=dr(),bg=$t(),tR=Be(Wy()),rR=Be(Yy()),nR=Be($y()),iR=Be(jy()),sR=Be(sn()),aR=Be(Ky()),oR=Be(Xy()),uR=Be(rg()),vg=Be(ag()),lR=Be(og()),cR=Be(ug()),dR=Be(dg()),fR=Be(fg()),pR=Be(hg()),hR=Be(gg()),mR=Be(_g()),yR=Be(Tg());qe.casual=new bg.Chrono(Eg());qe.strict=new bg.Chrono(jc(!0));function gR(r,e,t){return qe.casual.parse(r,e,t)}qe.parse=gR;function _R(r,e,t){return qe.casual.parseDate(r,e,t)}qe.parseDate=_R;function Eg(r=!0){let e=jc(!1,r);return e.parsers.unshift(new nR.default),e.parsers.unshift(new iR.default),e.parsers.unshift(new fR.default),e.parsers.unshift(new vg.default),e.parsers.unshift(new hR.default),e.parsers.unshift(new pR.default),e}qe.createCasualConfiguration=Eg;function jc(r=!0,e=!0){return eR.includeCommonConfiguration({parsers:[new sR.default(e),new aR.default,new uR.default,new vg.default,new oR.default,new dR.default,new lR.default,new cR.default(r),new mR.default(r),new yR.default(r)],refiners:[new rR.default,new tR.default]},r)}qe.createConfiguration=jc});var Sg=p(os=>{"use strict";var TR=os&&os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(os,"__esModule",{value:!0});var bR=TR(ee()),vR=S(),ER=1,Og=2,wR=3,Dg=4,Rg=5,OR=6,Bc=class extends vR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=bR.default(e.refDate),a=s;if(t[ER])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Og]){let o=t[Og],u=t[wR];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Dg]){let u=t[Dg][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Rg]){let o=t[Rg];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[OR];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};os.default=Bc});var Gn=p(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.zhStringToYear=st.zhStringToNumber=st.WEEKDAY_OFFSET=st.NUMBER=void 0;st.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};st.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function DR(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?st.NUMBER[n]:e*st.NUMBER[n]:e+=st.NUMBER[n]}return e}st.zhStringToNumber=DR;function RR(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+st.NUMBER[n]}return parseInt(e)}st.zhStringToYear=RR});var kg=p(us=>{"use strict";var SR=us&&us.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(us,"__esModule",{value:!0});var MR=SR(ee()),kR=S(),un=Gn(),Gc=1,Mg=2,Hc=3,zc=class extends kR.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(un.NUMBER).join("")+"]{4}|["+Object.keys(un.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(un.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(un.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=MR.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Mg]);if(isNaN(s)&&(s=un.zhStringToNumber(t[Mg])),i.start.assign("month",s),t[Hc]){let a=parseInt(t[Hc]);isNaN(a)&&(a=un.zhStringToNumber(t[Hc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Gc]){let a=parseInt(t[Gc]);isNaN(a)&&(a=un.zhStringToYear(t[Gc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};us.default=zc});var Pg=p(ls=>{"use strict";var AR=ls&&ls.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ls,"__esModule",{value:!0});var PR=AR(ee()),xR=S(),Ag=Gn(),CR=new RegExp("(\\d+|["+Object.keys(Ag.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),Kc=1,NR=2,Vc=class extends xR.AbstractParserWithWordBoundaryChecking{innerPattern(){return CR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Kc]);if(isNaN(i)&&(i=Ag.zhStringToNumber(t[Kc])),isNaN(i)){let u=t[Kc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=PR.default(e.refDate),o=t[NR][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};ls.default=Vc});var Cg=p(cs=>{"use strict";var IR=cs&&cs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cs,"__esModule",{value:!0});var FR=IR(ee()),UR=S(),xg=Gn(),LR=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(xg.WEEKDAY_OFFSET).join("|")+")"),Xc=class extends UR.AbstractParserWithWordBoundaryChecking{innerPattern(){return LR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=xg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=FR.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};cs.default=Xc});var Ng=p(ds=>{"use strict";var qR=ds&&ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ds,"__esModule",{value:!0});var WR=qR(ee()),YR=S(),At=Gn(),$R=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(At.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(At.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(At.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),jR=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(At.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(At.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(At.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),qa=1,Wa=2,Ya=3,$a=4,ja=5,Ba=6,kt=7,Hn=8,Ga=9,Zc=class extends YR.AbstractParserWithWordBoundaryChecking{innerPattern(){return $R}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=WR.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[qa]){var a=t[qa];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[$a]){var o=t[$a];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[Hn]){var d=parseInt(t[Hn]);if(isNaN(d)&&(d=At.zhStringToNumber(t[Hn])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[Ba]),isNaN(u)&&(u=At.zhStringToNumber(t[Ba])),t[kt]?t[kt]=="\u534A"?l=30:t[kt]=="\u6B63"||t[kt]=="\u6574"?l=0:(l=parseInt(t[kt]),isNaN(l)&&(l=At.zhStringToNumber(t[kt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Ga]){if(u>12)return null;var f=t[Ga][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[Wa]){var h=t[Wa],y=h[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Ya]){var m=t[Ya],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[ja]){var O=t[ja],D=O[0];D=="\u4E0A"||D=="\u671D"||D=="\u65E9"||D=="\u51CC"?(c=0,u==12&&(u=0)):(D=="\u4E0B"||D=="\u664F"||D=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=jR.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let A=s.clone();if(i.end=e.createParsingComponents(),t[qa]){var a=t[qa];a=="\u660E"||a=="\u807D"?n.hour()>1&&A.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?A.add(-1,"day"):a=="\u524D"?A.add(-2,"day"):a=="\u5927\u524D"?A.add(-3,"day"):a=="\u5F8C"?A.add(2,"day"):a=="\u5927\u5F8C"&&A.add(3,"day"),i.end.assign("day",A.date()),i.end.assign("month",A.month()+1),i.end.assign("year",A.year())}else if(t[$a]){var o=t[$a];o=="\u660E"||o=="\u807D"?A.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?A.add(-1,"day"):o=="\u524D"?A.add(-2,"day"):o=="\u5927\u524D"?A.add(-3,"day"):o=="\u5F8C"?A.add(2,"day"):o=="\u5927\u5F8C"&&A.add(3,"day"),i.end.assign("day",A.date()),i.end.assign("month",A.month()+1),i.end.assign("year",A.year())}else i.end.imply("day",A.date()),i.end.imply("month",A.month()+1),i.end.imply("year",A.year());if(u=0,l=0,c=-1,t[Hn]){var d=parseInt(t[Hn]);if(isNaN(d)&&(d=At.zhStringToNumber(t[Hn])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[Ba]),isNaN(u)&&(u=At.zhStringToNumber(t[Ba])),t[kt]?t[kt]=="\u534A"?l=30:t[kt]=="\u6B63"||t[kt]=="\u6574"?l=0:(l=parseInt(t[kt]),isNaN(l)&&(l=At.zhStringToNumber(t[kt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Ga]){if(u>12)return null;var f=t[Ga][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Wa]){var h=t[Wa],y=h[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Ya]){var m=t[Ya],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[ja]){var O=t[ja],D=O[0];D=="\u4E0A"||D=="\u671D"||D=="\u65E9"||D=="\u51CC"?(c=0,u==12&&(u=0)):(D=="\u4E0B"||D=="\u664F"||D=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};ds.default=Zc});var Fg=p(fs=>{"use strict";var BR=fs&&fs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fs,"__esModule",{value:!0});var GR=BR(ee()),HR=S(),Ig=Gn(),zR=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Ig.WEEKDAY_OFFSET).join("|")+")"),Qc=class extends HR.AbstractParserWithWordBoundaryChecking{innerPattern(){return zR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Ig.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=GR.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};fs.default=Qc});var Ug=p(ps=>{"use strict";var KR=ps&&ps.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ps,"__esModule",{value:!0});var VR=KR(tr()),Jc=class extends VR.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};ps.default=Jc});var Lg=p(hs=>{"use strict";var XR=hs&&hs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hs,"__esModule",{value:!0});var ZR=XR(cr()),ed=class extends ZR.default{patternBetween(){return/^\s*$/i}};hs.default=ed});var qg=p(De=>{"use strict";var yr=De&&De.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});De.createConfiguration=De.createCasualConfiguration=De.parseDate=De.parse=De.strict=De.casual=De.hant=void 0;var td=$t(),QR=yr(va()),JR=dr(),eS=yr(Sg()),tS=yr(kg()),rS=yr(Pg()),nS=yr(Cg()),iS=yr(Ng()),sS=yr(Fg()),aS=yr(Ug()),oS=yr(Lg());De.hant=new td.Chrono(rd());De.casual=new td.Chrono(rd());De.strict=new td.Chrono(nd());function uS(r,e,t){return De.casual.parse(r,e,t)}De.parse=uS;function lS(r,e,t){return De.casual.parseDate(r,e,t)}De.parseDate=lS;function rd(){let r=nd();return r.parsers.unshift(new eS.default),r}De.createCasualConfiguration=rd;function nd(){let r=JR.includeCommonConfiguration({parsers:[new tS.default,new nS.default,new sS.default,new iS.default,new rS.default],refiners:[new aS.default,new oS.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof QR.default)),r}De.createConfiguration=nd});var jg=p(ms=>{"use strict";var cS=ms&&ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ms,"__esModule",{value:!0});var dS=cS(ee()),fS=S(),pS=1,Wg=2,hS=3,Yg=4,$g=5,mS=6,id=class extends fS.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=dS.default(e.refDate),a=s;if(t[pS])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Wg]){let o=t[Wg],u=t[hS];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Yg]){let u=t[Yg][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[$g]){let o=t[$g];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[mS];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};ms.default=id});var zn=p(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.zhStringToYear=at.zhStringToNumber=at.WEEKDAY_OFFSET=at.NUMBER=void 0;at.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};at.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function yS(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?at.NUMBER[n]:e*at.NUMBER[n]:e+=at.NUMBER[n]}return e}at.zhStringToNumber=yS;function gS(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+at.NUMBER[n]}return parseInt(e)}at.zhStringToYear=gS});var Gg=p(ys=>{"use strict";var _S=ys&&ys.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ys,"__esModule",{value:!0});var TS=_S(ee()),bS=S(),ln=zn(),sd=1,Bg=2,ad=3,od=class extends bS.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(ln.NUMBER).join("")+"]{4}|["+Object.keys(ln.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(ln.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(ln.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=TS.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Bg]);if(isNaN(s)&&(s=ln.zhStringToNumber(t[Bg])),i.start.assign("month",s),t[ad]){let a=parseInt(t[ad]);isNaN(a)&&(a=ln.zhStringToNumber(t[ad])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[sd]){let a=parseInt(t[sd]);isNaN(a)&&(a=ln.zhStringToYear(t[sd])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};ys.default=od});var zg=p(gs=>{"use strict";var vS=gs&&gs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gs,"__esModule",{value:!0});var ES=vS(ee()),wS=S(),Hg=zn(),OS=new RegExp("(\\d+|["+Object.keys(Hg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),ud=1,DS=2,ld=class extends wS.AbstractParserWithWordBoundaryChecking{innerPattern(){return OS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[ud]);if(isNaN(i)&&(i=Hg.zhStringToNumber(t[ud])),isNaN(i)){let u=t[ud];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=ES.default(e.refDate),o=t[DS][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};gs.default=ld});var Vg=p(_s=>{"use strict";var RS=_s&&_s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_s,"__esModule",{value:!0});var SS=RS(ee()),MS=S(),Kg=zn(),kS=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Kg.WEEKDAY_OFFSET).join("|")+")"),cd=class extends MS.AbstractParserWithWordBoundaryChecking{innerPattern(){return kS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Kg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=SS.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};_s.default=cd});var Xg=p(Ts=>{"use strict";var AS=Ts&&Ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ts,"__esModule",{value:!0});var PS=AS(ee()),xS=S(),xt=zn(),CS=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(xt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(xt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(xt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),NS=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(xt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(xt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(xt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Ha=1,za=2,Ka=3,Va=4,Xa=5,Za=6,Pt=7,Kn=8,Qa=9,dd=class extends xS.AbstractParserWithWordBoundaryChecking{innerPattern(){return CS}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=PS.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Ha]){let c=t[Ha];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Va]){let c=t[Va];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[Kn]){let c=parseInt(t[Kn]);if(isNaN(c)&&(c=xt.zhStringToNumber(t[Kn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[Za]),isNaN(a)&&(a=xt.zhStringToNumber(t[Za])),t[Pt]?t[Pt]=="\u534A"?o=30:t[Pt]=="\u6B63"||t[Pt]=="\u6574"?o=0:(o=parseInt(t[Pt]),isNaN(o)&&(o=xt.zhStringToNumber(t[Pt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Qa]){if(a>12)return null;let c=t[Qa][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[za]){let d=t[za][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[Ka]){let d=t[Ka][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[Xa]){let d=t[Xa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=NS.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[Ha]){let c=t[Ha];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[Va]){let c=t[Va];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[Kn]){let c=parseInt(t[Kn]);if(isNaN(c)&&(c=xt.zhStringToNumber(t[Kn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[Za]),isNaN(a)&&(a=xt.zhStringToNumber(t[Za])),t[Pt]?t[Pt]=="\u534A"?o=30:t[Pt]=="\u6B63"||t[Pt]=="\u6574"?o=0:(o=parseInt(t[Pt]),isNaN(o)&&(o=xt.zhStringToNumber(t[Pt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Qa]){if(a>12)return null;let c=t[Qa][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[za]){let d=t[za][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[Ka]){let d=t[Ka][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[Xa]){let d=t[Xa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Ts.default=dd});var Qg=p(bs=>{"use strict";var IS=bs&&bs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bs,"__esModule",{value:!0});var FS=IS(ee()),US=S(),Zg=zn(),LS=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Zg.WEEKDAY_OFFSET).join("|")+")"),fd=class extends US.AbstractParserWithWordBoundaryChecking{innerPattern(){return LS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Zg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=FS.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};bs.default=fd});var Jg=p(vs=>{"use strict";var qS=vs&&vs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vs,"__esModule",{value:!0});var WS=qS(tr()),pd=class extends WS.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};vs.default=pd});var e_=p(Es=>{"use strict";var YS=Es&&Es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Es,"__esModule",{value:!0});var $S=YS(cr()),hd=class extends $S.default{patternBetween(){return/^\s*$/i}};Es.default=hd});var t_=p(Re=>{"use strict";var gr=Re&&Re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Re,"__esModule",{value:!0});Re.createConfiguration=Re.createCasualConfiguration=Re.parseDate=Re.parse=Re.strict=Re.casual=Re.hans=void 0;var md=$t(),jS=gr(va()),BS=dr(),GS=gr(jg()),HS=gr(Gg()),zS=gr(zg()),KS=gr(Vg()),VS=gr(Xg()),XS=gr(Qg()),ZS=gr(Jg()),QS=gr(e_());Re.hans=new md.Chrono(yd());Re.casual=new md.Chrono(yd());Re.strict=new md.Chrono(gd());function JS(r,e,t){return Re.casual.parse(r,e,t)}Re.parse=JS;function eM(r,e,t){return Re.casual.parseDate(r,e,t)}Re.parseDate=eM;function yd(){let r=gd();return r.parsers.unshift(new GS.default),r}Re.createCasualConfiguration=yd;function gd(){let r=BS.includeCommonConfiguration({parsers:[new HS.default,new KS.default,new XS.default,new VS.default,new zS.default],refiners:[new ZS.default,new QS.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof jS.default)),r}Re.createConfiguration=gd});var n_=p(yt=>{"use strict";var r_=yt&&yt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),tM=yt&&yt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),rM=yt&&yt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&r_(e,r,t)},nM=yt&&yt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&r_(e,r,t);return tM(e,r),e};Object.defineProperty(yt,"__esModule",{value:!0});yt.hans=void 0;rM(qg(),yt);yt.hans=nM(t_())});var ot=p($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.parseTimeUnits=$.TIME_UNITS_PATTERN=$.parseYear=$.YEAR_PATTERN=$.parseOrdinalNumberPattern=$.ORDINAL_NUMBER_PATTERN=$.parseNumberPattern=$.NUMBER_PATTERN=$.TIME_UNIT_DICTIONARY=$.ORDINAL_WORD_DICTIONARY=$.INTEGER_WORD_DICTIONARY=$.MONTH_DICTIONARY=$.FULL_MONTH_NAME_DICTIONARY=$.WEEKDAY_DICTIONARY=$.REGEX_PARTS=void 0;var Ja=ie(),iM=$e();$.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};$.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};$.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};$.MONTH_DICTIONARY=Object.assign(Object.assign({},$.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});$.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};$.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};$.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};$.NUMBER_PATTERN=`(?:${Ja.matchAnyPattern($.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function s_(r){let e=r.toLowerCase();return $.INTEGER_WORD_DICTIONARY[e]!==void 0?$.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}$.parseNumberPattern=s_;$.ORDINAL_NUMBER_PATTERN=`(?:${Ja.matchAnyPattern($.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function sM(r){let e=r.toLowerCase();return $.ORDINAL_WORD_DICTIONARY[e]!==void 0?$.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}$.parseOrdinalNumberPattern=sM;var _d="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";$.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${_d}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${_d}|[5-9][0-9]${_d})`;function aM(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return iM.findMostLikelyADYear(e)}$.parseYear=aM;var a_=`(${$.NUMBER_PATTERN})\\s{0,3}(${Ja.matchAnyPattern($.TIME_UNIT_DICTIONARY)})`,i_=new RegExp(a_,"i");$.TIME_UNITS_PATTERN=Ja.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",a_);function oM(r){let e={},t=r,n=i_.exec(t);for(;n;)uM(e,n),t=t.substring(n[0].length).trim(),n=i_.exec(t);return e}$.parseTimeUnits=oM;function uM(r,e){let t=s_(e[1]),n=$.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var u_=p(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});var ws=ot(),lM=Te(),cM=S(),o_=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${ws.TIME_UNITS_PATTERN})${ws.REGEX_PARTS.rightBoundary}`,dM=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${o_}`,ws.REGEX_PARTS.flags),fM=new RegExp(o_,"i"),Td=class extends cM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ws.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?fM:dM}innerExtract(e,t){let n=ws.parseTimeUnits(t[1]);return lM.ParsingComponents.createRelativeFromReference(e.reference,n)}};bd.default=Td});var p_=p(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});var pM=$e(),Os=ot(),f_=ot(),eo=ot(),hM=ie(),mM=S(),yM=new RegExp(`(?:\u0441)?\\s*(${eo.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${eo.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${hM.matchAnyPattern(Os.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${f_.YEAR_PATTERN}(?![^\\s]\\d)))?${Os.REGEX_PARTS.rightBoundary}`,Os.REGEX_PARTS.flags),l_=1,c_=2,gM=3,d_=4,vd=class extends mM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Os.REGEX_PARTS.leftBoundary}innerPattern(){return yM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Os.MONTH_DICTIONARY[t[gM].toLowerCase()],s=eo.parseOrdinalNumberPattern(t[l_]);if(s>31)return t.index=t.index+t[l_].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[d_]){let a=f_.parseYear(t[d_]);n.start.assign("year",a)}else{let a=pM.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[c_]){let a=eo.parseOrdinalNumberPattern(t[c_]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Ed.default=vd});var y_=p(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});var Ds=ot(),_M=$e(),TM=ie(),m_=ot(),bM=S(),vM=new RegExp(`((?:\u0432)\\s*)?(${TM.matchAnyPattern(Ds.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${m_.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Ds.REGEX_PARTS.flags),EM=2,h_=3,wd=class extends bM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ds.REGEX_PARTS.leftBoundary}innerPattern(){return vM}innerExtract(e,t){let n=t[EM].toLowerCase();if(t[0].length<=3&&!Ds.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Ds.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[h_]){let a=m_.parseYear(t[h_]);i.start.assign("year",a)}else{let a=_M.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Od.default=wd});var __=p(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var to=Ae(),wM=tn(),g_=ot(),Dd=class extends wM.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return g_.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${g_.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",to.Meridiem.PM)):i<6&&n.assign("meridiem",to.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",to.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",to.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Rd.default=Dd});var T_=p(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var ro=ot(),OM=Te(),DM=S(),RM=St(),SM=new RegExp(`(${ro.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,ro.REGEX_PARTS.flags),Sd=class extends DM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ro.REGEX_PARTS.leftBoundary}innerPattern(){return SM}innerExtract(e,t){let n=ro.parseTimeUnits(t[1]),i=RM.reverseTimeUnits(n);return OM.ParsingComponents.createRelativeFromReference(e.reference,i)}};Md.default=Sd});var b_=p(Rs=>{"use strict";var MM=Rs&&Rs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rs,"__esModule",{value:!0});var kM=MM(tr()),kd=class extends kM.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Rs.default=kd});var v_=p(Ss=>{"use strict";var AM=Ss&&Ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ss,"__esModule",{value:!0});var PM=AM(cr()),Ad=class extends PM.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Ss.default=Ad});var E_=p(_r=>{"use strict";var xM=_r&&_r.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),CM=_r&&_r.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),NM=_r&&_r.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&xM(e,r,t);return CM(e,r),e};Object.defineProperty(_r,"__esModule",{value:!0});var IM=S(),Ms=NM(pr()),Pd=ot(),FM=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Pd.REGEX_PARTS.rightBoundary}`,Pd.REGEX_PARTS.flags),xd=class extends IM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Pd.REGEX_PARTS.leftBoundary}innerPattern(e){return FM}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Ms.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Ms.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Ms.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Ms.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Ms.theDayBefore(e.reference,2)}return i}};_r.default=xd});var w_=p(zt=>{"use strict";var UM=zt&&zt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),LM=zt&&zt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qM=zt&&zt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&UM(e,r,t);return LM(e,r),e},WM=zt&&zt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zt,"__esModule",{value:!0});var YM=S(),cn=qM(pr()),$M=Rt(),jM=WM(ee()),Cd=ot(),BM=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${Cd.REGEX_PARTS.rightBoundary}`,Cd.REGEX_PARTS.flags),Nd=class extends YM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Cd.REGEX_PARTS.leftBoundary}innerPattern(){return BM}innerExtract(e,t){let n=jM.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return cn.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return cn.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return cn.morning(e.reference);if(i.match(/в\s*полдень/))return cn.noon(e.reference);if(i.match(/прошлой\s*ночью/))return cn.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return cn.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),$M.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?cn.midnight(e.reference):s}};zt.default=Nd});var O_=p(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});var ks=ot(),GM=ie(),HM=S(),zM=nn(),KM=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${GM.matchAnyPattern(ks.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${ks.REGEX_PARTS.rightBoundary}`,ks.REGEX_PARTS.flags),VM=1,XM=2,ZM=3,Id=class extends HM.AbstractParserWithWordBoundaryChecking{innerPattern(){return KM}patternLeftBoundary(){return ks.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[XM].toLowerCase(),i=ks.WEEKDAY_DICTIONARY[n],s=t[VM],a=t[ZM],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=zM.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Fd.default=Id});var R_=p(Ps=>{"use strict";var QM=Ps&&Ps.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ps,"__esModule",{value:!0});var As=ot(),D_=Te(),JM=QM(ee()),ek=S(),tk=ie(),rk=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${tk.matchAnyPattern(As.TIME_UNIT_DICTIONARY)})(?=\\s*)${As.REGEX_PARTS.rightBoundary}`,As.REGEX_PARTS.flags),nk=1,ik=2,Ud=class extends ek.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return As.REGEX_PARTS.leftBoundary}innerPattern(){return rk}innerExtract(e,t){let n=t[nk].toLowerCase(),i=t[ik].toLowerCase(),s=As.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,D_.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,D_.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=JM.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Ps.default=Ud});var S_=p(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});var xs=ot(),sk=Te(),ak=S(),ok=St(),uk=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${xs.TIME_UNITS_PATTERN})${xs.REGEX_PARTS.rightBoundary}`,xs.REGEX_PARTS.flags),Ld=class extends ak.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return xs.REGEX_PARTS.leftBoundary}innerPattern(){return uk}innerExtract(e,t){let n=t[1].toLowerCase(),i=xs.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=ok.reverseTimeUnits(i);break}return sk.ParsingComponents.createRelativeFromReference(e.reference,i)}};qd.default=Ld});var A_=p(We=>{"use strict";var gt=We&&We.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(We,"__esModule",{value:!0});We.createConfiguration=We.createCasualConfiguration=We.parseDate=We.parse=We.strict=We.casual=void 0;var lk=gt(u_()),ck=gt(p_()),dk=gt(y_()),fk=gt(__()),pk=gt(T_()),hk=gt(b_()),mk=gt(v_()),yk=dr(),gk=gt(E_()),_k=gt(w_()),Tk=gt(O_()),bk=gt(R_()),M_=$t(),vk=gt(sn()),Ek=gt(S_());We.casual=new M_.Chrono(k_());We.strict=new M_.Chrono(Wd(!0));function wk(r,e,t){return We.casual.parse(r,e,t)}We.parse=wk;function Ok(r,e,t){return We.casual.parseDate(r,e,t)}We.parseDate=Ok;function k_(){let r=Wd(!1);return r.parsers.unshift(new gk.default),r.parsers.unshift(new _k.default),r.parsers.unshift(new dk.default),r.parsers.unshift(new bk.default),r.parsers.unshift(new Ek.default),r}We.createCasualConfiguration=k_;function Wd(r=!0){return yk.includeCommonConfiguration({parsers:[new vk.default(!0),new lk.default,new ck.default,new Tk.default,new fk.default(r),new pk.default],refiners:[new mk.default,new hk.default]},r)}We.createConfiguration=Wd});var Ae=p(G=>{"use strict";var Dk=G&&G.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Rk=G&&G.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qr=G&&G.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Dk(e,r,t);return Rk(e,r),e};Object.defineProperty(G,"__esModule",{value:!0});G.parseDate=G.parse=G.casual=G.strict=G.ru=G.zh=G.nl=G.pt=G.ja=G.fr=G.de=G.Meridiem=G.Chrono=G.en=void 0;var Yd=qr(il());G.en=Yd;var Sk=$t();Object.defineProperty(G,"Chrono",{enumerable:!0,get:function(){return Sk.Chrono}});var Mk;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(Mk=G.Meridiem||(G.Meridiem={}));var kk=qr(qm());G.de=kk;var Ak=qr(hy());G.fr=Ak;var Pk=qr(wy());G.ja=Pk;var xk=qr(qy());G.pt=xk;var Ck=qr(wg());G.nl=Ck;var Nk=qr(n_());G.zh=Nk;var Ik=qr(A_());G.ru=Ik;G.strict=Yd.strict;G.casual=Yd.casual;function Fk(r,e,t){return G.casual.parse(r,e,t)}G.parse=Fk;function Uk(r,e,t){return G.casual.parseDate(r,e,t)}G.parseDate=Uk});var ir=p($r=>{"use strict";$r.__esModule=!0;var Gk;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(Gk=$r.Operators||($r.Operators={}));var Hk;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(Hk=$r.StructuralCharacters||($r.StructuralCharacters={}));var zk;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(zk=$r.Tokens||($r.Tokens={}))});var Jd=p(fo=>{"use strict";fo.__esModule=!0;var be=ir();fo.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};fo.VALID_TOKENS={identifierOnly:[{name:be.Tokens.IDENTIFIER},{name:be.Tokens.STRUCTURAL_CHARACTER,value:be.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:be.Tokens.IDENTIFIER},{name:be.Tokens.STRUCTURAL_CHARACTER,value:be.StructuralCharacters.OPEN_PARENTHESIS},{name:be.Tokens.OPERATOR,value:be.Operators.NOT}],binaryOperator:[{name:be.Tokens.OPERATOR,value:be.Operators.AND},{name:be.Tokens.OPERATOR,value:be.Operators.OR},{name:be.Tokens.OPERATOR,value:be.Operators.XOR}],binaryOperatorOrClose:[{name:be.Tokens.OPERATOR,value:be.Operators.AND},{name:be.Tokens.OPERATOR,value:be.Operators.OR},{name:be.Tokens.OPERATOR,value:be.Operators.XOR},{name:be.Tokens.STRUCTURAL_CHARACTER,value:be.StructuralCharacters.CLOSE_PARENTHESIS}]}});var ef=p(wr=>{"use strict";wr.__esModule=!0;var si=ir();wr.STRUCTURAL_CHARACTERS={"(":si.StructuralCharacters.OPEN_PARENTHESIS,")":si.StructuralCharacters.CLOSE_PARENTHESIS};wr.OPERATORS={AND:si.Operators.AND,OR:si.Operators.OR,XOR:si.Operators.XOR,NOT:si.Operators.NOT};wr.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));wr.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);wr.COMMENT_DELIMITER=String.fromCodePoint(35);wr.EOL=String.fromCodePoint(10);wr.ESCAPE_CHARACTER=String.fromCodePoint(92)});var G_=p(Or=>{"use strict";var tf=Or&&Or.__assign||function(){return tf=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},tf.apply(this,arguments)};Or.__esModule=!0;var B_=ir(),mn=ef();Or.createResult=function(r,e,t){return{token:tf({name:r},e!==null?{value:e}:{}),remainingString:t}};Or.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===mn.EOL){e=t;break}}return Or.createResult(B_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};Or.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===mn.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+mn.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===mn.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!mn.SEPARATORS.has(s)&&!mn.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+mn.QUOTED_IDENTIFIER_DELIMITER+" character");return Or.createResult(B_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var H_=p(rf=>{"use strict";rf.__esModule=!0;var ai=ir(),_t=ef(),oi=G_();rf.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!_t.SEPARATORS.has(s)){var a=_t.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===ai.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!_t.SEPARATORS.has(o)&&o!==ai.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return oi.createResult(ai.Tokens.STRUCTURAL_CHARACTER,_t.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===_t.QUOTED_IDENTIFIER_DELIMITER)return oi.getQuotedIdentifier(r.slice(i+1));if(s===_t.COMMENT_DELIMITER)return oi.getComment(r.slice(i+1));e=i}}else if(_t.SEPARATORS.has(s)||_t.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===_t.QUOTED_IDENTIFIER_DELIMITER||s===_t.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(_t.OPERATORS[u]){if(n&&!_t.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return oi.createResult(ai.Tokens.OPERATOR,_t.OPERATORS[u],l)}else return oi.createResult(ai.Tokens.IDENTIFIER,u,l)}return oi.createResult(ai.Tokens.EOF,null,"")}});var z_=p(Dr=>{"use strict";var Kk=Dr&&Dr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Dr.__esModule=!0;var Vk=H_(),ui=ir(),po=Jd();Dr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=Vk.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==ui.Tokens.COMMENT)return Dr.validateToken(s,t,n),s}}};Dr.getValue=function(r,e){var t=r(po.VALID_TOKENS.identifierOrNot),n=t.value===ui.Operators.NOT;n&&(t=r(po.VALID_TOKENS.identifierOnly));var i=t.name===ui.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?Kk(i,[{name:ui.Tokens.OPERATOR,value:ui.Operators.NOT}]):i};Dr.previousOperatorTakesPrecedent=function(r,e){return po.OPERATOR_PRECEDENCE[r]<=po.OPERATOR_PRECEDENCE[e]};Dr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===ui.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var sf=p(Us=>{"use strict";var li=Us&&Us.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Us.__esModule=!0;var K_=ir(),V_=Jd(),ho=z_();Us.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=ho.newTokenGenerator(r);return nf(e)};var nf=function(r,e){e===void 0&&(e=!1);for(var t=li(ho.getValue(r,nf)),n=[];;){var i=e?V_.VALID_TOKENS.binaryOperatorOrClose:V_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===K_.Tokens.EOF||s.name===K_.Tokens.STRUCTURAL_CHARACTER)return li(t,li(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&ho.previousOperatorTakesPrecedent(a.value,s.value))t=li(t,[a]),n=n.slice(0,-1);else break}n=li(n,[s]),t=li(t,ho.getValue(r,nf))}}});var af=p(Rr=>{"use strict";Rr.__esModule=!0;var X_=ir();Rr.andUtil=function(r,e){return r&&e};Rr.orUtil=function(r,e){return r||e};Rr.xorUtil=function(r,e){return r!==e};Rr.notUtil=function(r){return!r};Rr.isIdentifier=function(r){var e=r.name,t=r.value;return e===X_.Tokens.IDENTIFIER&&typeof t=="string"};Rr.isOperator=function(r){var e=r.name,t=r.value;return e===X_.Tokens.OPERATOR&&typeof t=="string"};Rr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var Z_=p(lf=>{"use strict";var Ls;lf.__esModule=!0;var of=ir(),uf=af();lf.OPERATOR_MAP=(Ls={},Ls[of.Operators.AND]=uf.andUtil,Ls[of.Operators.OR]=uf.orUtil,Ls[of.Operators.XOR]=uf.xorUtil,Ls)});var J_=p(gn=>{"use strict";var cf=gn&&gn.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};gn.__esModule=!0;var Xk=sf(),Q_=ir(),Zk=Z_(),yn=af();gn.getEvaluator=function(r){var e=Xk.parse(r);return function(t){return gn.evaluate(e,t)}};gn.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(yn.isIdentifier(i)||yn.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===Q_.Tokens.IDENTIFIER)return cf(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===Q_.Operators.NOT)return o===void 0&&yn.throwInvalidExpression("missing identifier"),cf(n.slice(0,-1),[yn.notUtil(o)]);(o===void 0||a===void 0)&&yn.throwInvalidExpression("missing identifier");var u=Zk.OPERATOR_MAP[i.value];return u||yn.throwInvalidExpression("unknown operator"),cf(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&yn.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var tT=p(qs=>{"use strict";qs.__esModule=!0;var eT=J_();qs.getEvaluator=eT.getEvaluator;qs.evaluate=eT.evaluate;var Qk=sf();qs.parse=Qk.parse});var uA={};wT(uA,{default:()=>Po});module.exports=OT(uA);var mT=require("obsidian");var Pn=require("obsidian");var cA=new Error("timeout while waiting for mutex to become available"),dA=new Error("mutex already locked"),DT=new Error("request for lock canceled"),Cf=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},No=class{constructor(e,t=DT){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return Cf(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return Cf(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},RT=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Xs=class{constructor(e){this._semaphore=new No(1,e)}acquire(){return RT(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var vi=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1;this.explainQuery=!1}},Rn=class{constructor(e,t){this.defaultLayout=["description","priority","recurrenceRule","startDate","scheduledDate","dueDate","doneDate","blockLink"];e?this.options=e:this.options=new vi,t?this.layoutComponents=t:this.layoutComponents=this.defaultLayout,this.layoutComponents=this.applyOptions(this.options)}applyOptions(e){let t=(i,s,a)=>s?i.filter(o=>o!=a):i,n=this.layoutComponents;return n=t(n,e.hidePriority,"priority"),n=t(n,e.hideRecurrenceRule,"recurrenceRule"),n=t(n,e.hideStartDate,"startDate"),n=t(n,e.hideScheduledDate,"scheduledDate"),n=t(n,e.hideDueDate,"dueDate"),n=t(n,e.hideDoneDate,"doneDate"),n}};var Zs=["MO","TU","WE","TH","FR","SA","SU"],we=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Zs.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Zs[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var pe=function(r){return r!=null},dt=function(r){return typeof r=="number"},Io=function(r){return typeof r=="string"&&Zs.includes(r)},Ye=Array.isArray,Et=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var V=function(r,e){var t=0,n=[];if(Ye(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},Nf=function(r){return Ye(r)?r:[r]};function Br(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=V(t,e/t.length)),t.slice(0,e)+String(n))}var If=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},Ge=function(r,e){var t=r%e;return t*e<0?t+e:t},Qs=function(r,e){return{div:Math.floor(r/e),mod:Ge(r,e)}},ft=function(r){return!pe(r)||r.length===0},ve=function(r){return!ft(r)},Z=function(r,e){return ve(r)&&r.indexOf(e)!==-1};var kr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Br(n.getUTCFullYear().toString(),4,"0"),Br(n.getUTCMonth()+1,2,"0"),Br(n.getUTCDate(),2,"0"),"T",Br(n.getUTCHours(),2,"0"),Br(n.getUTCMinutes(),2,"0"),Br(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(kr||(kr={}));var I=kr;var ST=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),ar=ST;var ip=Vs(np(),1),{__extends:Mn,__assign:Ze,__rest:vA,__decorate:EA,__param:wA,__metadata:OA,__awaiter:DA,__generator:RA,__exportStar:SA,__createBinding:MA,__values:kA,__read:AA,__spread:PA,__spreadArrays:xA,__spreadArray:T,__await:CA,__asyncGenerator:NA,__asyncDelegator:IA,__asyncValues:FA,__makeTemplateObject:UA,__importStar:LA,__importDefault:qA,__classPrivateFieldGet:WA,__classPrivateFieldSet:YA,__classPrivateFieldIn:$A}=ip.default;var MT=function(r){Mn(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(ar),Uo=MT;var kT={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Gr=kT;var sp=function(r,e){return r.indexOf(e)!==-1},AT=function(r){return r.toString()},PT=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},xT=function(){function r(e,t,n,i){if(t===void 0&&(t=AT),n===void 0&&(n=Gr),i===void 0&&(i=PT),this.text=[],this.language=n||Gr,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(pe(this.origOptions.byweekday)){var o=Ye(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(sp(["dtstart","wkst","freq"],n))return!0;if(!sp(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[k.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=dt(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),Ye(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Zt=xT;var CT=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Ei(r,e){e===void 0&&(e=Gr);var t={},n=new CT(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=k.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=k.WEEKLY,t.byweekday=[k.MO,k.TU,k.WE,k.TH,k.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=k.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=k.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=k.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=k.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=k.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=k.WEEKLY;var h=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[k[h]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(k[y]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=k.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),h=n.accept("the");if(!!(f||h))do{var y=l(),m=u(),g=o();if(y)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(k[m].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(k[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[k.MO,k.TU,k.WE,k.TH,k.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var O=n.acceptNumber();if(!O)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(O[0],10)];n.accept("comma");){if(O=n.acceptNumber(),!O)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(O[0],10))}}else if(g)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(g);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var h=n.acceptNumber();if(!h)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(h[0],10)];n.accept("comma");){if(h=n.acceptNumber(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(h[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var z;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(z||(z={}));function wi(r){return r<z.HOURLY}var ap=function(r,e){return e===void 0&&(e=Gr),new k(Ei(r,e)||void 0)},kn=["count","until","interval","byweekday","bymonthday","bymonth"];Zt.IMPLEMENTED=[];Zt.IMPLEMENTED[z.HOURLY]=kn;Zt.IMPLEMENTED[z.MINUTELY]=kn;Zt.IMPLEMENTED[z.DAILY]=["byhour"].concat(kn);Zt.IMPLEMENTED[z.WEEKLY]=kn;Zt.IMPLEMENTED[z.MONTHLY]=kn;Zt.IMPLEMENTED[z.YEARLY]=["byweekno","byyearday"].concat(kn);var op=function(r,e,t,n){return new Zt(r,e,t,n).toString()},up=Zt.isFullyConvertible;var An=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var lp=function(r){Mn(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return kr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=Ge(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=Qs(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),ft(i)||Z(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=Qs(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(ft(i)||Z(i,this.hour))&&(ft(s)||Z(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=Qs(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(ft(i)||Z(i,this.hour))&&(ft(s)||Z(s,this.minute))&&(ft(a)||Z(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=kr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>kr.MAXYEAR))return;t=kr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case z.YEARLY:return this.addYears(s);case z.MONTHLY:return this.addMonths(s);case z.WEEKLY:return this.addWeekly(s,a);case z.DAILY:return this.addDaily(s);case z.HOURLY:return this.addHours(s,n,o);case z.MINUTELY:return this.addMinutes(s,n,o,u);case z.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(An);function Lo(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];Z(fp,s)||e.push(s),I.isDate(r[s])&&!I.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return Ze({},r)}function cp(r){var e=Ze(Ze({},Oi),Lo(r));if(pe(e.byeaster)&&(e.freq=k.YEARLY),!(pe(e.freq)&&k.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),pe(e.wkst)?dt(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=k.MO.weekday,pe(e.bysetpos)){dt(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||ve(e.byweekno)||ve(e.byyearday)||Boolean(e.bymonthday)||ve(e.bymonthday)||pe(e.byweekday)||pe(e.byeaster)))switch(e.freq){case k.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case k.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case k.WEEKLY:e.byweekday=[I.getWeekday(e.dtstart)];break}if(pe(e.bymonth)&&!Ye(e.bymonth)&&(e.bymonth=[e.bymonth]),pe(e.byyearday)&&!Ye(e.byyearday)&&dt(e.byyearday)&&(e.byyearday=[e.byyearday]),!pe(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Ye(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(pe(e.byweekno)&&!Ye(e.byweekno)&&(e.byweekno=[e.byweekno]),!pe(e.byweekday))e.bynweekday=null;else if(dt(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(Io(e.byweekday))e.byweekday=[we.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof we)!e.byweekday.n||e.freq>k.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(dt(u)){a.push(u);continue}else if(Io(u)){a.push(we.fromStr(u).weekday);continue}!u.n||e.freq>k.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=ve(a)?a:null,e.bynweekday=ve(o)?o:null}return pe(e.byhour)?dt(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<k.HOURLY?[e.dtstart.getUTCHours()]:null,pe(e.byminute)?dt(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<k.MINUTELY?[e.dtstart.getUTCMinutes()]:null,pe(e.bysecond)?dt(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<k.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function dp(r){var e=r.dtstart.getTime()%1e3;if(!wi(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new An(n,i,s,e))})})}),t}function Ri(r){var e=r.split(`
`).map(NT).filter(function(t){return t!==null});return Ze(Ze({},e[0]),e[1])}function Di(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=I.untilStringToDate(i),e}function NT(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return pp(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return pp(r);case"DTSTART":return Di(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function pp(r){var e=r.replace(/^RRULE:/i,""),t=Di(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=z[o.toUpperCase()];break;case"WKST":t.wkst=wt[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=IT(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=FT(o);break;case"DTSTART":case"TZID":var c=Di(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=I.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function IT(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(hp)}return hp(r)}function hp(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function FT(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return wt[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=wt[s].weekday;return new we(a,i)})}var Hr=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=I.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function Si(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(Oi),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!Z(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!pe(o)||Ye(o)&&!o.length)){switch(a){case"FREQ":u=k.FREQUENCIES[r.freq];break;case"WKST":dt(o)?u=new we(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=Nf(o).map(function(h){return h instanceof we?h:Ye(h)?new we(h[0],h[1]):new we(h)}).toString();break;case"DTSTART":t=UT(o,r.tzid);break;case"UNTIL":u=I.timeToUntilString(o,!r.tzid);break;default:if(Ye(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(h){var y=h[0],m=h[1];return"".concat(y,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(h){return!!h}).join(`
`)}function UT(r,e){return r?"DTSTART"+new Hr(new Date(r),e).toString():""}function LT(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var mp=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?I.clone(t):I.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!LT(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(Ye(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new ar(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return Ye(n)?I.cloneDates(n):n instanceof Date?I.clone(n):n},r}();var yp=T(T(T(T(T(T(T(T(T(T(T(T(T([],V(1,31),!0),V(2,28),!0),V(3,31),!0),V(4,30),!0),V(5,31),!0),V(6,30),!0),V(7,31),!0),V(8,31),!0),V(9,30),!0),V(10,31),!0),V(11,30),!0),V(12,31),!0),V(1,7),!0),gp=T(T(T(T(T(T(T(T(T(T(T(T(T([],V(1,31),!0),V(2,29),!0),V(3,31),!0),V(4,30),!0),V(5,31),!0),V(6,30),!0),V(7,31),!0),V(8,31),!0),V(9,30),!0),V(10,31),!0),V(11,30),!0),V(12,31),!0),V(1,7),!0),qT=Et(1,29),WT=Et(1,30),Ar=Et(1,31),He=Et(1,32),_p=T(T(T(T(T(T(T(T(T(T(T(T(T([],He,!0),WT,!0),He,!0),Ar,!0),He,!0),Ar,!0),He,!0),He,!0),Ar,!0),He,!0),Ar,!0),He,!0),He.slice(0,7),!0),Tp=T(T(T(T(T(T(T(T(T(T(T(T(T([],He,!0),qT,!0),He,!0),Ar,!0),He,!0),Ar,!0),He,!0),He,!0),Ar,!0),He,!0),Ar,!0),He,!0),He.slice(0,7),!0),YT=Et(-28,0),$T=Et(-29,0),Pr=Et(-30,0),ze=Et(-31,0),bp=T(T(T(T(T(T(T(T(T(T(T(T(T([],ze,!0),$T,!0),ze,!0),Pr,!0),ze,!0),Pr,!0),ze,!0),ze,!0),Pr,!0),ze,!0),Pr,!0),ze,!0),ze.slice(0,7),!0),vp=T(T(T(T(T(T(T(T(T(T(T(T(T([],ze,!0),YT,!0),ze,!0),Pr,!0),ze,!0),Pr,!0),ze,!0),ze,!0),Pr,!0),ze,!0),Pr,!0),ze,!0),ze.slice(0,7),!0),Ep=[0,31,60,91,121,152,182,213,244,274,305,335,366],wp=[0,31,59,90,120,151,181,212,243,273,304,334,365],qo=function(){for(var r=[],e=0;e<55;e++)r=r.concat(Et(7));return r}();function Op(r,e){var t=new Date(Date.UTC(r,0,1)),n=I.isLeapYear(r)?366:365,i=I.isLeapYear(r+1)?366:365,s=I.toOrdinal(t),a=I.getWeekday(t),o=Ze(Ze({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},jT(r)),{wnomask:null});if(ft(e.byweekno))return o;o.wnomask=V(0,n+7);var u,l,c=u=Ge(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+Ge(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=Ge(l,7),h=Math.floor(d+f/4),y=0;y<e.byweekno.length;y++){var m=e.byweekno[y];if(m<0&&(m+=h+1),m>0&&m<=h){var g=void 0;m>1?(g=c+(m-1)*7,c!==u&&(g-=7-u)):g=c;for(var O=0;O<7&&(o.wnomask[g]=1,g++,o.wdaymask[g]!==e.wkst);O++);}}if(Z(e.byweekno,1)){var g=c+h*7;if(c!==u&&(g-=7-u),g<n)for(var y=0;y<7&&(o.wnomask[g]=1,g+=1,o.wdaymask[g]!==e.wkst);y++);}if(c){var D=void 0;if(Z(e.byweekno,-1))D=-1;else{var A=I.getWeekday(new Date(Date.UTC(r-1,0,1))),X=Ge(7-A.valueOf()+e.wkst,7),ye=I.isLeapYear(r-1)?366:365,_e=void 0;X>=4?(X=0,_e=ye+Ge(A-e.wkst,7)):_e=n-c,D=Math.floor(52+Ge(_e,7)/4)}if(Z(e.byweekno,D))for(var g=0;g<c;g++)o.wnomask[g]=1}return o}function jT(r){var e=I.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=I.getWeekday(t);return e===365?{mmask:yp,mdaymask:Tp,nmdaymask:vp,wdaymask:qo.slice(n),mrange:wp}:{mmask:gp,mdaymask:_p,nmdaymask:bp,wdaymask:qo.slice(n),mrange:Ep}}function Dp(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===k.YEARLY)if(ft(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===k.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(ft(o))return a;a.nwdaymask=V(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var h=void 0,y=s.bynweekday[f],m=y[0],g=y[1];g<0?(h=d+(g+1)*7,h-=Ge(i[h]-m,7)):(h=c+(g-1)*7,h+=Ge(7-i[h]+m,7)),c<=h&&h<=d&&(a.nwdaymask[h]=1)}return a}function Rp(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,h=Math.floor((t+11*l+22*f)/451),y=Math.floor((l+f-7*h+114)/31),m=(l+f-7*h+114)%31+1,g=Date.UTC(r,y-1,m+e),O=Date.UTC(r,0,1);return[Math.ceil((g-O)/(1e3*60*60*24))]}var BT=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Op(e,n)),ve(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=Dp(e,t,s,a,o,n)}pe(n.byeaster)&&(this.eastermask=Rp(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[Et(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=V(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=V(null,this.yearlen+7),s=I.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=V(null,this.yearlen),s=I.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),I.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new An(e,t,a,i)});return I.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new An(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case z.YEARLY:return this.ydayset.bind(this);case z.MONTHLY:return this.mdayset.bind(this);case z.WEEKLY:return this.wdayset.bind(this);case z.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case z.HOURLY:return this.htimeset.bind(this);case z.MINUTELY:return this.mtimeset.bind(this);case z.SECONDLY:return this.stimeset.bind(this)}},r}(),Sp=BT;function Mp(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=Ge(c,e.length)):(u=Math.floor((c-1)/e.length),l=Ge(c-1,e.length));for(var d=[],f=t;f<n;f++){var h=s[f];!pe(h)||d.push(h)}var y=void 0;u<0?y=d.slice(u)[0]:y=d[u];var m=e[l],g=I.fromOrdinal(i.yearordinal+y),O=I.combine(g,m);Z(a,O)||a.push(O)}return I.sort(a),a}function ra(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return or(r);var u=lp.fromDate(t),l=new Sp(e);l.rebuild(u.year,u.month);for(var c=zT(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],h=d[1],y=d[2],m=HT(f,h,y,l,e);if(ve(a))for(var g=Mp(a,c,h,y,l,f),O=0;O<g.length;O++){var D=g[O];if(s&&D>s)return or(r);if(D>=t){var A=kp(D,e);if(!r.accept(A)||o&&(--o,!o))return or(r)}}else for(var O=h;O<y;O++){var X=f[O];if(!!pe(X))for(var ye=I.fromOrdinal(l.yearordinal+X),_e=0;_e<c.length;_e++){var se=c[_e],D=I.combine(ye,se);if(s&&D>s)return or(r);if(D>=t){var A=kp(D,e);if(!r.accept(A)||o&&(--o,!o))return or(r)}}}if(e.interval===0||(u.add(e,m),u.year>I.MAXYEAR))return or(r);wi(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function GT(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return ve(n)&&!Z(n,r.mmask[e])||ve(i)&&!r.wnomask[e]||ve(s)&&!Z(s,r.wdaymask[e])||ve(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!Z(r.eastermask,e)||(ve(o)||ve(u))&&!Z(o,r.mdaymask[e])&&!Z(u,r.nmdaymask[e])||ve(l)&&(e<r.yearlen&&!Z(l,e+1)&&!Z(l,-r.yearlen+e)||e>=r.yearlen&&!Z(l,e+1-r.yearlen)&&!Z(l,-r.nextyearlen+e-r.yearlen))}function kp(r,e){return new Hr(r,e.tzid).rezonedDate()}function or(r){return r.getValue()}function HT(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=GT(n,o,i),s&&(r[o]=null)}return s}function zT(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return wi(n)?dp(t):n>=k.HOURLY&&ve(i)&&!Z(i,e.hour)||n>=k.MINUTELY&&ve(s)&&!Z(s,e.minute)||n>=k.SECONDLY&&ve(a)&&!Z(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var wt={MO:new we(0),TU:new we(1),WE:new we(2),TH:new we(3),FR:new we(4),SA:new we(5),SU:new we(6)},Oi={freq:z.YEARLY,dtstart:null,interval:1,wkst:wt.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},fp=Object.keys(Oi),k=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new mp,this.origOptions=Lo(e);var n=cp(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Ei(e,t)},r.fromText=function(e,t){return ap(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return ra(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new Uo("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new ar("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!I.isValidDate(e)||!I.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new Uo("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new ar("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!I.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new ar("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!I.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new ar("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Si(this.origOptions)},r.prototype.toText=function(e,t,n){return op(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return up(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=z.YEARLY,r.MONTHLY=z.MONTHLY,r.WEEKLY=z.WEEKLY,r.DAILY=z.DAILY,r.HOURLY=z.HOURLY,r.MINUTELY=z.MINUTELY,r.SECONDLY=z.SECONDLY,r.MO=wt.MO,r.TU=wt.TU,r.WE=wt.WE,r.TH=wt.TH,r.FR=wt.FR,r.SA=wt.SA,r.SU=wt.SU,r.parseString=Ri,r.optionsToString=Si,r}();function Ap(r,e,t,n,i,s){var a={},o=r.accept;function u(f,h){t.forEach(function(y){y.between(f,h,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var h=new Hr(f,s).rezonedDate();a[Number(h)]=!0}),r.accept=function(f){var h=Number(f);return isNaN(h)?o.call(this,f):!a[h]&&(u(new Date(h-1),new Date(h+1)),!a[h])?(a[h]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var h=Number(f);return a[h]?!0:(a[h]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new Hr(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){ra(r,f.options)});var d=r._result;switch(I.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var Pp={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function KT(r,e){var t=[],n=[],i=[],s=[],a=Di(r),o=a.dtstart,u=a.tzid,l=JT(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=QT(c),h=f.name,y=f.parms,m=f.value;switch(h.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(Ri(c));break;case"RDATE":var g=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],O=g[1];O&&!u&&(u=O),n=n.concat(xp(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(Ri(m));break;case"EXDATE":s=s.concat(xp(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function VT(r,e){var t=KT(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new Yo(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new k(Wo(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new k(Wo(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new k(Wo(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function na(r,e){return e===void 0&&(e={}),VT(r,XT(e))}function Wo(r,e,t){return Ze(Ze({},r),{dtstart:e,tzid:t})}function XT(r){var e=[],t=Object.keys(r),n=Object.keys(Pp);if(t.forEach(function(i){Z(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return Ze(Ze({},Pp),r)}function ZT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=If(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function QT(r){var e=ZT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function JT(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function eb(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function xp(r,e){return eb(e),r.split(",").map(function(t){return I.untilStringToDate(t)})}function Cp(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var Yo=function(r){Mn(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=Cp.apply(n,["dtstart"]),n.tzid=Cp.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return Ap(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){Np(t,this._rrule)},e.prototype.exrule=function(t){Np(t,this._exrule)},e.prototype.rdate=function(t){Ip(t,this._rdate)},e.prototype.exdate=function(t){Ip(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return na(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return na(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Si({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(Fp("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(Fp("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(k);function Np(r,e){if(!(r instanceof k))throw new TypeError(String(r)+" is not RRule instance");Z(e.map(String),String(r))||e.push(r)}function Ip(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");Z(e.map(Number),Number(r))||(e.push(r),I.sort(e))}function Fp(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return I.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}function It(r,e){return r!==null&&e===null?-1:r===null&&e!==null?1:r!==null&&e!==null?r.isValid()&&!e.isValid()?-1:!r.isValid()&&e.isValid()||r.isAfter(e)?1:r.isBefore(e)?-1:0:0}var xe=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=k.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new k(u);return new xe({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment(),i=new k(vt(Ee({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()}));e=this.nextAfter(n.endOf("day"),i)}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");e=this.nextAfter(n,this.rrule)}if(e!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(e),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||It(this.startDate,e.startDate)!==0||It(this.scheduledDate,e.scheduledDate)!==0||It(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=xe.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=xe.nextAfterYears(e,n,t,a[1])),xe.addTimezone(n).toDate()}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));xe.isSkippingTooManyMonths(e,t,s);)t=xe.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));xe.isSkippingTooManyYears(e,t,s);)t=xe.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new k(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var Ot=(a=>(a.TODO="TODO",a.DONE="DONE",a.IN_PROGRESS="IN_PROGRESS",a.CANCELLED="CANCELLED",a.NON_TASK="NON_TASK",a.EMPTY="EMPTY",a))(Ot||{}),Ce=class{constructor(e,t,n,i,s="TODO"){this.symbol=e,this.name=t,this.nextStatusSymbol=n,this.availableAsCommand=i,this.type=s}};var rt=class{get symbol(){return this.configuration.symbol}get name(){return this.configuration.name}get nextStatusSymbol(){return this.configuration.nextStatusSymbol}get availableAsCommand(){return this.configuration.availableAsCommand}get type(){return this.configuration.type}constructor(e){this.configuration=e}static makeDone(){return new rt(new Ce("x","Done"," ",!0,"DONE"))}static makeEmpty(){return new rt(new Ce("","EMPTY","",!0,"EMPTY"))}static makeTodo(){return new rt(new Ce(" ","Todo","x",!0,"TODO"))}static makeCancelled(){return new rt(new Ce("-","Cancelled"," ",!0,"CANCELLED"))}static makeInProgress(){return new rt(new Ce("/","In Progress","x",!0,"IN_PROGRESS"))}static getTypeForUnknownSymbol(e){switch(e){case"x":case"X":return"DONE";case"/":return"IN_PROGRESS";case"-":return"CANCELLED";case"":return"EMPTY";case" ":default:return"TODO"}}static getTypeFromStatusTypeString(e){return Ot[e]||"TODO"}static createUnknownStatus(e){return new rt(new Ce(e,"Unknown","x",!1,"TODO"))}static createFromImportedValue(e){let t=e[0],n=rt.getTypeFromStatusTypeString(e[3]);return new rt(new Ce(t,e[1],e[2],!1,n))}isCompleted(){return this.type==="DONE"}previewText(){let e="";return rt.tasksPluginCanCreateCommandsForStatuses()&&this.availableAsCommand&&(e=" Available as a command."),`- [${this.symbol}] => [${this.nextStatusSymbol}], name: '${this.name}', type: '${this.configuration.type}'.${e}`}static tasksPluginCanCreateCommandsForStatuses(){return!1}},Y=rt;Y.DONE=rt.makeDone(),Y.EMPTY=rt.makeEmpty(),Y.TODO=rt.makeTodo();var Me=class{constructor(){this.coreStatuses=[Y.makeTodo().configuration,Y.makeDone().configuration],this.customStatuses=[Y.makeInProgress().configuration,Y.makeCancelled().configuration]}static addStatus(e,t){e.push(t)}static replaceStatus(e,t,n){let i=this.findStatusIndex(t,e);return i<=-1?!1:(e.splice(i,1,n),!0)}static findStatusIndex(e,t){let n=new Y(e);return t.findIndex(i=>new Y(i).previewText()==n.previewText())}static deleteStatus(e,t){let n=this.findStatusIndex(t,e);return n<=-1?!1:(e.splice(n,1),!0)}static deleteAllCustomStatuses(e){e.customStatuses.splice(0)}static resetAllCustomStatuses(e){Me.deleteAllCustomStatuses(e),new Me().customStatuses.forEach(n=>{Me.addStatus(e.customStatuses,n)})}static bulkAddStatusCollection(e,t){let n=[];return t.forEach(i=>{e.customStatuses.find(a=>a.symbol==i[0]&&a.name==i[1]&&a.nextStatusSymbol==i[2])?n.push(`The status ${i[1]} (${i[0]}) is already added.`):Me.addStatus(e.customStatuses,Y.createFromImportedValue(i))}),n}static applyToStatusRegistry(e,t){t.clearStatuses(),e.coreStatuses.forEach(n=>{t.add(n)}),e.customStatuses.forEach(n=>{t.add(n)})}};var Up=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var Qt=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return Up.forEach(t=>{e=[...e,new Qt(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return Qt.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of Qt.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var rb={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],statusSettings:new Me,features:Qt.settingsFlags,generalSettings:{},headingOpened:{}},xr=Ee({},rb),U=()=>{for(let r in Qt.settingsFlags)xr.features[r]===void 0&&(xr.features[r]=Qt.settingsFlags[r]);return xr.statusSettings.customStatuses.forEach((r,e,t)=>{var i,s;let n=Y.getTypeFromStatusTypeString(r.type);t[e]=new Ce((i=r.symbol)!=null?i:" ",r.name,(s=r.nextStatusSymbol)!=null?s:"x",r.availableAsCommand,n)}),Ee({},xr)},nt=r=>(xr=Ee(Ee({},xr),r),U());var zr=(r,e)=>(xr.generalSettings[r]=e,U()),Lp=r=>{var e;return(e=xr.features[r])!=null?e:!1};var le=class{constructor(){this._registeredStatuses=[];this.addDefaultStatusTypes()}get registeredStatuses(){return this._registeredStatuses.filter(({symbol:e})=>e!==Y.EMPTY.symbol)}static getInstance(){return le.instance||(le.instance=new le),le.instance}add(e){this.hasSymbol(e.symbol)||(e instanceof Y?this._registeredStatuses.push(e):this._registeredStatuses.push(new Y(e)))}bySymbol(e){return this.hasSymbol(e)?this.getSymbol(e):Y.EMPTY}bySymbolOrCreate(e){return this.hasSymbol(e)?this.getSymbol(e):Y.createUnknownStatus(e)}byName(e){return this._registeredStatuses.filter(({name:t})=>t===e).length>0?this._registeredStatuses.filter(({name:t})=>t===e)[0]:Y.EMPTY}resetToDefaultStatuses(){this.clearStatuses(),this.addDefaultStatusTypes()}clearStatuses(){this._registeredStatuses=[]}getNextStatus(e){if(e.nextStatusSymbol!==""){let t=this.bySymbol(e.nextStatusSymbol);if(t!==null)return t}return Y.EMPTY}getNextStatusOrCreate(e){let t=this.getNextStatus(e);return t.type!=="EMPTY"?t:Y.createUnknownStatus(e.nextStatusSymbol)}findUnknownStatuses(e){let t=e.filter(s=>!this.hasSymbol(s.symbol)),n=new le,i=[];return t.forEach(s=>{if(n.hasSymbol(s.symbol))return;let a=le.copyStatusWithNewName(s,`Unknown (${s.symbol})`);i.push(a),n.add(a)}),i}static copyStatusWithNewName(e,t){let n=new Ce(e.symbol,t,e.nextStatusSymbol,e.availableAsCommand,e.type);return new Y(n)}getSymbol(e){return this._registeredStatuses.filter(({symbol:t})=>t===e)[0]}hasSymbol(e){return this._registeredStatuses.find(t=>t.symbol===e)!==void 0}addDefaultStatusTypes(){[Y.makeTodo(),Y.makeInProgress(),Y.makeDone(),Y.makeCancelled()].forEach(t=>{this.add(t)})}};var lr=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/lr.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*lr.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*lr.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*lr.startedCoefficient),e.priority){case"1":t+=1*lr.priorityCoefficient;break;case"2":t+=.65*lr.priorityCoefficient;break;case"3":t+=.325*lr.priorityCoefficient;break}return t}},ur=lr;ur.dueCoefficient=12,ur.scheduledCoefficient=5,ur.startedCoefficient=-3,ur.priorityCoefficient=6,ur.milliSecondsPerDay=1e3*60*60*24;var $p=require("obsidian");var qp=require("obsidian");var $o,jo,Wp=({metadataCache:r,vault:e})=>{$o=r,jo=e},ia=t=>N(void 0,[t],function*({originalTask:r,newTasks:e}){if(jo===void 0||$o===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),Yp({originalTask:r,newTasks:e,vault:jo,metadataCache:$o,previousTries:0})}),Yp=s=>N(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let g=Math.min(Math.pow(10,i),100);setTimeout(()=>{Yp({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},g)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof qp.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=U(),h,y=0;for(let g of l){if(g.position.start.line<r.sectionStart||g.task===void 0)continue;if(d[g.position.start.line].includes(f)){if(y===r.sectionIndex){h=g;break}y++}}if(h===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,h.position.start.line),...e.map(g=>g.toFileLineString()),...d.slice(h.position.start.line+1)];yield t.modify(o,m.join(`
`))});function nb(r,e,t){return N(this,null,function*(){yield $p.MarkdownRenderer.renderMarkdown(r,e,t,null)})}function jp(r,e,t=null){return N(this,null,function*(){var a;t||(t=nb);let n=document.createElement("li");e.parentUlElement.appendChild(n),n.classList.add("task-list-item","plugin-tasks-list-item");let i=document.createElement("span");n.appendChild(i),i.classList.add("tasks-list-text"),yield ib(r,e,i,t);let s=document.createElement("input");return n.appendChild(s),s.classList.add("task-list-item-checkbox"),s.type="checkbox",r.status.symbol!==" "&&(s.checked=!0,n.classList.add("is-checked")),s.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),s.disabled=!0;let u=r.toggle();ia({originalTask:r,newTasks:u})}),n.prepend(s),n.setAttribute("data-task",r.status.symbol.trim()),n.setAttribute("data-line",e.listIndex.toString()),s.setAttribute("data-line",e.listIndex.toString()),(a=e.layoutOptions)!=null&&a.shortMode&&ab({task:r,element:i,isFilenameUnique:e.isFilenameUnique}),n})}function ib(r,e,t,n){return N(this,null,function*(){let i="",s=new Rn(e.layoutOptions);for(let a of s.layoutComponents){let o=r.componentToString(s,a);o&&(a==="description"&&(o=ob(o)),i+=o)}yield sb(t,i,"description",r,n)})}function sb(r,e,t,n,i){return N(this,null,function*(){if(t==="description"){yield i(e,r,n.path);let s=r.querySelector("blockquote"),a=s!=null?s:r,o=a.querySelector("p");if(o!==null){for(;o.firstChild;)a.insertBefore(o.firstChild,o);o.remove()}r.querySelectorAll("p").forEach(u=>{u.hasChildNodes()||u.remove()}),r.querySelectorAll(".footnotes").forEach(u=>{u.remove()})}else r.innerHTML=e})}function ab({task:r,element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),r.recurrence&&n.createDiv().setText(`${Ft} ${r.recurrence.toText()}`),r.startDate&&n.createDiv().setText(sa({signifier:Ut,date:r.startDate})),r.scheduledDate&&n.createDiv().setText(sa({signifier:Lt,date:r.scheduledDate})),r.dueDate&&n.createDiv().setText(sa({signifier:qt,date:r.dueDate})),r.doneDate&&n.createDiv().setText(sa({signifier:aa,date:r.doneDate}));let i=r.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}function sa({signifier:r,date:e}){return`${r} ${e.format(M.dateFormat)} (${e.from(window.moment().startOf("day"))})`}function ob(r){let{globalFilter:e,removeGlobalFilter:t}=U();return t?r.replace(e,"").trim():r}var it=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=U();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new me(vt(Ee({},e),{path:t,scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new me(vt(Ee({},i),{scheduledDateIsInferred:!1}))),i))}};function oa(r){return r.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}var ke={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},Ft="\u{1F501}",Ut="\u{1F6EB}",Lt="\u23F3",qt="\u{1F4C5}",aa="\u2705",pt=class{},M=pt;M.dateFormat="YYYY-MM-DD",M.indentationRegex=/^([\s\t>]*)/,M.listMarkerRegex=/([-*]|[0-9]+\.)/,M.checkboxRegex=/\[(.)\]/u,M.afterCheckboxRegex=/ *(.*)/u,M.taskRegex=new RegExp(pt.indentationRegex.source+pt.listMarkerRegex.source+" +"+pt.checkboxRegex.source+pt.afterCheckboxRegex.source,"u"),M.nonTaskRegex=new RegExp(pt.indentationRegex.source+pt.listMarkerRegex.source+"? *("+pt.checkboxRegex.source+")?"+pt.afterCheckboxRegex.source,"u"),M.listItemRegex=new RegExp(pt.indentationRegex.source+pt.listMarkerRegex.source),M.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,M.priorityRegex=/([⏫🔼🔽])$/u,M.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,M.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,M.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,M.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,M.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,M.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,M.hashTagsFromEnd=new RegExp(pt.hashTags.source+"$");var me=class{constructor({status:e,description:t,path:n,indentation:i,listMarker:s,sectionStart:a,sectionIndex:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:h,recurrence:y,blockLink:m,tags:g,originalMarkdown:O,scheduledDateIsInferred:D}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.listMarker=s,this.sectionStart=a,this.sectionIndex=o,this.precedingHeader=u,this.tags=g,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=h,this.recurrence=y,this.blockLink=m,this.originalMarkdown=O,this.scheduledDateIsInferred=D}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s,fallbackDate:a}){let o=e.match(M.taskRegex);if(o===null)return null;let u=o[4].trim(),{globalFilter:l}=U();if(!u.includes(l))return null;let c=u,d=o[1],f=o[2],h=o[3],y=le.getInstance().bySymbolOrCreate(h),m=c.match(M.blockLinkRegex),g=m!==null?m[0]:"";g!==""&&(c=c.replace(M.blockLinkRegex,"").trim());let O,D="3",A=null,X=null,ye=!1,_e=null,se=null,H="",bt=null,lt=[],P="",E=20,b=0;do{O=!1;let v=c.match(M.priorityRegex);if(v!==null){switch(v[1]){case ke.Low:D="4";break;case ke.Medium:D="2";break;case ke.High:D="1";break}c=c.replace(M.priorityRegex,"").trim(),O=!0}let q=c.match(M.doneDateRegex);q!==null&&(se=window.moment(q[1],M.dateFormat),c=c.replace(M.doneDateRegex,"").trim(),O=!0);let w=c.match(M.dueDateRegex);w!==null&&(_e=window.moment(w[1],M.dateFormat),c=c.replace(M.dueDateRegex,"").trim(),O=!0);let F=c.match(M.scheduledDateRegex);F!==null&&(X=window.moment(F[1],M.dateFormat),c=c.replace(M.scheduledDateRegex,"").trim(),O=!0);let B=c.match(M.startDateRegex);B!==null&&(A=window.moment(B[1],M.dateFormat),c=c.replace(M.startDateRegex,"").trim(),O=!0);let W=c.match(M.recurrenceRegex);W!==null&&(H=W[1].trim(),c=c.replace(M.recurrenceRegex,"").trim(),O=!0);let de=c.match(M.hashTagsFromEnd);if(de!=null){c=c.replace(M.hashTagsFromEnd,"").trim(),O=!0;let fe=de[0].trim();P=P.length>0?[fe,P].join(" "):fe}b++}while(O&&b<=E);H.length>0&&(bt=xe.fromText({recurrenceRuleText:H,startDate:A,scheduledDate:X,dueDate:_e})),it.canApplyFallback({startDate:A,scheduledDate:X,dueDate:_e})&&a!==null&&(X=a,ye=!0),P.length>0&&(c+=" "+P);let x=c.match(M.hashTags);return x!==null&&(lt=x.filter(v=>v!==l).map(v=>v.trim())),new me({status:y,description:c,path:t,indentation:d,listMarker:f,sectionStart:n,sectionIndex:i,precedingHeader:s,priority:D,startDate:A,scheduledDate:X,dueDate:_e,doneDate:se,recurrence:bt,blockLink:g,tags:lt,originalMarkdown:e,scheduledDateIsInferred:ye})}toLi(e){return N(this,null,function*(){return jp(this,e)})}toString(e){let t=new Rn(e),n="";for(let i of t.layoutComponents)n+=this.componentToString(t,i);return n}componentToString(e,t){var n;switch(t){case"description":return this.description;case"priority":{let i="";return this.priority==="1"?i=" "+ke.High:this.priority==="2"?i=" "+ke.Medium:this.priority==="4"&&(i=" "+ke.Low),i}case"startDate":return this.startDate?e.options.shortMode?" "+Ut:` ${Ut} ${this.startDate.format(M.dateFormat)}`:"";case"scheduledDate":return!this.scheduledDate||this.scheduledDateIsInferred?"":e.options.shortMode?" "+Lt:` ${Lt} ${this.scheduledDate.format(M.dateFormat)}`;case"doneDate":return this.doneDate?e.options.shortMode?" "+aa:` ${aa} ${this.doneDate.format(M.dateFormat)}`:"";case"dueDate":return this.dueDate?e.options.shortMode?" "+qt:` ${qt} ${this.dueDate.format(M.dateFormat)}`:"";case"recurrenceRule":return this.recurrence?e.options.shortMode?" "+Ft:` ${Ft} ${this.recurrence.toText()}`:"";case"blockLink":return(n=this.blockLink)!=null?n:"";default:throw new Error(`Don't know how to render task component of type '${t}'`)}}toFileLineString(){return`${this.indentation}${this.listMarker} [${this.status.symbol}] ${this.toString()}`}toggle(){let e=le.getInstance().getNextStatusOrCreate(this.status),t=null,n=null;if(e.isCompleted()){let{setDoneDate:a}=U();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new me(vt(Ee({},this),{status:e,doneDate:t})),s=[];if(n!==null){let a=le.getInstance().getNextStatusOrCreate(e),o=new me(vt(Ee(Ee({},this),n),{status:a,blockLink:""}));s.push(o)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=ur.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","listMarker","sectionStart","sectionIndex","precedingHeader","priority","blockLink","scheduledDateIsInferred"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(It(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=U(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+oa(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}};var Mi=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var Kr=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new Xs,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>N(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let{useFilenameAsScheduledDate:e}=U(),t=this.vault.on("create",s=>{s instanceof Pn.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(s)})});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof Pn.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()})});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof Pn.TFile&&this.tasksMutex.runExclusive(()=>{let o=new Mi(()=>it.fromPath(s.path));this.tasks=this.tasks.map(u=>u.path===a?e?it.updateTaskPath(u,s.path,o.value):new me(vt(Ee({},u),{path:s.path})):u),this.notifySubscribers()})});this.vaultEventReferences.push(i)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>N(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return N(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=this.getTasksFromFileContent(a,i,t,e)}me.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=a.length,u=new Mi(()=>it.fromPath(i.path)),l=null,c=0;for(let d of t)if(d.task!==void 0){let f=d.position.start.line;if(f>=o)return console.log(`${i.path} Obsidian gave us a line number ${f} past the end of the file. ${o}.`),s;if((l===null||l.position.end.line<f)&&(l=Kr.getSection(f,n.sections),c=0),l===null)continue;let h=a[f];if(h===void 0){console.log(`${i.path}: line ${f} - ignoring 'undefined' line.`);continue}let y;try{y=me.fromLine({line:h,path:i.path,sectionStart:l.position.start.line,sectionIndex:c,precedingHeader:Kr.getPrecedingHeader(f,n.headings),fallbackDate:u.value})}catch(m){this.reportTaskParsingErrorToUser(m,i,d,h);continue}y!==null&&(c++,s.push(y))}return s}reportTaskParsingErrorToUser(e,t,n,i){let s=`There was an error reading one of the tasks in this vault.
The following task has been ignored, to prevent Tasks queries getting stuck with 'Loading Tasks ...'
Error: ${e}
File: ${t.path}
Line number: ${n.position.start.line}
Task line: ${i}

Please create a bug report for this message at
https://github.com/obsidian-tasks-group/obsidian-tasks/issues/new/choose
to help us find and fix the underlying issue.

Include:
- either a screenshot of the error popup, or copy the text from the console, if on a desktop machine.
- the output from running the Obsidian command 'Show debug info'

The error popup will only be shown when Tasks is starting up, but if the error persists,
it will be shown in the console every time this file is edited during the Obsidian
session.
`;console.error(s),e instanceof Error&&console.error(e.stack),this.state==="Initializing"&&new Pn.Notice(s,1e4)}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var Gd=require("obsidian");var F_=require("obsidian");function Xr(){}function zo(r){return r()}function Gp(){return Object.create(null)}function Zr(r){r.forEach(zo)}function zp(r){return typeof r=="function"}function Kp(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Vp(r){return Object.keys(r).length===0}var Xp=!1;function ub(){Xp=!0}function lb(){Xp=!1}function _(r,e){r.appendChild(e)}function xn(r,e,t){r.insertBefore(e,t||null)}function Qr(r){r.parentNode.removeChild(r)}function Ko(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function L(r){return document.createElement(r)}function cb(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ht(r){return document.createTextNode(r)}function J(){return ht(" ")}function Dt(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Zp(r){return function(e){return e.preventDefault(),r.call(this,e)}}function R(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function db(r){return Array.from(r.childNodes)}function Vo(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function Wt(r,e){r.value=e==null?"":e}function Xo(r,e){for(let t=0;t<r.options.length;t+=1){let n=r.options[t];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function Qp(r){let e=r.querySelector(":checked")||r.options[0];return e&&e.__value}function Zo(r,e,t){r.classList[t?"add":"remove"](e)}var Vr=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=cb(t.nodeName):this.e=L(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)xn(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Qr)}};var Pi;function Ai(r){Pi=r}function fb(){if(!Pi)throw new Error("Function called outside component initialization");return Pi}function Qo(r){fb().$$.on_mount.push(r)}var ki=[];var ca=[],la=[],Hp=[],pb=Promise.resolve(),Ho=!1;function hb(){Ho||(Ho=!0,pb.then(Jp))}function xi(r){la.push(r)}var Go=new Set,ua=0;function Jp(){let r=Pi;do{for(;ua<ki.length;){let e=ki[ua];ua++,Ai(e),mb(e.$$)}for(Ai(null),ki.length=0,ua=0;ca.length;)ca.pop()();for(let e=0;e<la.length;e+=1){let t=la[e];Go.has(t)||(Go.add(t),t())}la.length=0}while(ki.length);for(;Hp.length;)Hp.pop()();Ho=!1,Go.clear(),Ai(r)}function mb(r){if(r.fragment!==null){r.update(),Zr(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(xi)}}var yb=new Set;function gb(r,e){r&&r.i&&(yb.delete(r),r.i(e))}var JC=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function _b(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||xi(()=>{let u=s.map(zo).filter(zp);a?a.push(...u):Zr(u),r.$$.on_mount=[]}),o.forEach(xi)}function eh(r,e){let t=r.$$;t.fragment!==null&&(Zr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Tb(r,e){r.$$.dirty[0]===-1&&(ki.push(r),hb(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function th(r,e,t,n,i,s,a,o=[-1]){let u=Pi;Ai(r);let l=r.$$={fragment:null,ctx:null,props:s,update:Xr,not_equal:i,bound:Gp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Gp(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...h)=>{let y=h.length?h[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),c&&Tb(r,d)),f}):[],l.update(),c=!0,Zr(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){ub();let d=db(e.target);l.fragment&&l.fragment.l(d),d.forEach(Qr)}else l.fragment&&l.fragment.c();e.intro&&gb(r.$$.fragment),_b(r,e.target,e.anchor,e.customElement),lb(),Jp()}Ai(u)}var bb;typeof HTMLElement=="function"&&(bb=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(zo).filter(zp);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Zr(this.$$.on_disconnect)}$destroy(){eh(this,1),this.$destroy=Xr}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!Vp(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var da=class{$destroy(){eh(this,1),this.$destroy=Xr}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Vp(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Cs=Vs(Ae());var Lk={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function Vn(r){for(let[e,t]of Object.entries(Lk))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function P_(r,e,t){let n=r.slice();return n[30]=e[t],n}function x_(r,e,t){let n=r.slice();return n[33]=e[t].value,n[34]=e[t].label,n[35]=e[t].symbol,n}function qk(r){let e,t=r[35]+"",n;return{c(){e=L("span"),n=ht(t)},m(i,s){xn(i,e,s),_(e,n)},p:Xr,d(i){i&&Qr(e)}}}function C_(r){let e,t,n,i,s,a,o,u,l=r[34]+"",c,d,f=r[35]&&r[35].charCodeAt(0)>=256,h,y,m,g,O=f&&qk(r);return{c(){e=L("span"),t=L("input"),a=J(),o=L("label"),u=L("span"),c=ht(l),d=J(),O&&O.c(),y=J(),R(t,"type","radio"),R(t,"id",n="priority-"+r[33]),t.__value=i=r[33],t.value=t.__value,R(t,"accesskey",s=r[9](r[34].charAt(0).toLowerCase())),r[21][0].push(t),R(u,"class","accesskey-first"),R(o,"for",h="priority-"+r[33])},m(D,A){xn(D,e,A),_(e,t),t.checked=t.__value===r[1].priority,_(e,a),_(e,o),_(o,u),_(u,c),_(o,d),O&&O.m(o,null),_(e,y),m||(g=Dt(t,"change",r[20]),m=!0)},p(D,A){A[0]&512&&s!==(s=D[9](D[34].charAt(0).toLowerCase()))&&R(t,"accesskey",s),A[0]&3&&(t.checked=t.__value===D[1].priority),f&&O.p(D,A)},d(D){D&&Qr(e),r[21][0].splice(r[21][0].indexOf(t),1),O&&O.d(),m=!1,g()}}}function N_(r){let e,t=r[30].name+"",n,i,s=r[30].symbol+"",a,o,u;return{c(){e=L("option"),n=ht(t),i=ht(" ["),a=ht(s),o=ht("]"),e.__value=u=r[30],e.value=e.__value},m(l,c){xn(l,e,c),_(e,n),_(e,i),_(e,a),_(e,o)},p(l,c){c[0]&1&&t!==(t=l[30].name+"")&&Vo(n,t),c[0]&1&&s!==(s=l[30].symbol+"")&&Vo(a,s),c[0]&1&&u!==(u=l[30])&&(e.__value=u,e.value=e.__value)},d(l){l&&Qr(e)}}}function Wk(r){let e,t,n,i,s,a,o,u,l,c,d,f,h,y,m,g,O,D,A,X,ye,_e,se,H,bt,lt,P,E,b,x,v,q,w,F,B,W,de,fe,Pe,Ct,Je,Xe,Se,ct,bn,sr,hf,Nt,Ys,mf,pi,yf,gf,$s,_f,hi,js,Tf,Vt,Bs,bf,vn,Gs,vf,Xt,Ef,En,mi,Hs,wf,Mr,zs,Of,yi,xo,Df,Ks,Rf,wn,gi,Sf,_i,Co,Mf,On=r[10],et=[];for(let C=0;C<On.length;C+=1)et[C]=C_(x_(r,On,C));let Dn=r[0],tt=[];for(let C=0;C<Dn.length;C+=1)tt[C]=N_(P_(r,Dn,C));return{c(){e=L("div"),t=L("form"),n=L("div"),i=L("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=J(),a=L("input"),u=J(),l=L("div"),c=L("label"),d=ht("Priority"),h=J();for(let C=0;C<et.length;C+=1)et[C].c();y=J(),m=L("div"),g=L("label"),g.textContent="Recurs",O=J(),D=L("input"),X=J(),ye=L("code"),_e=ht(Ft),se=J(),H=new Vr(!1),bt=J(),lt=L("label"),lt.textContent="Due",P=J(),E=L("input"),x=J(),v=L("code"),q=ht(qt),w=J(),F=new Vr(!1),B=J(),W=L("label"),W.textContent="Scheduled",de=J(),fe=L("input"),Ct=J(),Je=L("code"),Xe=ht(Lt),Se=J(),ct=new Vr(!1),bn=J(),sr=L("label"),sr.innerHTML='St<span class="accesskey">a</span>rt',hf=J(),Nt=L("input"),mf=J(),pi=L("code"),yf=ht(Ut),gf=J(),$s=new Vr(!1),_f=J(),hi=L("div"),js=L("label"),js.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,Tf=J(),Vt=L("input"),bf=J(),vn=L("div"),Gs=L("label"),Gs.textContent="Status",vf=J(),Xt=L("select");for(let C=0;C<tt.length;C+=1)tt[C].c();Ef=J(),En=L("div"),mi=L("div"),Hs=L("label"),Hs.textContent="Completed:",wf=J(),Mr=L("input"),Of=J(),yi=L("div"),xo=L("span"),xo.textContent="Done on:",Df=J(),Ks=L("code"),Rf=J(),wn=L("div"),gi=L("button"),gi.textContent="Apply",Sf=J(),_i=L("button"),_i.textContent="Cancel",R(i,"for","description"),R(a,"id","description"),R(a,"type","text"),R(a,"class","tasks-modal-description"),R(a,"placeholder","Take out the trash"),R(a,"accesskey",o=r[9]("t")),R(n,"class","tasks-modal-section"),R(c,"for",f="priority-"+r[1].priority),R(l,"class","tasks-modal-section tasks-modal-priorities"),R(g,"for","recurrence"),R(g,"class","accesskey-first"),R(D,"id","recurrence"),R(D,"type","text"),R(D,"placeholder","Try 'every 2 weeks on Thursday'."),R(D,"accesskey",A=r[9]("r")),H.a=null,R(lt,"for","due"),R(lt,"class","accesskey-first"),R(E,"id","due"),R(E,"type","text"),R(E,"placeholder",$d),R(E,"accesskey",b=r[9]("d")),F.a=null,R(W,"for","scheduled"),R(W,"class","accesskey-first"),R(fe,"id","scheduled"),R(fe,"type","text"),R(fe,"placeholder",$d),R(fe,"accesskey",Pe=r[9]("s")),ct.a=null,R(sr,"for","start"),R(Nt,"id","start"),R(Nt,"type","text"),R(Nt,"placeholder",$d),R(Nt,"accesskey",Ys=r[9]("a")),$s.a=null,R(js,"for","forwardOnly"),R(Vt,"id","forwardOnly"),R(Vt,"type","checkbox"),R(Vt,"class","task-list-item-checkbox tasks-modal-checkbox"),R(Vt,"accesskey",Bs=r[9]("f")),R(m,"class","tasks-modal-section tasks-modal-dates"),R(Gs,"for","status"),R(Xt,"id","status-type"),R(Xt,"class","dropdown"),r[1].status===void 0&&xi(()=>r[27].call(Xt)),R(vn,"class","tasks-modal-section"),R(Hs,"for","status"),R(Mr,"id","status"),R(Mr,"type","checkbox"),R(Mr,"class","task-list-item-checkbox tasks-modal-checkbox"),Mr.checked=zs=r[1].status.isCompleted(),Mr.disabled=!0,R(En,"class","tasks-modal-section tasks-modal-status"),R(gi,"type","submit"),R(gi,"class","mod-cta"),R(_i,"type","button"),R(wn,"class","tasks-modal-section tasks-modal-buttons"),Zo(t,"with-accesskeys",r[2]),R(e,"class","tasks-modal")},m(C,ue){xn(C,e,ue),_(e,t),_(t,n),_(n,i),_(n,s),_(n,a),Wt(a,r[1].description),r[19](a),_(t,u),_(t,l),_(l,c),_(c,d),_(l,h);for(let Q=0;Q<et.length;Q+=1)et[Q].m(l,null);_(t,y),_(t,m),_(m,g),_(m,O),_(m,D),Wt(D,r[1].recurrenceRule),_(m,X),_(m,ye),_(ye,_e),_(ye,se),H.m(r[7],ye),_(m,bt),_(m,lt),_(m,P),_(m,E),Wt(E,r[1].dueDate),_(m,x),_(m,v),_(v,q),_(v,w),F.m(r[6],v),_(m,B),_(m,W),_(m,de),_(m,fe),Wt(fe,r[1].scheduledDate),_(m,Ct),_(m,Je),_(Je,Xe),_(Je,Se),ct.m(r[5],Je),_(m,bn),_(m,sr),_(m,hf),_(m,Nt),Wt(Nt,r[1].startDate),_(m,mf),_(m,pi),_(pi,yf),_(pi,gf),$s.m(r[4],pi),_(m,_f),_(m,hi),_(hi,js),_(hi,Tf),_(hi,Vt),Vt.checked=r[1].forwardOnly,_(t,bf),_(t,vn),_(vn,Gs),_(vn,vf),_(vn,Xt);for(let Q=0;Q<tt.length;Q+=1)tt[Q].m(Xt,null);Xo(Xt,r[1].status),_(t,Ef),_(t,En),_(En,mi),_(mi,Hs),_(mi,wf),_(mi,Mr),_(En,Of),_(En,yi),_(yi,xo),_(yi,Df),_(yi,Ks),Ks.innerHTML=r[8],_(t,Rf),_(t,wn),_(wn,gi),_(wn,Sf),_(wn,_i),Co||(Mf=[Dt(a,"input",r[18]),Dt(l,"keyup",r[11]),Dt(D,"input",r[22]),Dt(E,"input",r[23]),Dt(fe,"input",r[24]),Dt(Nt,"input",r[25]),Dt(Vt,"change",r[26]),Dt(Xt,"change",r[27]),Dt(_i,"click",r[12]),Dt(t,"submit",Zp(r[13]))],Co=!0)},p(C,ue){if(ue[0]&512&&o!==(o=C[9]("t"))&&R(a,"accesskey",o),ue[0]&3&&a.value!==C[1].description&&Wt(a,C[1].description),ue[0]&3&&f!==(f="priority-"+C[1].priority)&&R(c,"for",f),ue[0]&1538){On=C[10];let Q;for(Q=0;Q<On.length;Q+=1){let Ti=x_(C,On,Q);et[Q]?et[Q].p(Ti,ue):(et[Q]=C_(Ti),et[Q].c(),et[Q].m(l,null))}for(;Q<et.length;Q+=1)et[Q].d(1);et.length=On.length}if(ue[0]&512&&A!==(A=C[9]("r"))&&R(D,"accesskey",A),ue[0]&3&&D.value!==C[1].recurrenceRule&&Wt(D,C[1].recurrenceRule),ue[0]&128&&H.p(C[7]),ue[0]&512&&b!==(b=C[9]("d"))&&R(E,"accesskey",b),ue[0]&3&&E.value!==C[1].dueDate&&Wt(E,C[1].dueDate),ue[0]&64&&F.p(C[6]),ue[0]&512&&Pe!==(Pe=C[9]("s"))&&R(fe,"accesskey",Pe),ue[0]&3&&fe.value!==C[1].scheduledDate&&Wt(fe,C[1].scheduledDate),ue[0]&32&&ct.p(C[5]),ue[0]&512&&Ys!==(Ys=C[9]("a"))&&R(Nt,"accesskey",Ys),ue[0]&3&&Nt.value!==C[1].startDate&&Wt(Nt,C[1].startDate),ue[0]&16&&$s.p(C[4]),ue[0]&512&&Bs!==(Bs=C[9]("f"))&&R(Vt,"accesskey",Bs),ue[0]&3&&(Vt.checked=C[1].forwardOnly),ue[0]&1){Dn=C[0];let Q;for(Q=0;Q<Dn.length;Q+=1){let Ti=P_(C,Dn,Q);tt[Q]?tt[Q].p(Ti,ue):(tt[Q]=N_(Ti),tt[Q].c(),tt[Q].m(Xt,null))}for(;Q<tt.length;Q+=1)tt[Q].d(1);tt.length=Dn.length}ue[0]&3&&Xo(Xt,C[1].status),ue[0]&3&&zs!==(zs=C[1].status.isCompleted())&&(Mr.checked=zs),ue[0]&256&&(Ks.innerHTML=C[8]),ue[0]&4&&Zo(t,"with-accesskeys",C[2])},i:Xr,o:Xr,d(C){C&&Qr(e),r[19](null),Ko(et,C),Ko(tt,C),Co=!1,Zr(Mf)}}}var $d="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function Yk(r,e,t){let n;var i,s;let{task:a}=e,{onSubmit:o}=e,{statusOptions:u}=e,l,c={description:"",status:Y.TODO,priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},d="",f="",h="",y="",m="",g=!1,O=!0,D=[{value:"low",label:"Low",symbol:ke.Low},{value:"none",label:"Normal",symbol:ke.None},{value:"medium",label:"Medium",symbol:ke.Medium},{value:"high",label:"High",symbol:ke.High}];function A(w,F,B=void 0){if(!F)return`<i>no ${w} date</i>`;let W=Cs.parseDate(F,B,{forwardDate:B!=null});return W!==null?window.moment(W).format("YYYY-MM-DD"):`<i>invalid ${w} date</i>`}Qo(()=>{let{globalFilter:w,provideAccessKeys:F}=U();t(2,O=F);let B=a.getDescriptionWithoutGlobalFilter();(B!=a.description||B.indexOf(w)==-1)&&(g=!0);let W="none";a.priority==="4"?W="low":a.priority==="2"?W="medium":a.priority==="1"&&(W="high"),t(1,c={description:B,status:a.status,priority:W,recurrenceRule:a.recurrence?a.recurrence.toText():"",startDate:a.startDate?a.startDate.format("YYYY-MM-DD"):"",scheduledDate:a.scheduledDate?a.scheduledDate.format("YYYY-MM-DD"):"",dueDate:a.dueDate?a.dueDate.format("YYYY-MM-DD"):"",doneDate:a.doneDate?a.doneDate.format("YYYY-MM-DD"):"",forwardOnly:!0}),setTimeout(()=>{l.focus()},10)});let X=w=>{if(w.key&&!w.altKey&&!w.ctrlKey){let F=D.find(B=>B.label.charAt(0).toLowerCase()==w.key);F&&t(1,c.priority=F.value,c)}},ye=()=>{o([])},_e=()=>{let{globalFilter:w}=U(),F=c.description.trim();g&&(F=w+" "+F);let B=null,W=Cs.parseDate(c.startDate,new Date,{forwardDate:c.forwardOnly});W!==null&&(B=window.moment(W));let de=null,fe=Cs.parseDate(c.scheduledDate,new Date,{forwardDate:c.forwardOnly});fe!==null&&(de=window.moment(fe));let Pe=null,Ct=Cs.parseDate(c.dueDate,new Date,{forwardDate:c.forwardOnly});Ct!==null&&(Pe=window.moment(Ct));let Je=null;c.recurrenceRule&&(Je=xe.fromText({recurrenceRuleText:c.recurrenceRule,startDate:B,scheduledDate:de,dueDate:Pe}));let Xe;switch(c.priority){case"low":Xe="4";break;case"medium":Xe="2";break;case"high":Xe="1";break;default:Xe="3"}let Se=new me(Object.assign(Object.assign({},a),{description:F,status:c.status,priority:Xe,recurrence:Je,startDate:B,scheduledDate:de,dueDate:Pe,doneDate:window.moment(c.doneDate,"YYYY-MM-DD").isValid()?window.moment(c.doneDate,"YYYY-MM-DD"):null}));o([Se])},se=[[]];function H(){c.description=this.value,t(1,c),t(0,u)}function bt(w){ca[w?"unshift":"push"](()=>{l=w,t(3,l)})}function lt(){c.priority=this.__value,t(1,c),t(0,u)}function P(){c.recurrenceRule=this.value,t(1,c),t(0,u)}function E(){c.dueDate=this.value,t(1,c),t(0,u)}function b(){c.scheduledDate=this.value,t(1,c),t(0,u)}function x(){c.startDate=this.value,t(1,c),t(0,u)}function v(){c.forwardOnly=this.checked,t(1,c),t(0,u)}function q(){c.status=Qp(this),t(1,c),t(0,u)}return r.$$set=w=>{"task"in w&&t(14,a=w.task),"onSubmit"in w&&t(15,o=w.onSubmit),"statusOptions"in w&&t(0,u=w.statusOptions)},r.$$.update=()=>{if(r.$$.dirty[0]&4){e:t(9,n=w=>O?w:null)}if(r.$$.dirty[0]&2){e:t(1,c.startDate=Vn(c.startDate),c),t(4,d=A("start",c.startDate,c.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&2){e:t(1,c.scheduledDate=Vn(c.scheduledDate),c),t(5,f=A("scheduled",c.scheduledDate,c.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&2){e:t(1,c.dueDate=Vn(c.dueDate),c),t(6,h=A("due",c.dueDate,c.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&196610){e:c.recurrenceRule?t(7,y=t(17,s=t(16,i=xe.fromText({recurrenceRuleText:c.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText())!==null&&s!==void 0?s:"<i>invalid recurrence rule</i>"):t(7,y="<i>not recurring</>")}if(r.$$.dirty[0]&2){e:t(8,m=A("done",c.doneDate))}},[u,c,O,l,d,f,h,y,m,n,D,X,ye,_e,a,o,i,s,H,bt,lt,se,P,E,b,x,v,q]}var jd=class extends da{constructor(e){super(),th(this,e,Yk,Wk,Kp,{task:14,onSubmit:15,statusOptions:0},null,[-1,-1])}},I_=jd;var Xn=class extends F_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this,n=this.getKnownStatusesAndCurrentTaskStatusIfNotKnown();new I_({target:t,props:{task:this.task,statusOptions:n,onSubmit:this.onSubmit}})}getKnownStatusesAndCurrentTaskStatusIfNotKnown(){let t=le.getInstance().registeredStatuses;return le.getInstance().bySymbol(this.task.status.symbol)===Y.EMPTY&&t.push(this.task.status),t}onClose(){let{contentEl:t}=this;t.empty()}};var U_=({line:r,path:e})=>{var f,h;let t=it.fromPath(e),n=me.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:t});if(n!==null)return n;let i=r.match(M.nonTaskRegex);if(i===null)return console.error("Tasks: Cannot create task on line:",r),new me({status:Y.TODO,description:"",path:e,indentation:"",listMarker:"-",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let s=i[1],a=(f=i[2])!=null?f:"-",o=(h=i[4])!=null?h:" ",u=le.getInstance().bySymbolOrCreate(o),l=i[5],c=r.match(M.blockLinkRegex),d=c!==null?c[0]:"";return d!==""&&(l=l.replace(M.blockLinkRegex,"")),new me({status:u,description:l,path:e,indentation:s,listMarker:a,blockLink:d,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1})};var L_=(r,e,t,n)=>{var d;if(r)return t instanceof Gd.MarkdownView;if(!(t instanceof Gd.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=U_({line:o,path:i}),l=f=>{let h=it.removeInferredStatusIfNeeded(u,f).map(y=>y.toFileLineString()).join(`
`);e.setLine(a,h)};new Xn({app:n,task:u,onSubmit:l}).open()};var Hd=require("obsidian");var q_=(r,e,t)=>{var u;if(r)return t instanceof Hd.MarkdownView;if(!(t instanceof Hd.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=$k(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:Bk(i.ch,a,o)})},$k=(r,e)=>{let t=r,n=me.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(n!==null)t=jk(n);else{let i=r.match(M.taskRegex);if(i!==null){let s=i[3],o=le.getInstance().bySymbol(s).nextStatusSymbol;t=r.replace(M.taskRegex,`$1- [${o}] $4`)}else M.listItemRegex.test(r)?t=r.replace(M.listItemRegex,"$1$2 [ ]"):t=r.replace(M.indentationRegex,"$1- ")}return t},jk=r=>r.toggle().map(t=>t.toFileLineString()).join(`
`),Bk=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(M.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var no=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>L_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:q_})}};var io=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var so=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return N(this,null,function*(){var c;let{globalFilter:n}=U(),i=e.findAll(".task-list-item").filter(d=>{var y;let f=(y=d.textContent)==null?void 0:y.split(`
`);if(f===void 0)return!1;let h=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){h=f[m];break}return h===null?!1:h.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let h=me.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null,fallbackDate:null});h!==null&&(l.push(h),u++)}for(let d=0;d<i.length;d++){let f=l[d],h=i[d];if(f===void 0||h===void 0)continue;let y=(c=h.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(y,10),g=yield f.toLi({parentUlElement:e,listIndex:m}),O=h.childNodes;for(let X=0;X<O.length;X=X+1){let ye=O[X];ye.nodeName.toLowerCase()==="div"?g.prepend(ye):ye.nodeName.toLowerCase()==="ul"&&g.append(ye)}let D=h.querySelectorAll("[data-footnote-id]"),A=g.querySelectorAll("[data-footnote-id]");if(D.length===A.length)for(let X=0;X<D.length;X++)A[X].replaceWith(D[X]);h.replaceWith(g)}})}};var W_=require("@codemirror/view"),Y_=require("obsidian");var $_=()=>W_.ViewPlugin.fromClass(zd),zd=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new Y_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=me.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var ko=require("obsidian");var Tr=class{constructor(e,t,n){this.property=e,this.comparator=Tr.maybeReverse(n,t)}static maybeReverse(e,t){return e?Tr.makeReversedComparator(t):t}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}};var Zn=class{constructor(e,t){this.property=e,this.grouper=t}};var oe=class{canCreateFilterForLine(e){return oe.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}fieldNameSingular(){return this.fieldName()}fieldNameSingularEscaped(){return oa(this.fieldNameSingular())}supportsSorting(){return!1}parseSortLine(e){return!this.supportsSorting()||!this.canCreateSorterForLine(e)?null:this.createSorterFromLine(e)}canCreateSorterForLine(e){return this.supportsSorting()?oe.lineMatchesFilter(this.sorterRegExp(),e):!1}createSorterFromLine(e){if(!this.supportsSorting())return null;let t=oe.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createSorter(n)}sorterRegExp(){if(!this.supportsSorting())throw Error(`sorterRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)?`)}comparator(){throw Error(`comparator() unimplemented for ${this.fieldNameSingular()}`)}createSorter(e){return new Tr(this.fieldNameSingular(),this.comparator(),e)}createNormalSorter(){return this.createSorter(!1)}createReverseSorter(){return this.createSorter(!0)}supportsGrouping(){return!1}grouper(){throw Error(`grouper() unimplemented for ${this.fieldNameSingular()}`)}createGrouper(){return new Zn(this.fieldNameSingular(),this.grouper())}};var ge=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new ge("None of",e,"NOT")}static booleanXor(e){return new ge("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e+`${this.symbol}`;this.children.length>1&&(t+=` (${this.description})`),t+=":";let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new ge(e,t,n)}};var Ke=class{constructor(e,t,n){this.instruction=e,this.explanation=n,this.filterFunction=t}explainFilterIndented(e){let t=this.explanation;return t.asString()===this.instruction?`${e}${this.instruction}
`:`${e}${this.instruction} =>
${t.asString("  ")}
`}},ce=class{constructor(e){this.instruction=e}get filter(){return this._filter}set filter(e){this._filter=e}get filterFunction(){if(this._filter)return this._filter.filterFunction}static fromFilter(e){let t=new ce(e.instruction);return t.filter=e,t}static fromError(e,t){let n=new ce(e);return n.error=t,n}};var ao=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new ce(e);return e===this._instruction?(t.filter=new Ke(e,this._filter,new ge(e)),t):(t.error=`do not understand filter: ${e}`,t)}};var Wr=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new ao(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new ce(e);return t.error=`do not understand filter: ${e}`,t}};var Yr=class extends oe{constructor(){super(...arguments);this._filters=new Wr}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var br=class extends Yr{constructor(){super(),this._filters.add("done",e=>e.status.type==="DONE"||e.status.type==="CANCELLED"||e.status.type==="NON_TASK"),this._filters.add("not done",e=>e.status.type==="TODO"||e.status.type==="IN_PROGRESS")}fieldName(){return"status"}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=br.oldStatusName(e),i=br.oldStatusName(t);return n<i?1:n>i?-1:0}}static oldStatusName(e){return e.status.symbol===" "?"Todo":"Done"}};var j_=Vs(Ae()),vr=class{static parseDate(e,t=!1){return window.moment(j_.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var ut=class extends oe{constructor(){super();this.filterInstructions=new Wr,this.filterInstructions.add(`has ${this.fieldName()} date`,t=>this.date(t)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,t=>this.date(t)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,t=>{let n=this.date(t);return n!==null&&!n.isValid()})}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new ce(t),s=oe.getMatch(this.filterRegExp(),t),a;if(s!==null){let o=vr.parseDate(s[2]);if(!o.isValid())i.error="do not understand "+this.fieldName()+" date";else{let u;s[1]==="before"?(a=c=>{let d=this.date(c);return d?d.isBefore(o):this.filterResultIfFieldMissing()},u=" "+s[1]):s[1]==="after"?(a=c=>{let d=this.date(c);return d?d.isAfter(o):this.filterResultIfFieldMissing()},u=" "+s[1]):(a=c=>{let d=this.date(c);return d?d.isSame(o):this.filterResultIfFieldMissing()},u=" on");let l=ut.getExplanationString(this.fieldName(),u,this.filterResultIfFieldMissing(),o);i.filter=new Ke(t,a,new ge(l))}}else i.error="do not understand query filter ("+this.fieldName()+" date)";return i}static getExplanationString(t,n,i,s){let a=s.format("YYYY-MM-DD (dddd Do MMMM YYYY)"),o=`${t} date is${n} ${a}`;return i&&(o+=` OR no ${t} date`),o}supportsSorting(){return!0}comparator(){return(t,n)=>It(this.date(t),this.date(n))}};var Kd=class extends ut{filterRegExp(){return Kd.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},dn=Kd;dn.dueRegexp=/^due (before|after|on)? ?(.*)/;var Vd=class extends oe{createFilterOrErrorMessage(e){let t=new ce(e),n=oe.getMatch(this.filterRegExp(),e);if(n!==null){let i=n[5],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a=e,o;switch(n[3]){case"above":o=u=>u.priority.localeCompare(s)<0;break;case"below":o=u=>u.priority.localeCompare(s)>0;break;case"not":o=u=>u.priority!==s;break;default:o=u=>u.priority===s,a=`${this.fieldName()} is ${i}`}t.filter=new Ke(e,o,new ge(a))}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegExp(){return Vd.priorityRegexp}supportsSorting(){return!0}comparator(){return(e,t)=>e.priority.localeCompare(t.priority)}},fn=Vd;fn.priorityRegexp=/^priority(\s+is)?(\s+(above|below|not))?(\s+(low|none|medium|high))$/;var Qn=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Jn=class extends Qn{constructor(t){super();this.stringToFind=t}matches(t){return Jn.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var ei=class extends Qn{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new ei(s)}else return null}matches(t){return t.match(this.regex)!==null}};var Ve=class extends oe{createFilterOrErrorMessage(e){let t=oe.getMatch(this.filterRegExp(),e);if(t===null)return ce.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new Jn(s);else if(i.includes("regex")&&(a=ei.validateAndConstruct(s),a===null))return ce.fromError(e,`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return ce.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null,u=new Ke(e,this.getFilter(a,o),new ge(e));return ce.fromFilter(u)}fieldPattern(){return this.fieldNameSingularEscaped()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}comparator(){return(e,t)=>this.value(e).localeCompare(this.value(t),void 0,{numeric:!0})}grouper(){return e=>[this.value(e)]}};var ti=class extends Ve{fieldName(){return"path"}value(e){return e.path}supportsSorting(){return!0}};var ri=class extends oe{canCreateFilterForLine(e){return!1}createFilterOrErrorMessage(e){return ce.fromError(e,"Filtering by urgency is not yet supported")}fieldName(){return"urgency"}filterRegExp(){throw Error(`filterRegExp() unimplemented for ${this.fieldName()}`)}supportsSorting(){return!0}comparator(){return(e,t)=>t.urgency-e.urgency}};var ni=class{static by(e,t){let n=[new ri().comparator(),new br().comparator(),new dn().comparator(),new fn().comparator(),new ti().comparator()],i=[];for(let s of e)i.push(s.comparator);return t.sort(ni.makeCompositeComparator([...i,...n]))}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}};var pn=class extends Ve{fieldName(){return"description"}value(e){let t=U().globalFilter;return e.description.replace(t,"").trim()}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=pn.cleanDescription(e.description),i=pn.cleanDescription(t.description);return n.localeCompare(i,void 0,{numeric:!0})}}static cleanDescription(e){let t=U().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)]]?/,i=e.match(n);if(i!==null){let s=i[1];e=s.substring(s.indexOf("|")+1)+e.replace(n,"")}return e=this.replaceFormatting(e,/^\*\*([^*]+)\*\*/),e=this.replaceFormatting(e,/^\*([^*]+)\*/),e=this.replaceFormatting(e,/^==([^=]+)==/),e=this.replaceFormatting(e,/^__([^_]+)__/),e=this.replaceFormatting(e,/^_([^_]+)_/),e}static replaceFormatting(e,t){let n=e.match(t);return n!==null&&(e=n[1]+e.replace(t,"")),e}};var Xd=class extends ut{filterRegExp(){return Xd.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},Ns=Xd;Ns.doneRegexp=/^done (before|after|on)? ?(.*)/;var oo=class extends Yr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var uo=class extends Ve{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}supportsSorting(){return!0}};var Zd=class extends ut{filterRegExp(){return Zd.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},Is=Zd;Is.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var Qd=class extends ut{filterRegExp(){return Qd.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},Fs=Qd;Fs.startRegexp=/^starts (before|after|on)? ?(.*)/;var ii=class extends oe{constructor(){super();this.filterInstructions=new Wr,this.filterInstructions.add(ii.instructionForFieldPresence,t=>this.dates(t).some(n=>n!==null)),this.filterInstructions.add(ii.instructionForFieldAbsence,t=>!this.dates(t).some(n=>n!==null))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new ce(t),s=oe.getMatch(this.filterRegExp(),t);if(s!==null){let a=vr.parseDate(s[2]);if(!a.isValid())i.error="do not understand happens date";else{let o,u;s[1]==="before"?(o=c=>this.dates(c).some(d=>d&&d.isBefore(a)),u=" "+s[1]):s[1]==="after"?(o=c=>this.dates(c).some(d=>d&&d.isAfter(a)),u=" "+s[1]):(o=c=>this.dates(c).some(d=>d&&d.isSame(a)),u=" on");let l=ut.getExplanationString("due, start or scheduled",u,!1,a);i.filter=new Ke(t,o,new ge(l))}}else i.error="do not understand query filter (happens date)";return i}earliestDate(t){return new ii().dates(t).sort(It)[0]}filterRegExp(){return ii.happensRegexp}dates(t){return Array.of(t.startDate,t.scheduledDate,t.dueDate)}fieldName(){return"happens"}supportsSorting(){return!0}comparator(){return(t,n)=>It(this.earliestDate(t),this.earliestDate(n))}},Er=ii;Er.happensRegexp=/^happens (before|after|on)? ?(.*)/,Er.instructionForFieldPresence="has happens date",Er.instructionForFieldAbsence="no happens date";var lo=class extends Yr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var co=class extends Ve{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}};var hn=class extends co{fieldNameSingular(){return"tag"}values(e){return e.tags}supportsSorting(){return!0}createSorterFromLine(e){let t=e.match(this.sorterRegExp());if(t===null)return null;let n=!!t[1],i=isNaN(+t[2])?1:+t[2],s=hn.makeCompareByTagComparator(i);return new Tr(this.fieldNameSingular(),s,n)}sorterRegExp(){return/^sort by tag( reverse)?[\s]*(\d+)?/}comparator(){return hn.makeCompareByTagComparator(1)}static makeCompareByTagComparator(e){return(t,n)=>{if(t.tags.length===0&&n.tags.length===0)return 0;if(t.tags.length===0)return 1;if(n.tags.length===0)return-1;let i=e-1;if(t.tags.length<e&&n.tags.length>=e)return 1;if(n.tags.length<e&&t.tags.length>=e)return-1;if(t.tags.length<e&&n.tags.length<e)return 0;let s=t.tags[i],a=n.tags[i];return s.localeCompare(a,void 0,{numeric:!0})}}};var rT=Vs(tT());var mo=class extends oe{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new ce(t);if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,rT.parse)(i);for(let u of s)if(u.name==="IDENTIFIER"&&u.value){let l=u.value.trim();if(!(l in this.subFields)){let c=yo(l);if(c===null)return n.error=`couldn't parse sub-expression '${l}'`,n;if(c.error)return n.error=`couldn't parse sub-expression '${l}': ${c.error}`,n;c.filter&&(this.subFields[l]=c.filter)}}else if(u.name==="OPERATOR"){if(u.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(u.value))return n.error=`unknown boolean operator '${u.value}'`,n}let a=u=>this.filterTaskWithParsedQuery(u,s),o=this.constructExplanation(s);return n.filter=new Ke(t,a,o),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER"){if(i.value==null)throw Error("null token value");let s=this.subFields[i.value.trim()];n.push(s.explanation)}else if(i.name==="OPERATOR")if(i.value==="NOT"){let s=n.pop();n.push(ge.booleanNot([s]))}else if(i.value==="OR"){let s=n.pop(),a=n.pop();n.push(ge.booleanOr([a,s]))}else if(i.value==="AND"){let s=n.pop(),a=n.pop();n.push(ge.booleanAnd([a,s]))}else if(i.value==="XOR"){let s=n.pop(),a=n.pop();n.push(ge.booleanXor([a,s]))}else throw Error("Unsupported operator: "+i.value);else throw Error("Unsupported token type: "+i);return n[0]}};var go=class extends Ve{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}supportsSorting(){return!0}};var _o=class extends Ve{constructor(){super()}fieldName(){return"status.name"}value(e){return e.status.name}supportsSorting(){return!0}supportsGrouping(){return!0}};var jr=class extends oe{canCreateFilterForLine(e){let t=new RegExp(`^(?:${this.fieldNameSingularEscaped()})`);return oe.lineMatchesFilter(t,e)}createFilterOrErrorMessage(e){let t=oe.getMatch(this.filterRegExp(),e);if(t===null)return this.helpMessage(e);let[n,i,s]=t,a=Ot[s.toUpperCase()];if(!a)return this.helpMessage(e);let o;switch(i){case"is":o=u=>u.status.type===a;break;case"is not":o=u=>u.status.type!==a;break;default:return this.helpMessage(e)}return ce.fromFilter(new Ke(e,o,new ge(e)))}filterRegExp(){return new RegExp(`^(?:${this.fieldNameSingularEscaped()}) (is|is not) ([^ ]+)$`)}helpMessage(e){let t=Object.values(Ot).filter(i=>i!=="EMPTY").join(" "),n=`Invalid ${this.fieldNameSingular()} instruction: '${e}'.
    Allowed options: 'is' and 'is not' (without quotes).
    Allowed values:  ${t}
                     Note: values are case-insensitive,
                           so 'in_progress' works too, for example.
    Example:         ${this.fieldNameSingular()} is not NON_TASK`;return ce.fromError(e,n)}fieldName(){return"status.type"}value(e){return e.status.type}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=jr.groupName(e),i=jr.groupName(t);return n.localeCompare(i,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return e=>[jr.groupName(e)]}static groupName(e){let t;switch(e.status.type){case"IN_PROGRESS":t="1";break;case"TODO":t="2";break;case"DONE":t="3";break;case"CANCELLED":t="4";break;case"NON_TASK":t="5";break;case"EMPTY":t="6";break}return t+" "+e.status.type}};var To=class extends Ve{fieldName(){return"recurrence"}value(e){return e.recurrence!==null?e.recurrence.toText():""}};var df=[()=>new _o,()=>new jr,()=>new br,()=>new lo,()=>new fn,()=>new Er,()=>new Fs,()=>new Is,()=>new dn,()=>new Ns,()=>new ti,()=>new pn,()=>new hn,()=>new uo,()=>new oo,()=>new mo,()=>new go,()=>new ri,()=>new To];function yo(r){for(let e of df){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}function nT(r){let e=/^sort by /;if(r.match(e)===null)return null;for(let t of df){let i=t().parseSortLine(r);if(i)return i}return null}function iT(r){let e=/^group by /;if(r.match(e)===null)return null;for(let t of df){let n=t(),i=n.fieldNameSingular();if(r===`group by ${i}`&&n.supportsGrouping())return n.createGrouper()}return null}var bo=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var vo=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new bo(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var Eo=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var wo=class extends Map{},Oo=class extends Eo{},Do=class{constructor(e,t){this.groups=new wo;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new Oo(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Sr.getGroupNamesForTask(s,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new Oo([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new wo([...this.groups.entries()].sort())}};var Ro=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var So=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new Do(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new vo(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new Ro(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var re=class{static fromGroupingProperty(e){return new Zn(e,re.grouperForProperty(e))}static by(e,t){return new So(e,t)}static getGroupNamesForTask(e,t){return e.grouper(t)}static grouperForProperty(e){return re.groupers[e]}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[re.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[re.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[re.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[re.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new Er().earliestDate(e);return[re.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(re.groupDateFormat)}static groupByPath(e){return[re.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[re.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:["[["+re.escapeMarkdownCharacters(t)+"]]"]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[re.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n="Unknown Location";if(e.filename!==null&&(n=re.escapeMarkdownCharacters(e.filename)),e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=re.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return e.status.symbol===" "?["Todo"]:["Done"]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Sr=re;Sr.groupDateFormat="YYYY-MM-DD dddd",Sr.groupers={backlink:re.groupByBacklink,done:re.groupByDoneDate,due:re.groupByDueDate,filename:re.groupByFileName,folder:re.groupByFolder,happens:re.groupByHappensDate,heading:re.groupByHeading,path:re.groupByPath,priority:re.groupByPriority,recurrence:re.groupByRecurrence,recurring:re.groupByRecurring,root:re.groupByRoot,scheduled:re.groupByScheduledDate,start:re.groupByStartDate,status:re.groupByStatus,tags:re.groupByTags};var ci=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new vi;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency)/;this.shortModeRegexp=/^short/;this.explainQueryRegexp=/^explain/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.explainQueryRegexp.test(t):this._layoutOptions.explainQuery=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.parseSortBy({line:t}):break;case this.parseGroupBy2({line:t}):break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}explainQuery(){return`Explanation of this Tasks code block query:

`+this.explainQueryWithoutIntroduction()}explainQueryWithoutIntroduction(){let e="",{globalFilter:t}=U();t.length!==0&&(e+=`Only tasks containing the global filter '${t}'.

`);let n=this.filters.length;if(n===0)e+="No filters supplied. All tasks will match the query.";else for(let i=0;i<n;i++)i>0&&(e+=`
`),e+=this.filters[i].explainFilterIndented("");return this._limit!==void 0&&(e+=`

At most ${this._limit} task`,this._limit!==1&&(e+="s"),e+=`.
`),e}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n.filterFunction)});let t=ni.by(this.sorting,e).slice(0,this.limit);return Sr.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=yo(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=nT(e);return t?(this._sorting.push(t),!0):!1}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push(Sr.fromGroupingProperty(t[1])):this._error="do not understand query grouping"}parseGroupBy2({line:e}){let t=iT(e);return t?(this._grouping.push(t),!0):!1}};var Mo=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return N(this,null,function*(){n.addChild(new ff({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},ff=class extends ko.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new ci({source:s}),this.queryType="tasks";break;default:this.query=new ci({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new ci({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return N(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`),this.query.layoutOptions.explainQuery&&this.createExplanation(s);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.createDiv().innerHTML=`<pre>Tasks query: ${this.query.error.replace(/\n/g,"<br>")}</pre>`:s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createExplanation(t){let n=this.query.explainQuery(),i=t.createEl("pre");i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTasksList(i){return N(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(h=>h.remove());let f=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideUrgency||this.addUrgency(c,u),this.query.layoutOptions.hideBacklinks||this.addBacklinks(c,u,f,l),this.query.layoutOptions.hideEditButton||this.addEditButton(c,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{ia({originalTask:n,newTasks:it.removeInferredStatusIfNeeded(n,u)})};new Xn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return N(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield ko.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var l;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");if(o.href=n.path,o.setAttribute("data-href",n.path),o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode"),n.precedingHeader!==null){let c=n.precedingHeader.replace(/#/g,"");o.href=o.href+"#"+c,o.setAttribute("data-href",o.getAttribute("data-href")+"#"+c)}let u;i?u=" \u{1F517}":u=(l=n.getLinkText({isFilenameUnique:s}))!=null?l:"",o.setText(u),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var he=require("obsidian");function sT(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],['"',"Quote","x","TODO"],["0","Speech bubble 0","0","NON_TASK"],["1","Speech bubble 1","1","NON_TASK"],["2","Speech bubble 2","2","NON_TASK"],["3","Speech bubble 3","3","NON_TASK"],["4","Speech bubble 4","4","NON_TASK"],["5","Speech bubble 5","5","NON_TASK"],["6","Speech bubble 6","6","NON_TASK"],["7","Speech bubble 7","7","NON_TASK"],["8","Speech bubble 8","8","NON_TASK"],["9","Speech bubble 9","9","NON_TASK"]]}function aT(){return[[" ","incomplete","x","TODO"],["x","complete / done"," ","DONE"],["-","cancelled"," ","CANCELLED"],[">","deferred","x","TODO"],["/","in progress, or half-done","x","IN_PROGRESS"],["!","Important","x","TODO"],["?","question","x","TODO"],["R","review","x","TODO"],["+","Inbox / task that should be processed later","x","TODO"],["b","bookmark","x","TODO"],["B","brainstorm","x","TODO"],["D","deferred or scheduled","x","TODO"],["I","Info","x","TODO"],["i","idea","x","TODO"],["N","note","x","TODO"],["Q","quote","x","TODO"],["W","win / success / reward","x","TODO"],["P","pro","x","TODO"],["C","con","x","TODO"]]}function oT(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],[">","Deferred","x","TODO"],["!","Important","x","TODO"],["?","Question","x","TODO"],["r","Review","x","TODO"]]}function uT(){return[[" ","Unchecked","x","TODO"],["x","Regular"," ","DONE"],["X","Checked"," ","DONE"],["-","Dropped"," ","CANCELLED"],[">","Forward","x","TODO"],["D","Date","x","TODO"],["?","Question","x","TODO"],["/","Half Done","x","IN_PROGRESS"],["+","Add","x","TODO"],["R","Research","x","TODO"],["!","Important","x","TODO"],["i","Idea","x","TODO"],["B","Brainstorm","x","TODO"],["P","Pro","x","TODO"],["C","Con","x","TODO"],["Q","Quote","x","TODO"],["N","Note","x","TODO"],["b","Bookmark","x","TODO"],["I","Information","x","TODO"],["p","Paraphrase","x","TODO"],["L","Location","x","TODO"],["E","Example","x","TODO"],["A","Answer","x","TODO"],["r","Reward","x","TODO"],["c","Choice","x","TODO"],["d","Doing","x","IN_PROGRESS"],["T","Time","x","TODO"],["@","Character / Person","x","TODO"],["t","Talk","x","TODO"],["O","Outline / Plot","x","TODO"],["~","Conflict","x","TODO"],["W","World","x","TODO"],["f","Clue / Find","x","TODO"],["F","Foreshadow","x","TODO"],["H","Favorite / Health","x","TODO"],["&","Symbolism","x","TODO"],["s","Secret","x","TODO"]]}function lT(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}function cT(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}var dT=[{text:"Core Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:"<p>These are the core statuses that Tasks supports natively, with no need for custom CSS styling or theming.</p><p>You can add edit and add your own custom statuses in the section below.</p>"},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertTaskCoreStatusSettings",featureFlag:"",notice:null}]},{text:"Custom Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:`<p>You should first <b>select and install a CSS Snippet or Theme</b> to style custom checkboxes.</p><p>Then, use the buttons below to set up your custom statuses, to match your chosen CSS checkboxes.</p><p><b>Note</b> Any statuses with the same symbol as any earlier statuses will be ignored. You can confirm the actually loaded statuses by running the 'Create or edit task' command and looking at the Status drop-down.</p><p></p><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/statuses/">documentation</a> to get started!</p>`},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertCustomTaskStatusSettings",featureFlag:"",notice:null}]}];var Kt=require("obsidian");var _n=class{validate(e){let t=[];return t.push(...this.validateSymbol(e)),t.push(...this.validateName(e)),t.push(...this.validateNextSymbol(e)),t}validateStatusCollectionEntry(e){let[t,n,i,s]=e,a=[];if(a.push(...this.validateType(s)),t===i&&s!=="NON_TASK"&&a.push(`Status symbol '${t}' toggles to itself`),a.length>0)return a;let o=Y.createFromImportedValue(e).configuration;return a.push(...this.validateSymbolTypeConventions(o)),a.push(...this.validate(o)),a}validateSymbol(e){return _n.validateOneSymbol(e.symbol,"Task Status Symbol")}validateNextSymbol(e){return _n.validateOneSymbol(e.nextStatusSymbol,"Task Next Status Symbol")}validateName(e){let t=[];return e.name.length===0&&t.push("Task Status Name cannot be empty."),t}validateType(e){let t=Ot[e],n=[];return t||n.push(`Status Type "${e}" is not a valid type`),t=="EMPTY"&&n.push('Status Type "EMPTY" is not permitted in user data'),n}validateSymbolTypeConventions(e){let t=[],n=e.symbol,i=new le,s=n==="X"?"x":n,a=i.bySymbol(s);return a.type!=="EMPTY"&&(e.nextStatusSymbol!==a.nextStatusSymbol&&t.push(`Next Status Symbol for symbol '${n}': '${e.nextStatusSymbol}' is inconsistent with convention '${a.nextStatusSymbol}'`),e.type!==a.type&&t.push(`Status Type for symbol '${n}': '${e.type}' is inconsistent with convention '${a.type}'`)),t}static validateOneSymbol(e,t){let n=[];return e.length===0&&n.push(`${t} cannot be empty.`),e.length>1&&n.push(`${t} ("${e}") must be a single character.`),n}};var Tn=new _n,Tt=class extends Kt.Modal{constructor(t,n,i){super(t.app);this.plugin=t;this.saved=!1;this.error=!1;this.statusSymbol=n.symbol,this.statusName=n.name,this.statusNextSymbol=n.nextStatusSymbol,this.statusAvailableAsCommand=n.availableAsCommand,this.type=n.type,this.isCoreStatus=i}statusConfiguration(){return new Ce(this.statusSymbol,this.statusName,this.statusNextSymbol,this.statusAvailableAsCommand,this.type)}display(){return N(this,null,function*(){let{contentEl:t}=this;t.empty();let n=t.createDiv(),i;new Kt.Setting(n).setName("Task Status Symbol").setDesc("This is the character between the square braces. (It can only be edited for Custom statuses, and not Core statuses.)").addText(l=>{i=l,l.setValue(this.statusSymbol).onChange(c=>{this.statusSymbol=c,Tt.setValid(l,Tn.validateSymbol(this.statusConfiguration()))})}).setDisabled(this.isCoreStatus).then(l=>{Tt.setValid(i,Tn.validateSymbol(this.statusConfiguration()))});let s;new Kt.Setting(n).setName("Task Status Name").setDesc("This is the friendly name of the task status.").addText(l=>{s=l,l.setValue(this.statusName).onChange(c=>{this.statusName=c,Tt.setValid(l,Tn.validateName(this.statusConfiguration()))})}).then(l=>{Tt.setValid(s,Tn.validateName(this.statusConfiguration()))});let a;new Kt.Setting(n).setName("Task Next Status Symbol").setDesc("When clicked on this is the symbol that should be used next.").addText(l=>{a=l,l.setValue(this.statusNextSymbol).onChange(c=>{this.statusNextSymbol=c,Tt.setValid(l,Tn.validateNextSymbol(this.statusConfiguration()))})}).then(l=>{Tt.setValid(a,Tn.validateNextSymbol(this.statusConfiguration()))}),new Kt.Setting(n).setName("Task Status Type").setDesc("Control how the status behaves for searching and toggling.").addDropdown(l=>{["TODO","IN_PROGRESS","DONE","CANCELLED","NON_TASK"].forEach(d=>{l.addOption(d,d)}),l.setValue(this.type).onChange(d=>{this.type=Y.getTypeFromStatusTypeString(d)})}),Y.tasksPluginCanCreateCommandsForStatuses()&&new Kt.Setting(n).setName("Available as command").setDesc("If enabled this status will be available as a command so you can assign a hotkey and toggle the status using it.").addToggle(l=>{l.setValue(this.statusAvailableAsCommand).onChange(c=>N(this,null,function*(){this.statusAvailableAsCommand=c}))});let o=t.createDiv(),u=new Kt.Setting(o);u.addButton(l=>(l.setTooltip("Save").setIcon("checkmark").onClick(()=>N(this,null,function*(){let c=Tn.validate(this.statusConfiguration());if(c.length>0){let d=c.join(`
`)+`

Fix errors before saving.`;new Kt.Notice(d);return}this.saved=!0,this.close()})),l)),u.addExtraButton(l=>(l.setIcon("cross").setTooltip("Cancel").onClick(()=>{this.saved=!1,this.close()}),l))})}onOpen(){this.display()}static setValidationError(t){t.inputEl.addClass("tasks-settings-is-invalid")}static removeValidationError(t){t.inputEl.removeClass("tasks-settings-is-invalid")}static setValid(t,n){n.length===0?Tt.removeValidationError(t):Tt.setValidationError(t)}};var di=class extends he.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.customFunctions={insertTaskCoreStatusSettings:this.insertTaskCoreStatusSettings.bind(this),insertCustomTaskStatusSettings:this.insertCustomTaskStatusSettings.bind(this)};this.plugin=t}saveSettings(t){return N(this,null,function*(){yield this.plugin.saveSettings(),t&&this.display()})}display(){let{containerEl:t}=this;t.empty(),this.containerEl.addClass("tasks-settings"),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Global filter Settings"}),new he.Setting(t).setName("Global task filter").setDesc(di.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/global-filter/">documentation</a>.</p>')).addText(i=>{let s=U();i.setPlaceholder("e.g. #task or TODO").setValue(s.globalFilter).onChange(a=>N(this,null,function*(){nt({globalFilter:a}),yield this.plugin.saveSettings()}))}),new he.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(i=>{let s=U();i.setValue(s.removeGlobalFilter).onChange(a=>N(this,null,function*(){nt({removeGlobalFilter:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Task Statuses"});let{headingOpened:n}=U();dT.forEach(i=>{this.addOneSettingsBlock(t,i,n)}),t.createEl("h4",{text:"Date Settings"}),new he.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(i=>{let s=U();i.setValue(s.setDoneDate).onChange(a=>N(this,null,function*(){nt({setDoneDate:a}),yield this.plugin.saveSettings()}))}),new he.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(di.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/use-filename-as-default-date/">documentation</a>.</p>')).addToggle(i=>{let s=U();i.setValue(s.useFilenameAsScheduledDate).onChange(a=>N(this,null,function*(){nt({useFilenameAsScheduledDate:a}),yield this.plugin.saveSettings()}))}),new he.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(i=>N(this,null,function*(){let s=U();yield this.plugin.saveSettings(),i.setValue(di.renderFolderArray(s.filenameAsDateFolders)).onChange(a=>N(this,null,function*(){let o=di.parseCommaSeparatedFolders(a);nt({filenameAsDateFolders:o}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Auto-suggest Settings"}),new he.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(i=>{let s=U();i.setValue(s.autoSuggestInEditor).onChange(a=>N(this,null,function*(){nt({autoSuggestInEditor:a}),yield this.plugin.saveSettings()}))}),new he.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(i=>{let s=U();i.setLimits(0,3,1).setValue(s.autoSuggestMinMatch).setDynamicTooltip().onChange(a=>N(this,null,function*(){nt({autoSuggestMinMatch:a}),yield this.plugin.saveSettings()}))}),new he.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(i=>{let s=U();i.setLimits(3,12,1).setValue(s.autoSuggestMaxItems).setDynamicTooltip().onChange(a=>N(this,null,function*(){nt({autoSuggestMaxItems:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new he.Setting(t).setName("Provide access keys in dialogs").setDesc("If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.").addToggle(i=>{let s=U();i.setValue(s.provideAccessKeys).onChange(a=>N(this,null,function*(){nt({provideAccessKeys:a}),yield this.plugin.saveSettings()}))})}addOneSettingsBlock(t,n,i){let s=t.createEl("details",{cls:"tasks-nested-settings",attr:Ee({},n.open||i[n.text]?{open:!0}:{})});s.empty(),s.ontoggle=()=>{i[n.text]=s.open,nt({headingOpened:i}),this.plugin.saveSettings()};let a=s.createEl("summary");if(new he.Setting(a).setHeading().setName(n.text),a.createDiv("collapser").createDiv("handle"),n.notice!==null){let o=s.createEl("div",{cls:n.notice.class,text:n.notice.text});n.notice.html!==null&&o.insertAdjacentHTML("beforeend",n.notice.html)}n.settings.forEach(o=>{if(!(o.featureFlag!==""&&!Lp(o.featureFlag))&&(o.type==="checkbox"?new he.Setting(s).setName(o.name).setDesc(o.description).addToggle(u=>{let l=U();l.generalSettings[o.settingName]||zr(o.settingName,o.initialValue),u.setValue(l.generalSettings[o.settingName]).onChange(c=>N(this,null,function*(){zr(o.settingName,c),yield this.plugin.saveSettings()}))}):o.type==="text"?new he.Setting(s).setName(o.name).setDesc(o.description).addText(u=>{let l=U();l.generalSettings[o.settingName]||zr(o.settingName,o.initialValue);let c=d=>N(this,null,function*(){zr(o.settingName,d),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,he.debounce)(c,500,!0))}):o.type==="textarea"?new he.Setting(s).setName(o.name).setDesc(o.description).addTextArea(u=>{let l=U();l.generalSettings[o.settingName]||zr(o.settingName,o.initialValue);let c=d=>N(this,null,function*(){zr(o.settingName,d),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,he.debounce)(c,500,!0)),u.inputEl.rows=8,u.inputEl.cols=40}):o.type==="function"&&this.customFunctions[o.settingName](s,this),o.notice!==null)){let u=s.createEl("p",{cls:o.notice.class,text:o.notice.text});o.notice.html!==null&&u.insertAdjacentHTML("beforeend",o.notice.html)}})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}insertTaskCoreStatusSettings(t,n){let{statusSettings:i}=U();i.coreStatuses.forEach(s=>{fT(t,s,i.coreStatuses,i,n,n.plugin,!0)})}insertCustomTaskStatusSettings(t,n){let{statusSettings:i}=U();i.customStatuses.forEach(l=>{fT(t,l,i.customStatuses,i,n,n.plugin,!1)}),t.createEl("div"),new he.Setting(t).addButton(l=>{l.setButtonText("Add New Task Status").setCta().onClick(()=>N(this,null,function*(){Me.addStatus(i.customStatuses,new Ce("","","",!1,"TODO")),yield fi(i,n)}))}).infoEl.remove();let a=[["AnuPpuccin Theme",sT()],["Ebullientworks Theme",oT()],["ITS Theme & SlRvb Checkboxes",uT()],["Minimal Theme",lT()],["Things Theme",cT()],["Aura Theme (Dark mode only)",aT()]];for(let[l,c]of a)new he.Setting(t).addButton(f=>{let h=`${l}: Add ${c.length} supported Statuses`;f.setButtonText(h).onClick(()=>N(this,null,function*(){yield rA(c,i,n)}))}).infoEl.remove();new he.Setting(t).addButton(l=>{l.setButtonText("Add All Unknown Status Types").setCta().onClick(()=>N(this,null,function*(){let d=this.plugin.getTasks().map(h=>h.status),f=le.getInstance().findUnknownStatuses(d);f.length!==0&&(f.forEach(h=>{Me.addStatus(i.customStatuses,h)}),yield fi(i,n))}))}).infoEl.remove(),new he.Setting(t).addButton(l=>{l.setButtonText("Reset Custom Status Types to Defaults").setWarning().onClick(()=>N(this,null,function*(){Me.resetAllCustomStatuses(i),yield fi(i,n)}))}).infoEl.remove()}},Ws=di;Ws.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);function fT(r,e,t,n,i,s,a){let o=r.createEl("pre");o.addClass("row-for-status"),o.textContent=new Y(e).previewText();let u=new he.Setting(r);u.infoEl.replaceWith(o),a||u.addExtraButton(l=>{l.setIcon("cross").setTooltip("Delete").onClick(()=>N(this,null,function*(){Me.deleteStatus(t,e)&&(yield fi(n,i))}))}),u.addExtraButton(l=>{l.setIcon("pencil").setTooltip("Edit").onClick(()=>N(this,null,function*(){let c=new Tt(s,e,a);c.onClose=()=>N(this,null,function*(){c.saved&&Me.replaceStatus(t,e,c.statusConfiguration())&&(yield fi(n,i))}),c.open()}))}),u.infoEl.remove()}function rA(r,e,t){return N(this,null,function*(){Me.bulkAddStatusCollection(e,r).forEach(i=>{new he.Notice(i)}),yield fi(e,t)})}function fi(r,e){return N(this,null,function*(){nt({statusSettings:r}),Me.applyToStatusRegistry(r,le.getInstance()),yield e.saveSettings(!0)})}var hT=require("obsidian");var nA=`${Ut}${Lt}${qt}`;function pT(r,e,t){let n=[];n=n.concat(aA(r,e,t)),n=n.concat(oA(r,e,t));let i=sA(r,t),s=pf(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function iA(r){if(Object.values(ke).some(e=>e.length>0&&r.includes(e)))return!0}function sA(r,e){let t=[];return r.includes(qt)||t.push({displayText:`${qt} due date`,appendText:`${qt} `}),r.includes(Ut)||t.push({displayText:`${Ut} start date`,appendText:`${Ut} `}),r.includes(Lt)||t.push({displayText:`${Lt} scheduled date`,appendText:`${Lt} `}),iA(r)||(t.push({displayText:`${ke.High} high priority`,appendText:`${ke.High} `}),t.push({displayText:`${ke.Medium} medium priority`,appendText:`${ke.Medium} `}),t.push({displayText:`${ke.Low} low priority`,appendText:`${ke.Low} `})),r.includes(Ft)||t.push({displayText:`${Ft} recurring (repeat)`,appendText:`${Ft} `}),t}function aA(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${nA}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=pf(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?vr.parseDate(Vn(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(M.dateFormat)}`,appendText:`${o} ${l.format(M.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(h=>u&&u.length>=c&&h.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let h of f){let m=`${vr.parseDate(h,!0).format(M.dateFormat)}`;i.push({suggestionType:"match",displayText:`${h} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function oA(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${Ft})\\s*([0-9a-zA-Z ]*)`,"ug"),a=pf(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let h=(o=xe.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(h){let y=`${u} ${h} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${h}`,appendText:y,insertAt:a.index,insertSkip:a[0].length}),a[0]==y)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(h=>l&&l.length>=c&&h.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let h of f)i.push({suggestionType:"match",displayText:`${h}`,appendText:`${u} ${h} `,insertAt:a.index,insertSkip:a[0].length})}return i}function pf(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var Ao=class extends hT.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(M.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=pT(n,i.ch,this.settings),a=[];for(let o of s)a.push(vt(Ee({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var Po=class extends mT.Plugin{onload(){return N(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new Ws({plugin:this})),Wp({metadataCache:this.app.metadataCache,vault:this.app.vault}),yield this.loadTaskStatuses();let t=new io({obsidianEvents:this.app.workspace});this.cache=new Kr({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new so({plugin:this}),this.queryRenderer=new Mo({plugin:this,events:t}),this.registerEditorExtension($_()),this.registerEditorSuggest(new Ao(this.app,U())),new no({plugin:this})})}loadTaskStatuses(){return N(this,null,function*(){let{statusSettings:t}=U();Me.applyToStatusRegistry(t,le.getInstance())})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return N(this,null,function*(){let t=yield this.loadData();nt(t),yield this.loadTaskStatuses()})}saveSettings(){return N(this,null,function*(){yield this.saveData(U())})}getTasks(){var t;return(t=this.cache)==null?void 0:t.getTasks()}};
