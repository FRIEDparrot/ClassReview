/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => DynamicBackgroundPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// effects/dark-dynamic-star-sky.ts
function Add_StarSky(dynamicBackgroundContainer) {
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-dt-star-sky-dynamic-effect" });
    effect.createEl("div", { cls: "star-sky" });
  }
}
function Remove_StarSky(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-dt-star-sky-dynamic-effect");
  if (effect) {
    effect.remove();
  }
}

// effects/dark-dynamic-snow.ts
var DarkTheme_Snow_Background_Property = "radial-gradient(ellipse at bottom, #1b2735 20%, #090a0f 100%)";
function Add_Snow(dynamicBackgroundContainer) {
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-dt-snow-dynamic-effect" });
    effect.createEl("div", { cls: "snow" });
  }
}
function Remove_Snow(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-dt-snow-dynamic-effect");
  if (effect) {
    effect.remove();
  }
}

// effects/dark-dynamic-rain.ts
var DarkTheme_Rain_Background_Property = "radial-gradient(ellipse at bottom, #1b2735 20%, #090a0f 100%)";
function Add_Rain(dynamicBackgroundContainer) {
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-dt-rain-dynamic-effect" });
    let drop1 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 34; --y: 90; --o: 0.6654153804683264; --a: 0.9917710156945896; --d: -0.8043425740744814; --s: 0.6951142349804096"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop2 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 49; --y: 81; --o: 0.0317509941505465; --a: 1.4150340796041947; --d: -0.8977060475990615; --s: 0.3560926038758976"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop3 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 93; --y: 6; --o: 0.6536147164205229; --a: 1.3150980722082548; --d: -0.5493637177821533; --s: 0.5552132370247103"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop4 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 22; --y: 13; --o: 0.4259600004078947; --a: 0.5854285185377734; --d: -0.5293135001180258; --s: 0.3526760878325925"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop5 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 36; --y: 20; --o: 0.5609448459063665; --a: 1.4252956133711117; --d: -0.7690131594986251; --s: 0.6689223471599941"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop6 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 48; --y: 54; --o: 0.2850601343180057; --a: 1.4235635026018683; --d: -0.4523568427598179; --s: 0.19763333766570312"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop7 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 16; --y: 4; --o: 0.4224367492164993; --a: 0.9291570251573422; --d: -0.7072288650072931; --s: 0.3225005986968783"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop8 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 50; --y: 52; --o: 0.5163724944648716; --a: 0.5163417250721392; --d: -0.24562675844904858; --s: 0.7462277243198527"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop9 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 35; --y: 66; --o: 0.31206402174244974; --a: 0.6059744356541634; --d: 0.37906548779328597; --s: 0.7307418662633716"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop10 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 64; --y: 81; --o: 0.8158102807508611; --a: 0.6722718682672502; --d: 0.2444215747954348; --s: 0.8667250195046547"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop11 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 88; --y: 35; --o: 0.02762815253441553; --a: 0.9555468749843488; --d: 0.08996319031500377; --s: 0.7428281610861129"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop12 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 88; --y: 91; --o: 0.6103134847919844; --a: 0.9001734345539698; --d: -0.917351021576823; --s: 0.0040542399155854"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop13 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 62; --y: 54; --o: 0.2856796208317729; --a: 0.9046554131241138; --d: -0.13645809866400516; --s: 0.5739079247947556"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop14 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 26; --y: 67; --o: 0.3249777593937293; --a: 1.0274350664090073; --d: -0.8605688159121647; --s: 0.7199893214500341"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop15 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 74; --y: 39; --o: 0.6085176773865959; --a: 1.1647324962389058; --d: -0.08643048534587949; --s: 0.5449421802860281"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop16 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 3; --y: 78; --o: 0.7413154227917105; --a: 0.7082137175865917; --d: 0.931629538260506; --s: 0.48335465500642294"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drops = drop1 + drop2 + drop3 + drop4 + drop5 + drop6 + drop7 + drop8 + drop9 + drop10;
    drops += drop11 + drop12 + drop13 + drop14 + drop15 + drop16;
    effect.innerHTML += drops;
  }
}
function Remove_Rain(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-dt-rain-dynamic-effect");
  if (effect) {
    effect.remove();
  }
}

// effects/dark-dynamic-random-circle.ts
var DarkTheme_Random_Circle_Background_Property = "radial-gradient(ellipse at bottom, #1b2735 20%, #090a0f 100%)";
function Add_RandomCircle(dynamicBackgroundContainer) {
  let effectScript;
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-dt-random-circle-dynamic-effect" });
    effect.createEl("canvas");
    let code = `
      var odb_random_circle_ctx;
      var odb_random_circle_grd;

      function Obsidian_Dynamic_Background_Start() {
        var canvas = document.querySelector("div.odb-dt-random-circle-dynamic-effect canvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        odb_random_circle_ctx = canvas.getContext("2d");

        odb_random_circle_grd = odb_random_circle_ctx.createLinearGradient(0, window.innerHeight, 0, 0);

        odb_random_circle_ctx.fillStyle = odb_random_circle_grd;
        odb_random_circle_ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
        
        Obsidian_Dynamic_Background_Animate();
      }

      function Obsidian_Dynamic_Background_Firework(x, y) {
        this.x = x;
        this.y = y;
        this.radius = 5;
        this.time = 0;
        this.lifespan = Math.random()*180 + 150;

        this.draw = function() {
          odb_random_circle_ctx.beginPath();
          odb_random_circle_ctx.arc(this.x, window.innerHeight - this.y, this.radius, 0, 2*Math.PI, false);
          var alpha = (this.lifespan - this.time)/this.lifespan;
          odb_random_circle_ctx.strokeStyle = "rgba(255, 255, 255, " + alpha + ")";
          odb_random_circle_ctx.stroke();
        }

        this.update = function() {
          if (this.time < this.lifespan) {
            this.radius += .25;
            this.time += 1;
            this.draw();
          }
        }
      }

      var fireworks = [];
      var time = 0;

      function Obsidian_Dynamic_Background_Animate() {
        odb_random_circle_ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
        odb_random_circle_ctx.fillStyle = odb_random_circle_grd;
        odb_random_circle_ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
        
        if (time % Math.floor(Math.random()*100 + 40) == 0) {
          var x = Math.floor(Math.random()*window.innerWidth);
          var y = Math.floor(Math.random()*window.innerHeight);
          fireworks.push(new Obsidian_Dynamic_Background_Firework(x, y));
        }

        fireworks.forEach(firework => {
          firework.update();
          if ((firework.time - firework.explosionTime) > 20) {
            for (var i = 0; i < fireworks.length; i++) {
              if (firework === fireworks[i]) {
                delete fireworks[i];
              }
            }
          }
        })
        
        time += 1;

        if (Obsidian_Dynamic_Background_Animate)
          requestAnimationFrame(Obsidian_Dynamic_Background_Animate);
      }

      Obsidian_Dynamic_Background_Start();
    `;
    effectScript = effect.createEl("script");
    effectScript.textContent = code;
  }
}
function Remove_RandomCircle(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-dt-random-circle-dynamic-effect");
  if (effect) {
    effect.remove();
  }
  Unload_Effect_Script();
}
function Unload_Effect_Script() {
  window["Obsidian_Dynamic_Background_Start"] = null;
  window["Obsidian_Dynamic_Background_Firework"] = null;
  window["Obsidian_Dynamic_Background_Animate"] = null;
}

// effects/light-dynamic-random-circle.ts
var LightTheme_Random_Circle_Background_Property = "linear-gradient(0deg, rgba(255,255,255,1) 62%, rgba(230,244,255,1) 100%)";
function Add_RandomCircle_Light(dynamicBackgroundContainer) {
  let effectScript;
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-lt-random-circle-dynamic-effect" });
    effect.createEl("canvas");
    let code = `
      var odb_random_circle_ctx;
      var odb_random_circle_grd;

      function Obsidian_Dynamic_Background_Start() {
        var canvas = document.querySelector("div.odb-lt-random-circle-dynamic-effect canvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        odb_random_circle_ctx = canvas.getContext("2d");

        odb_random_circle_grd = odb_random_circle_ctx.createLinearGradient(0, window.innerHeight, 0, 0);

        odb_random_circle_ctx.fillStyle = odb_random_circle_grd;
        odb_random_circle_ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
        
        Obsidian_Dynamic_Background_Animate();
      }

      function Obsidian_Dynamic_Background_Firework(x, y) {
        this.x = x;
        this.y = y;
        this.radius = 5;
        this.time = 0;
        this.lifespan = Math.random()*180 + 150;

        this.draw = function() {
          odb_random_circle_ctx.beginPath();
          odb_random_circle_ctx.arc(this.x, window.innerHeight - this.y, this.radius, 0, 2*Math.PI, false);
          var alpha = (this.lifespan - this.time)/this.lifespan;
          odb_random_circle_ctx.strokeStyle = "rgba(0, 128, 255, " + alpha + ")";
          odb_random_circle_ctx.stroke();
        }

        this.update = function() {
          if (this.time < this.lifespan) {
            this.radius += .25;
            this.time += 1;
            this.draw();
          }
        }
      }

      var fireworks = [];
      var time = 0;

      function Obsidian_Dynamic_Background_Animate() {
        odb_random_circle_ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
        odb_random_circle_ctx.fillStyle = odb_random_circle_grd;
        odb_random_circle_ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
        
        if (time % Math.floor(Math.random()*100 + 40) == 0) {
          var x = Math.floor(Math.random()*window.innerWidth);
          var y = Math.floor(Math.random()*window.innerHeight);
          fireworks.push(new Obsidian_Dynamic_Background_Firework(x, y));
        }

        fireworks.forEach(firework => {
          firework.update();
          if ((firework.time - firework.explosionTime) > 20) {
            for (var i = 0; i < fireworks.length; i++) {
              if (firework === fireworks[i]) {
                delete fireworks[i];
              }
            }
          }
        })
        
        time += 1;

        if (Obsidian_Dynamic_Background_Animate)
          requestAnimationFrame(Obsidian_Dynamic_Background_Animate);
      }

      Obsidian_Dynamic_Background_Start();
    `;
    effectScript = effect.createEl("script");
    effectScript.textContent = code;
  }
}
function Remove_RandomCircle_Light(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-lt-random-circle-dynamic-effect");
  if (effect) {
    effect.remove();
  }
  Unload_Effect_Script2();
}
function Unload_Effect_Script2() {
  window["Obsidian_Dynamic_Background_Start"] = null;
  window["Obsidian_Dynamic_Background_Firework"] = null;
  window["Obsidian_Dynamic_Background_Animate"] = null;
}

// effects/light-dynamic-wave.ts
var LightTheme_Wave_Background_Property = "linear-gradient(0deg, rgba(255,255,255,1) 60%, rgba(201,233,255,1) 100%)";
function Add_Wave_Light(dynamicBackgroundContainer) {
  let effectScript;
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-lt-wave-effect" });
    effect.createEl("div", { cls: "ocean" });
    let code = `
      function Obsidian_Dynamic_Background_ShowWave() {
        var ocean = document.querySelector("div.odb-lt-wave-effect div.ocean"),
        waveWidth = 10,
        waveCount = Math.floor(window.innerWidth/waveWidth),
        docFrag = document.createDocumentFragment();

        for(var i = 0; i < waveCount; i++){
          var wave = document.createElement("div");
          wave.className += " wave-0723";
          docFrag.appendChild(wave);
          wave.style.left = i * waveWidth + "px";
          wave.style.webkitAnimationDelay = (i/100) + "s";
        }

        ocean.appendChild(docFrag);
      }

      Obsidian_Dynamic_Background_ShowWave();
    `;
    effectScript = effect.createEl("script");
    effectScript.textContent = code;
  }
}
function Remove_Wave_Light(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-lt-wave-effect");
  if (effect) {
    effect.remove();
  }
  Unload_Effect_Script3();
}
function Unload_Effect_Script3() {
  window["Obsidian_Dynamic_Background_ShowWave"] = null;
}

// effects/dark-dynamic-digital-rain.ts
var DarkTheme_Digital_Rain_Background_Property = "radial-gradient(ellipse at bottom, #1b2735 20%, #090a0f 100%)";
function Add_DigitalRain(dynamicBackgroundContainer) {
  let effectScript;
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-dt-digital-rain-dynamic-effect" });
    effect.createEl("canvas");
    let code = `
      var odb_digital_rain_canvas
      var odb_digital_rain_ctx;
      var odb_digital_rain_grd;
      var odb_digital_rain_digitals = "1001101010110101010101010010101010101011101111010101010110101010101010101110010101";
      var odb_digital_rain_font_size = 15;
      var odb_digital_rain_columns;    //number of columns for the rain
      var odb_digital_rain_drops = []; //an array of drops - one per column
      var odb_digital_rain_interval;

      function Obsidian_Dynamic_Background_Draw(){
        odb_digital_rain_ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
        odb_digital_rain_ctx.fillRect(0, 0, odb_digital_rain_canvas.width, odb_digital_rain_canvas.height);

        odb_digital_rain_ctx.fillStyle = "#0F0";
        odb_digital_rain_ctx.font = odb_digital_rain_font_size + "px arial";

        for(var i = 0; i < odb_digital_rain_drops.length; i++)
        {
            var digital = odb_digital_rain_digitals[Math.floor(Math.random()*odb_digital_rain_digitals.length)];

            odb_digital_rain_ctx.fillText(digital, i*odb_digital_rain_font_size, odb_digital_rain_drops[i]*odb_digital_rain_font_size);
            
            if(odb_digital_rain_drops[i]*odb_digital_rain_font_size > odb_digital_rain_canvas.height && Math.random() > 0.975)
              odb_digital_rain_drops[i] = 0;
            
              odb_digital_rain_drops[i]++;
        }
      }

      function Obsidian_Dynamic_Background_Start() {
        odb_digital_rain_canvas = document.querySelector("div.odb-dt-digital-rain-dynamic-effect canvas");
        odb_digital_rain_canvas.width = window.innerWidth;
        odb_digital_rain_canvas.height = window.innerHeight;

        odb_digital_rain_ctx = odb_digital_rain_canvas.getContext("2d");
        odb_digital_rain_ctx.globalAlpha = 1;
        odb_digital_rain_ctx.globalCompositeOperation = "xor";

        odb_digital_rain_columns = odb_digital_rain_canvas.width/odb_digital_rain_font_size;

        for(var x = 0; x < odb_digital_rain_columns; x++)
          odb_digital_rain_drops[x] = 1; 
      }

      function Obsidian_Dynamic_Background_SetBrightness(brightness) {
        odb_digital_rain_canvas.width = window.innerWidth;  // clear canvas
        odb_digital_rain_ctx.globalCompositeOperation = "xor";
        odb_digital_rain_ctx.globalAlpha = brightness;
      }

      function Obsidian_Dynamic_Background_Clear() {
        clearInterval(odb_digital_rain_interval);
      }

      Obsidian_Dynamic_Background_Start();
      odb_digital_rain_interval = setInterval(Obsidian_Dynamic_Background_Draw, 80);
    `;
    effectScript = effect.createEl("script");
    effectScript.textContent = code;
  }
}
function Remove_DigitalRain(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-dt-digital-rain-dynamic-effect");
  if (effect) {
    CallClear(dynamicBackgroundContainer);
    effect.remove();
  }
  Unload_Effect_Script4();
}
function Unload_Effect_Script4() {
  window["Obsidian_Dynamic_Background_Start"] = null;
  window["Obsidian_Dynamic_Background_Draw"] = null;
  window["Obsidian_Dynamic_Background_Clear"] = null;
  window["Obsidian_Dynamic_Background_SetBrightness"] = null;
}
function CallClear(dynamicBackgroundContainer) {
  let effectScript;
  let effect = dynamicBackgroundContainer.find("div.odb-dt-digital-rain-dynamic-effect");
  let code = `
    Obsidian_Dynamic_Background_Clear();
    `;
  effectScript = effect.createEl("script");
  effectScript.textContent = code;
}
function SetBrightness(dynamicBackgroundContainer, brightness) {
  let setBrightnessScript;
  let setBrightnessScriptContainer;
  let effect = dynamicBackgroundContainer.find("div.odb-dt-digital-rain-dynamic-effect");
  if (effect) {
    let setBrightnessScriptContainer2 = dynamicBackgroundContainer.find("div.odb-dt-digital-rain-dynamic-effect div.set-brightness-script-container");
    if (setBrightnessScriptContainer2) {
      setBrightnessScriptContainer2.remove();
    }
    setBrightnessScriptContainer2 = effect.createEl("div", { cls: "div.set-brightness-script-container" });
    let code = "Obsidian_Dynamic_Background_SetBrightness(" + brightness + ")";
    setBrightnessScript = setBrightnessScriptContainer2.createEl("script");
    setBrightnessScript.textContent = code;
  }
}

// main.ts
var fs = __toESM(require("fs"));
var path = __toESM(require("path"));
var DEFAULT_SETTINGS = {
  dynamicEffect: 1 /* Dark_StarSky */,
  digitalRainBrightness: 0.7,
  enableDynamicEffect: true,
  backgroundImageFile: "",
  blur: 0
};
var DynamicBackgroundPlugin = class extends import_obsidian.Plugin {
  onload() {
    return __async(this, null, function* () {
      console.log("loading dynamic background plugin...");
      this.preDynamicEffect = -1 /* Unknown */;
      yield this.loadSettings();
      this.addSettingTab(new DynamicBackgroundSettingTab(this.app, this));
      this.app.workspace.onLayoutReady(() => {
        this.AddDynamicBackgroundContainer();
        this.SetDynamicBackgroundContainerBgProperty();
        if (this.settings.enableDynamicEffect == true) {
          this.AddDynamicBackgroundEffect(this.settings.dynamicEffect);
        }
      });
    });
  }
  onunload() {
    console.log("unloading dynamic background plugin...");
    this.RemoveDynamicBackgroundContainer();
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  AddDynamicBackgroundContainer() {
    let div_root = app.workspace.containerEl.find("div.workspace > div.mod-root");
    this.dynamicBackgroundContainer = null;
    if (div_root) {
      this.dynamicBackgroundContainer = div_root.createEl("div", { cls: "rh-obsidian-dynamic-background-container" });
      this.wallpaperCover = this.dynamicBackgroundContainer.createEl("div", { cls: "rh-wallpaper-cover" });
      this.SetWallpaperBlur();
    }
  }
  SetWallpaperBlur() {
    let value = "blur(" + this.settings.blur.toString() + "px)";
    this.wallpaperCover.style.setProperty("filter", value);
  }
  RemoveDynamicBackgroundContainer() {
    if (this.dynamicBackgroundContainer) {
      this.dynamicBackgroundContainer.remove();
      this.dynamicBackgroundContainer = null;
    }
  }
  SetDynamicBackgroundContainerBgProperty() {
    return __async(this, null, function* () {
      if (this.dynamicBackgroundContainer == null)
        return;
      let backgroundImageAlreadySet = false;
      let vaultBasePath;
      let imageFullFilename = "";
      let buffer;
      vaultBasePath = this.app.vault.adapter.getBasePath();
      try {
        let test = yield fs.promises.readFile(this.settings.backgroundImageFile);
        buffer = test;
        imageFullFilename = "app://local/" + this.settings.backgroundImageFile;
      } catch (e) {
      }
      if (imageFullFilename == "") {
        try {
          let fileFullname = path.join(vaultBasePath, this.settings.backgroundImageFile);
          fileFullname = fileFullname.replace(/\\/g, "/");
          let test = yield fs.promises.readFile(fileFullname);
          buffer = test;
          imageFullFilename = "app://local/" + fileFullname;
        } catch (e) {
        }
      }
      if (imageFullFilename != "") {
        this.dynamicBackgroundContainer.style.setProperty("background", 'url("' + imageFullFilename + '"');
        this.dynamicBackgroundContainer.style.setProperty("background-size", "cover");
        this.dynamicBackgroundContainer.style.setProperty("background-position", "center");
        backgroundImageAlreadySet = true;
      } else {
        this.dynamicBackgroundContainer.style.removeProperty("background");
        this.dynamicBackgroundContainer.style.removeProperty("background-size");
        this.dynamicBackgroundContainer.style.removeProperty("background-position");
      }
      if (backgroundImageAlreadySet == false) {
        this.dynamicBackgroundContainer.style.removeProperty("background");
        this.dynamicBackgroundContainer.style.removeProperty("background-size");
        this.dynamicBackgroundContainer.style.removeProperty("background-position");
        if (this.settings.enableDynamicEffect == false)
          return;
        switch (this.settings.dynamicEffect) {
          case 1 /* Dark_StarSky */:
            break;
          case 2 /* Dark_Snow */:
            this.dynamicBackgroundContainer.style.setProperty("background", DarkTheme_Snow_Background_Property);
            break;
          case 3 /* Dark_Rain */:
            this.dynamicBackgroundContainer.style.setProperty("background", DarkTheme_Rain_Background_Property);
            break;
          case 4 /* Dark_RandomCircle */:
            this.dynamicBackgroundContainer.style.setProperty("background", DarkTheme_Random_Circle_Background_Property);
            break;
          case 40 /* Light_RandomCircle */:
            this.dynamicBackgroundContainer.style.setProperty("background", LightTheme_Random_Circle_Background_Property);
            break;
          case 41 /* Light_Wave */:
            this.dynamicBackgroundContainer.style.setProperty("background", LightTheme_Wave_Background_Property);
            break;
          case 5 /* Dark_DigitalRain */:
            this.dynamicBackgroundContainer.style.setProperty("background", DarkTheme_Digital_Rain_Background_Property);
        }
      }
    });
  }
  SetDigitalRainBrightnessHelper() {
    if (this.dynamicBackgroundContainer) {
      SetBrightness(this.dynamicBackgroundContainer, this.settings.digitalRainBrightness);
    }
  }
  AddDynamicBackgroundEffect(effect) {
    switch (effect) {
      case 1 /* Dark_StarSky */:
        if (this.dynamicBackgroundContainer)
          Add_StarSky(this.dynamicBackgroundContainer);
        break;
      case 2 /* Dark_Snow */:
        if (this.dynamicBackgroundContainer)
          Add_Snow(this.dynamicBackgroundContainer);
        break;
      case 3 /* Dark_Rain */:
        if (this.dynamicBackgroundContainer)
          Add_Rain(this.dynamicBackgroundContainer);
        break;
      case 5 /* Dark_DigitalRain */:
        if (this.dynamicBackgroundContainer) {
          Add_DigitalRain(this.dynamicBackgroundContainer);
          this.SetDigitalRainBrightnessHelper();
        }
        break;
      case 4 /* Dark_RandomCircle */:
        if (this.dynamicBackgroundContainer)
          Add_RandomCircle(this.dynamicBackgroundContainer);
        break;
      case 40 /* Light_RandomCircle */:
        if (this.dynamicBackgroundContainer)
          Add_RandomCircle_Light(this.dynamicBackgroundContainer);
        break;
      case 41 /* Light_Wave */:
        if (this.dynamicBackgroundContainer)
          Add_Wave_Light(this.dynamicBackgroundContainer);
        break;
    }
  }
  RemoveDynamicBackgroundEffect(effect) {
    if (effect == -1 /* Unknown */)
      return;
    switch (effect) {
      case 1 /* Dark_StarSky */:
        if (this.dynamicBackgroundContainer)
          Remove_StarSky(this.dynamicBackgroundContainer);
        break;
      case 2 /* Dark_Snow */:
        if (this.dynamicBackgroundContainer)
          Remove_Snow(this.dynamicBackgroundContainer);
        break;
      case 3 /* Dark_Rain */:
        if (this.dynamicBackgroundContainer)
          Remove_Rain(this.dynamicBackgroundContainer);
        break;
      case 5 /* Dark_DigitalRain */:
        if (this.dynamicBackgroundContainer)
          Remove_DigitalRain(this.dynamicBackgroundContainer);
        break;
      case 4 /* Dark_RandomCircle */:
        if (this.dynamicBackgroundContainer)
          Remove_RandomCircle(this.dynamicBackgroundContainer);
        break;
      case 40 /* Light_RandomCircle */:
        if (this.dynamicBackgroundContainer)
          Remove_RandomCircle_Light(this.dynamicBackgroundContainer);
        break;
      case 41 /* Light_Wave */:
        if (this.dynamicBackgroundContainer)
          Remove_Wave_Light(this.dynamicBackgroundContainer);
        break;
    }
  }
};
var DynamicBackgroundSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Dynamic Background Plugin - Settings" });
    new import_obsidian.Setting(containerEl).setName("Dynamic Effect").setDesc("Select a dynamic effect").addDropdown((dropdown) => dropdown.addOption(5 /* Dark_DigitalRain */.toString(), "Dark - Matrix / Digital Rain").addOption(3 /* Dark_Rain */.toString(), "Dark - Rain").addOption(4 /* Dark_RandomCircle */.toString(), "Dark - Random Circle").addOption(2 /* Dark_Snow */.toString(), "Dark - Snow").addOption(1 /* Dark_StarSky */.toString(), "Dark - Star Sky").addOption(40 /* Light_RandomCircle */.toString(), "Light - Random Circle").addOption(41 /* Light_Wave */.toString(), "Light - Wave").setValue(this.plugin.settings.dynamicEffect.toString()).onChange((value) => __async(this, null, function* () {
      this.plugin.preDynamicEffect = this.plugin.settings.dynamicEffect;
      this.plugin.settings.dynamicEffect = Number(value);
      yield this.plugin.saveSettings();
      this.plugin.RemoveDynamicBackgroundEffect(this.plugin.preDynamicEffect);
      if (this.plugin.settings.enableDynamicEffect == true)
        this.plugin.AddDynamicBackgroundEffect(this.plugin.settings.dynamicEffect);
      this.plugin.SetDynamicBackgroundContainerBgProperty();
      this.display();
    })));
    if (this.plugin.settings.dynamicEffect == 5 /* Dark_DigitalRain */) {
      new import_obsidian.Setting(containerEl).setName("Brightness").setDesc("Set Digital Rain Brightness.").addSlider((tc) => {
        tc.setDynamicTooltip().setLimits(0.5, 1, 0.01).setValue(this.plugin.settings.digitalRainBrightness).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.digitalRainBrightness = value;
          this.plugin.SetDigitalRainBrightnessHelper();
          yield this.plugin.saveSettings();
        }));
      });
    }
    new import_obsidian.Setting(containerEl).setName("Enable Dynamic Effect").setDesc("Enable or disable dynamic effect").addToggle((tc) => tc.setValue(this.plugin.settings.enableDynamicEffect).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.enableDynamicEffect = value;
      yield this.plugin.saveSettings();
      if (this.plugin.settings.enableDynamicEffect == false) {
        this.plugin.RemoveDynamicBackgroundEffect(this.plugin.settings.dynamicEffect);
      } else {
        this.plugin.AddDynamicBackgroundEffect(this.plugin.settings.dynamicEffect);
      }
    })));
    new import_obsidian.Setting(containerEl).setName("Static Wallpaper Image").setDesc("This local image file. Use an absolute path or a path relative to the vault.").addTextArea((text) => text.setValue(this.plugin.settings.backgroundImageFile).setPlaceholder("Example: C:\\Users\\Example\\Documents\\moon.jpg or /home/user/images/moon.jpg or attachments/moon.jpg").then((cb) => {
      cb.inputEl.style.width = "100%";
      cb.inputEl.rows = 5;
    }).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.backgroundImageFile = value;
      yield this.plugin.saveSettings();
      this.plugin.SetDynamicBackgroundContainerBgProperty();
    })));
    new import_obsidian.Setting(containerEl).setName("Blur").setDesc("The blurriness of the wallpaper, 0 means no blur.").addSlider((tc) => {
      tc.setDynamicTooltip().setLimits(0, 100, 1).setValue(this.plugin.settings.blur).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.blur = value;
        yield this.plugin.saveSettings();
        this.plugin.SetWallpaperBlur();
      }));
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJlZmZlY3RzL2RhcmstZHluYW1pYy1zdGFyLXNreS50cyIsICJlZmZlY3RzL2RhcmstZHluYW1pYy1zbm93LnRzIiwgImVmZmVjdHMvZGFyay1keW5hbWljLXJhaW4udHMiLCAiZWZmZWN0cy9kYXJrLWR5bmFtaWMtcmFuZG9tLWNpcmNsZS50cyIsICJlZmZlY3RzL2xpZ2h0LWR5bmFtaWMtcmFuZG9tLWNpcmNsZS50cyIsICJlZmZlY3RzL2xpZ2h0LWR5bmFtaWMtd2F2ZS50cyIsICJlZmZlY3RzL2RhcmstZHluYW1pYy1kaWdpdGFsLXJhaW4udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgTW9kYWwsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgRmlsZVN5c3RlbUFkYXB0ZXIsIG5vcm1hbGl6ZVBhdGggfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBBZGRfU3RhclNreSwgUmVtb3ZlX1N0YXJTa3l9IGZyb20gJ2VmZmVjdHMvZGFyay1keW5hbWljLXN0YXItc2t5JztcbmltcG9ydCB7IEFkZF9Tbm93LCBSZW1vdmVfU25vdywgRGFya1RoZW1lX1Nub3dfQmFja2dyb3VuZF9Qcm9wZXJ0eX0gZnJvbSAnZWZmZWN0cy9kYXJrLWR5bmFtaWMtc25vdyc7XG5pbXBvcnQgeyBBZGRfUmFpbiwgUmVtb3ZlX1JhaW4sIERhcmtUaGVtZV9SYWluX0JhY2tncm91bmRfUHJvcGVydHl9IGZyb20gJ2VmZmVjdHMvZGFyay1keW5hbWljLXJhaW4nO1xuaW1wb3J0IHsgQWRkX1JhbmRvbUNpcmNsZSwgUmVtb3ZlX1JhbmRvbUNpcmNsZSwgRGFya1RoZW1lX1JhbmRvbV9DaXJjbGVfQmFja2dyb3VuZF9Qcm9wZXJ0eX0gZnJvbSAnZWZmZWN0cy9kYXJrLWR5bmFtaWMtcmFuZG9tLWNpcmNsZSc7XG5pbXBvcnQgeyBBZGRfUmFuZG9tQ2lyY2xlX0xpZ2h0LCBSZW1vdmVfUmFuZG9tQ2lyY2xlX0xpZ2h0LCBMaWdodFRoZW1lX1JhbmRvbV9DaXJjbGVfQmFja2dyb3VuZF9Qcm9wZXJ0eX0gZnJvbSAnZWZmZWN0cy9saWdodC1keW5hbWljLXJhbmRvbS1jaXJjbGUnO1xuaW1wb3J0IHsgQWRkX1dhdmVfTGlnaHQsIFJlbW92ZV9XYXZlX0xpZ2h0LCBMaWdodFRoZW1lX1dhdmVfQmFja2dyb3VuZF9Qcm9wZXJ0eX0gZnJvbSAnZWZmZWN0cy9saWdodC1keW5hbWljLXdhdmUnO1xuaW1wb3J0IHsgQWRkX0RpZ2l0YWxSYWluLCBSZW1vdmVfRGlnaXRhbFJhaW4sIERhcmtUaGVtZV9EaWdpdGFsX1JhaW5fQmFja2dyb3VuZF9Qcm9wZXJ0eSwgU2V0QnJpZ2h0bmVzc30gZnJvbSAnZWZmZWN0cy9kYXJrLWR5bmFtaWMtZGlnaXRhbC1yYWluJztcbmltcG9ydCB7IER5bmFtaWNFZmZlY3RFbnVtIH0gZnJvbSAnY29tbW9uJztcbmltcG9ydCB7IER5bmFtaWNCYWNrZ3JvdW5kUGx1Z2luU2V0dGluZ3MgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRHluYW1pY0JhY2tncm91bmRQbHVnaW5TZXR0aW5ncyA9IHtcblx0ZHluYW1pY0VmZmVjdDogRHluYW1pY0VmZmVjdEVudW0uRGFya19TdGFyU2t5LFxuXHRkaWdpdGFsUmFpbkJyaWdodG5lc3M6IDAuNyxcblx0ZW5hYmxlRHluYW1pY0VmZmVjdDogdHJ1ZSxcblx0YmFja2dyb3VuZEltYWdlRmlsZTpcIlwiLFxuXHRibHVyOjBcbn0gXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIER5bmFtaWNCYWNrZ3JvdW5kUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IER5bmFtaWNCYWNrZ3JvdW5kUGx1Z2luU2V0dGluZ3M7XG5cdHByZUR5bmFtaWNFZmZlY3Q6IER5bmFtaWNFZmZlY3RFbnVtO1xuXHRwcmVCYWNrZ3JvdWRJbWFnZUZpbGU6IGJvb2xlYW47XG5cdGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudHxudWxsO1xuXHR3YWxscGFwZXJDb3ZlcjogSFRNTERpdkVsZW1lbnQ7XG5cdFxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJsb2FkaW5nIGR5bmFtaWMgYmFja2dyb3VuZCBwbHVnaW4uLi5cIik7XG5cblx0XHR0aGlzLnByZUR5bmFtaWNFZmZlY3QgPSBEeW5hbWljRWZmZWN0RW51bS5Vbmtub3duO1xuXHRcdFxuXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBEeW5hbWljQmFja2dyb3VuZFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcblx0XHRcdHRoaXMuQWRkRHluYW1pY0JhY2tncm91bmRDb250YWluZXIoKTtcblxuXHRcdFx0dGhpcy5TZXREeW5hbWljQmFja2dyb3VuZENvbnRhaW5lckJnUHJvcGVydHkoKTtcblxuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5lbmFibGVEeW5hbWljRWZmZWN0ID09IHRydWUpe1xuXHRcdFx0XHR0aGlzLkFkZER5bmFtaWNCYWNrZ3JvdW5kRWZmZWN0KHRoaXMuc2V0dGluZ3MuZHluYW1pY0VmZmVjdCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBXaGVuIHJlZ2lzdGVyaW5nIGludGVydmFscywgdGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgY2xlYXIgdGhlIGludGVydmFsIHdoZW4gdGhlIHBsdWdpbiBpcyBkaXNhYmxlZC5cblx0XHQvL3RoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gY29uc29sZS5sb2coJ3NldEludGVydmFsJyksIDUgKiA2MCAqIDEwMDApKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGNvbnNvbGUubG9nKFwidW5sb2FkaW5nIGR5bmFtaWMgYmFja2dyb3VuZCBwbHVnaW4uLi5cIik7XG5cblx0XHR0aGlzLlJlbW92ZUR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKCk7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdEFkZER5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKCl7XG4gIFx0bGV0IGRpdl9yb290ID0gYXBwLndvcmtzcGFjZS5jb250YWluZXJFbC5maW5kKFwiZGl2LndvcmtzcGFjZSA+IGRpdi5tb2Qtcm9vdFwiKTtcblx0XHRcblx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyID0gbnVsbDtcblxuICBcdGlmIChkaXZfcm9vdCkge1xuICAgIFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lciA9IGRpdl9yb290LmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInJoLW9ic2lkaWFuLWR5bmFtaWMtYmFja2dyb3VuZC1jb250YWluZXJcIiB9KTtcblxuXHRcdFx0dGhpcy53YWxscGFwZXJDb3ZlciA9IHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwicmgtd2FsbHBhcGVyLWNvdmVyXCIgfSk7XG5cblx0XHRcdHRoaXMuU2V0V2FsbHBhcGVyQmx1cigpO1xuICBcdH1cblx0fVxuXG5cdFNldFdhbGxwYXBlckJsdXIoKXtcblx0XHRsZXQgdmFsdWUgPSBcImJsdXIoXCIrdGhpcy5zZXR0aW5ncy5ibHVyLnRvU3RyaW5nKCkrXCJweClcIjtcblx0XHR0aGlzLndhbGxwYXBlckNvdmVyLnN0eWxlLnNldFByb3BlcnR5KFwiZmlsdGVyXCIsdmFsdWUpO1xuXHR9XG5cblx0UmVtb3ZlRHluYW1pY0JhY2tncm91bmRDb250YWluZXIoKXtcblx0XHRpZiAodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcilcblx0XHR7XG5cdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lciA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgU2V0RHluYW1pY0JhY2tncm91bmRDb250YWluZXJCZ1Byb3BlcnR5KCl7XG5cdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIgPT0gbnVsbClcblx0XHRcdHJldHVybjtcblxuXHRcdGxldCBiYWNrZ3JvdW5kSW1hZ2VBbHJlYWR5U2V0ID0gZmFsc2U7XHRcblx0XHRsZXQgdmF1bHRCYXNlUGF0aDogc3RyaW5nO1xuXHRcdGxldCBpbWFnZUZ1bGxGaWxlbmFtZT1cIlwiO1xuXHRcdGxldCBidWZmZXI6IEJ1ZmZlcjtcblx0XHR2YXVsdEJhc2VQYXRoID0gKHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIgYXMgRmlsZVN5c3RlbUFkYXB0ZXIpLmdldEJhc2VQYXRoKCk7XG5cdFx0Ly8gVHJ5IGFic29sdXRlIHBhdGhcblx0XHR0cnkge1xuICAgICAgICBsZXQgdGVzdCA9IGF3YWl0IGZzLnByb21pc2VzLnJlYWRGaWxlKHRoaXMuc2V0dGluZ3MuYmFja2dyb3VuZEltYWdlRmlsZSk7XG4gICAgICAgIGJ1ZmZlciA9IHRlc3Q7XG5cdFx0XHRcdFxuXHRcdFx0XHRpbWFnZUZ1bGxGaWxlbmFtZSA9IFwiYXBwOi8vbG9jYWwvXCIgKyB0aGlzLnNldHRpbmdzLmJhY2tncm91bmRJbWFnZUZpbGU7XG5cbiAgICB9IGNhdGNoKGUpIHsgfVxuXG5cdFx0aWYgKGltYWdlRnVsbEZpbGVuYW1lPT1cIlwiKVxuXHRcdHtcblx0XHRcdC8vVHJ5IHJlbGF0aXZlIHBhdGhcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGxldCBmaWxlRnVsbG5hbWUgPSBwYXRoLmpvaW4odmF1bHRCYXNlUGF0aCwgdGhpcy5zZXR0aW5ncy5iYWNrZ3JvdW5kSW1hZ2VGaWxlKTtcblxuXHRcdFx0XHRmaWxlRnVsbG5hbWUgPSBmaWxlRnVsbG5hbWUucmVwbGFjZSgvXFxcXC9nLCBcIi9cIik7XG5cblx0XHRcdFx0bGV0IHRlc3QgPSBhd2FpdCBmcy5wcm9taXNlcy5yZWFkRmlsZShmaWxlRnVsbG5hbWUpO1xuXHRcdFx0XHRidWZmZXIgPSB0ZXN0O1xuXHRcdFx0XHRcblx0XHRcdFx0aW1hZ2VGdWxsRmlsZW5hbWUgPSBcImFwcDovL2xvY2FsL1wiICsgZmlsZUZ1bGxuYW1lO1xuXG5cdFx0XHR9IGNhdGNoKGUpIHsgfVxuXHRcdH1cblx0XHRcblx0XHRpZiAoaW1hZ2VGdWxsRmlsZW5hbWUhPVwiXCIpe1xuXHRcdFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmRcIixcInVybChcXFwiXCIgKyBpbWFnZUZ1bGxGaWxlbmFtZSArIFwiXFxcIlwiKTtcblx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kLXNpemVcIixcImNvdmVyXCIpO1xuXHRcdFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmQtcG9zaXRpb25cIixcImNlbnRlclwiKTtcblxuXHRcdFx0YmFja2dyb3VuZEltYWdlQWxyZWFkeVNldCA9IHRydWU7XG5cdFx0fVxuXHRcdGVsc2V7XG5cdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYmFja2dyb3VuZFwiKTtcblx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJiYWNrZ3JvdW5kLXNpemVcIik7XG5cdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYmFja2dyb3VuZC1wb3NpdGlvblwiKTtcblx0XHR9XG5cblx0XHRpZiAoYmFja2dyb3VuZEltYWdlQWxyZWFkeVNldCA9PSBmYWxzZSl7XG5cdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYmFja2dyb3VuZFwiKTtcblx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJiYWNrZ3JvdW5kLXNpemVcIik7XG5cdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYmFja2dyb3VuZC1wb3NpdGlvblwiKTtcblxuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5lbmFibGVEeW5hbWljRWZmZWN0ID09IGZhbHNlKVxuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdHN3aXRjaCh0aGlzLnNldHRpbmdzLmR5bmFtaWNFZmZlY3Qpe1xuXHRcdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfU3RhclNreTpcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX1Nub3c6XG5cdFx0XHRcdFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmRcIiwgRGFya1RoZW1lX1Nub3dfQmFja2dyb3VuZF9Qcm9wZXJ0eSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19SYWluOlxuXHRcdFx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kXCIsIERhcmtUaGVtZV9SYWluX0JhY2tncm91bmRfUHJvcGVydHkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfUmFuZG9tQ2lyY2xlOlxuXHRcdFx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kXCIsIERhcmtUaGVtZV9SYW5kb21fQ2lyY2xlX0JhY2tncm91bmRfUHJvcGVydHkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkxpZ2h0X1JhbmRvbUNpcmNsZTpcblx0XHRcdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZFwiLCBMaWdodFRoZW1lX1JhbmRvbV9DaXJjbGVfQmFja2dyb3VuZF9Qcm9wZXJ0eSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uTGlnaHRfV2F2ZTpcblx0XHRcdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZFwiLCBMaWdodFRoZW1lX1dhdmVfQmFja2dyb3VuZF9Qcm9wZXJ0eSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19EaWdpdGFsUmFpbjpcblx0XHRcdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZFwiLCBEYXJrVGhlbWVfRGlnaXRhbF9SYWluX0JhY2tncm91bmRfUHJvcGVydHkpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdFNldERpZ2l0YWxSYWluQnJpZ2h0bmVzc0hlbHBlcigpe1xuXHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKXtcblx0XHRcdFNldEJyaWdodG5lc3ModGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lciwgdGhpcy5zZXR0aW5ncy5kaWdpdGFsUmFpbkJyaWdodG5lc3MpO1xuXHRcdH1cblx0fVxuXG5cdEFkZER5bmFtaWNCYWNrZ3JvdW5kRWZmZWN0KGVmZmVjdDogRHluYW1pY0VmZmVjdEVudW0pIHtcblx0XHRzd2l0Y2goZWZmZWN0KXtcblx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19TdGFyU2t5OlxuXHRcdFx0XHRpZiAodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcilcblx0XHRcdFx0XHRBZGRfU3RhclNreSh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfU25vdzpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXG5cdFx0XHRcdFx0QWRkX1Nub3codGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX1JhaW46XG5cdFx0XHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKVxuXHRcdFx0XHRcdEFkZF9SYWluKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19EaWdpdGFsUmFpbjpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRBZGRfRGlnaXRhbFJhaW4odGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG5cdFx0XHRcdFx0dGhpcy5TZXREaWdpdGFsUmFpbkJyaWdodG5lc3NIZWxwZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19SYW5kb21DaXJjbGU6XG5cdFx0XHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKVxuXHRcdFx0XHRcdEFkZF9SYW5kb21DaXJjbGUodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5MaWdodF9SYW5kb21DaXJjbGU6XG5cdFx0XHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKVx0XG5cdFx0XHRcdFx0QWRkX1JhbmRvbUNpcmNsZV9MaWdodCh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkxpZ2h0X1dhdmU6XG5cdFx0XHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKVxuXHRcdFx0XHRcdEFkZF9XYXZlX0xpZ2h0KHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG4gIH07XG5cblx0UmVtb3ZlRHluYW1pY0JhY2tncm91bmRFZmZlY3QoZWZmZWN0OkR5bmFtaWNFZmZlY3RFbnVtKXtcblx0XHRpZiAoZWZmZWN0ID09IER5bmFtaWNFZmZlY3RFbnVtLlVua25vd24pXG5cdFx0XHRyZXR1cm47XG5cblx0XHRzd2l0Y2goZWZmZWN0KVxuXHRcdHtcblx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19TdGFyU2t5OlxuXHRcdFx0XHRpZiAodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcilcblx0XHRcdFx0XHRSZW1vdmVfU3RhclNreSh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfU25vdzpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXG5cdFx0XHRcdFx0UmVtb3ZlX1Nub3codGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX1JhaW46XG5cdFx0XHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKVxuXHRcdFx0XHRcdFJlbW92ZV9SYWluKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19EaWdpdGFsUmFpbjpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXG5cdFx0XHRcdFx0UmVtb3ZlX0RpZ2l0YWxSYWluKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19SYW5kb21DaXJjbGU6XG5cdFx0XHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKVxuXHRcdFx0XHRcdFJlbW92ZV9SYW5kb21DaXJjbGUodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5MaWdodF9SYW5kb21DaXJjbGU6XG5cdFx0XHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKVxuXHRcdFx0XHRcdFJlbW92ZV9SYW5kb21DaXJjbGVfTGlnaHQodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5MaWdodF9XYXZlOlxuXHRcdFx0XHRpZiAodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcilcblx0XHRcdFx0XHRSZW1vdmVfV2F2ZV9MaWdodCh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuICB9O1xufVxuXG5jbGFzcyBEeW5hbWljQmFja2dyb3VuZE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5zZXRUZXh0KCdXb2FoIScpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuY2xhc3MgRHluYW1pY0JhY2tncm91bmRTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogRHluYW1pY0JhY2tncm91bmRQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRHluYW1pY0JhY2tncm91bmRQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnRHluYW1pYyBCYWNrZ3JvdW5kIFBsdWdpbiAtIFNldHRpbmdzJ30pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRHluYW1pYyBFZmZlY3QnKVxuXHRcdFx0LnNldERlc2MoJ1NlbGVjdCBhIGR5bmFtaWMgZWZmZWN0Jylcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG4gICAgICAgIGRyb3Bkb3duXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihEeW5hbWljRWZmZWN0RW51bS5EYXJrX0RpZ2l0YWxSYWluLnRvU3RyaW5nKCksIFwiRGFyayAtIE1hdHJpeCAvIERpZ2l0YWwgUmFpblwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oRHluYW1pY0VmZmVjdEVudW0uRGFya19SYWluLnRvU3RyaW5nKCksIFwiRGFyayAtIFJhaW5cIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfUmFuZG9tQ2lyY2xlLnRvU3RyaW5nKCksIFwiRGFyayAtIFJhbmRvbSBDaXJjbGVcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfU25vdy50b1N0cmluZygpLCBcIkRhcmsgLSBTbm93XCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihEeW5hbWljRWZmZWN0RW51bS5EYXJrX1N0YXJTa3kudG9TdHJpbmcoKSwgXCJEYXJrIC0gU3RhciBTa3lcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKER5bmFtaWNFZmZlY3RFbnVtLkxpZ2h0X1JhbmRvbUNpcmNsZS50b1N0cmluZygpLCBcIkxpZ2h0IC0gUmFuZG9tIENpcmNsZVwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oRHluYW1pY0VmZmVjdEVudW0uTGlnaHRfV2F2ZS50b1N0cmluZygpLCBcIkxpZ2h0IC0gV2F2ZVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5keW5hbWljRWZmZWN0LnRvU3RyaW5nKCkpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4ucHJlRHluYW1pY0VmZmVjdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmR5bmFtaWNFZmZlY3Q7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5keW5hbWljRWZmZWN0ID0gTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgICAgIFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLlJlbW92ZUR5bmFtaWNCYWNrZ3JvdW5kRWZmZWN0KHRoaXMucGx1Z2luLnByZUR5bmFtaWNFZmZlY3QpO1xuXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRHluYW1pY0VmZmVjdCA9PSB0cnVlKVxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5BZGREeW5hbWljQmFja2dyb3VuZEVmZmVjdCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5keW5hbWljRWZmZWN0KTtcblxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uU2V0RHluYW1pY0JhY2tncm91bmRDb250YWluZXJCZ1Byb3BlcnR5KCk7XG5cblx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgIH0pXG4gICAgICApO1x0XG5cblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHluYW1pY0VmZmVjdCA9PSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX0RpZ2l0YWxSYWluKVxuXHRcdHtcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJCcmlnaHRuZXNzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIlNldCBEaWdpdGFsIFJhaW4gQnJpZ2h0bmVzcy5cIilcblx0XHRcdC5hZGRTbGlkZXIodGMgPT4ge1xuXHRcdFx0XHR0Yy5zZXREeW5hbWljVG9vbHRpcCgpXG5cdFx0XHRcdFx0LnNldExpbWl0cygwLjUwLCAxLCAwLjAxKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaWdpdGFsUmFpbkJyaWdodG5lc3MpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRpZ2l0YWxSYWluQnJpZ2h0bmVzcyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uU2V0RGlnaXRhbFJhaW5CcmlnaHRuZXNzSGVscGVyKCk7XG5cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XHRcblx0XHR9XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdFbmFibGUgRHluYW1pYyBFZmZlY3QnKVxuXHRcdFx0LnNldERlc2MoJ0VuYWJsZSBvciBkaXNhYmxlIGR5bmFtaWMgZWZmZWN0Jylcblx0XHRcdC5hZGRUb2dnbGUoKHRjKSA9PiBcblx0XHRcdFx0dGMuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRHluYW1pY0VmZmVjdClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRHluYW1pY0VmZmVjdCA9IHZhbHVlO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUR5bmFtaWNFZmZlY3QgPT0gZmFsc2Upe1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uUmVtb3ZlRHluYW1pY0JhY2tncm91bmRFZmZlY3QodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHluYW1pY0VmZmVjdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5BZGREeW5hbWljQmFja2dyb3VuZEVmZmVjdCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5keW5hbWljRWZmZWN0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1x0XHRcdFx0XG5cblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1N0YXRpYyBXYWxscGFwZXIgSW1hZ2UnKVxuXHRcdFx0LnNldERlc2MoXCJUaGlzIGxvY2FsIGltYWdlIGZpbGUuIFVzZSBhbiBhYnNvbHV0ZSBwYXRoIG9yIGEgcGF0aCByZWxhdGl2ZSB0byB0aGUgdmF1bHQuXCIpXG5cdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+XG4gICAgICAgIHRleHRcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFja2dyb3VuZEltYWdlRmlsZSlcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJFeGFtcGxlOiBDOlxcXFxVc2Vyc1xcXFxFeGFtcGxlXFxcXERvY3VtZW50c1xcXFxtb29uLmpwZyBvciAvaG9tZS91c2VyL2ltYWdlcy9tb29uLmpwZyBvciBhdHRhY2htZW50cy9tb29uLmpwZ1wiIClcblx0XHRcdFx0XHQudGhlbigoY2IpID0+IHtcblx0XHRcdFx0XHRcdGNiLmlucHV0RWwuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcblx0XHRcdFx0XHRcdGNiLmlucHV0RWwucm93cyA9IDU7XG5cdFx0XHRcdFx0fSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZ3JvdW5kSW1hZ2VGaWxlID0gdmFsdWU7XG5cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5TZXREeW5hbWljQmFja2dyb3VuZENvbnRhaW5lckJnUHJvcGVydHkoKTtcblx0XHRcdFx0XHR9KVxuICAgICAgKTtcblxuXHRcdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQmx1cicpXG5cdFx0XHQuc2V0RGVzYygnVGhlIGJsdXJyaW5lc3Mgb2YgdGhlIHdhbGxwYXBlciwgMCBtZWFucyBubyBibHVyLicpXG5cdFx0XHQuYWRkU2xpZGVyKHRjID0+IHtcblx0XHRcdFx0dGMuc2V0RHluYW1pY1Rvb2x0aXAoKVxuXHRcdFx0XHRcdC5zZXRMaW1pdHMoMCwgMTAwLCAxKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ibHVyKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ibHVyID0gdmFsdWU7XG5cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5TZXRXYWxscGFwZXJCbHVyKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcdFxuXHR9XG59XG4iLCAiLy8gQWRkIFN0YXIgU2t5IGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGRhcmsgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBBZGRfU3RhclNreShkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpe1xuICBpZiAoZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpIHtcbiAgICBsZXQgZWZmZWN0ID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib2RiLWR0LXN0YXItc2t5LWR5bmFtaWMtZWZmZWN0XCIgfSk7XG5cbiAgICBlZmZlY3QuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwic3Rhci1za3lcIiB9KTtcbiAgfVxufVxuXG4vLyBSZW1vdmUgU3RhciBTa3kgZHluYW1pYyBiYWNrZ3JvdW5kIGVmZmVjdCBmb3IgZGFyayB0aGVtZVxuZXhwb3J0IGZ1bmN0aW9uIFJlbW92ZV9TdGFyU2t5KGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5maW5kKFwiZGl2Lm9kYi1kdC1zdGFyLXNreS1keW5hbWljLWVmZmVjdFwiKTtcbiAgaWYgKGVmZmVjdCkge1xuICAgIGVmZmVjdC5yZW1vdmUoKTtcbiAgfVxufTsiLCAiZXhwb3J0IGxldCBEYXJrVGhlbWVfU25vd19CYWNrZ3JvdW5kX1Byb3BlcnR5ID0gXCJyYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSBhdCBib3R0b20sICMxYjI3MzUgMjAlLCAjMDkwYTBmIDEwMCUpXCI7XG5cbi8vIEFkZCBTbm93IGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGRhcmsgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBBZGRfU25vdyhkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpe1xuICBpZiAoZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpIHtcbiAgICBsZXQgZWZmZWN0ID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib2RiLWR0LXNub3ctZHluYW1pYy1lZmZlY3RcIiB9KTtcblxuICAgIGVmZmVjdC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJzbm93XCIgfSk7XG4gIH1cbn1cblxuLy8gUmVtb3ZlIFNub3cgZHluYW1pYyBiYWNrZ3JvdW5kIGVmZmVjdCBmb3IgZGFyayB0aGVtZVxuZXhwb3J0IGZ1bmN0aW9uIFJlbW92ZV9Tbm93KGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5maW5kKFwiZGl2Lm9kYi1kdC1zbm93LWR5bmFtaWMtZWZmZWN0XCIpO1xuICBpZiAoZWZmZWN0KSB7XG4gICAgZWZmZWN0LnJlbW92ZSgpO1xuICB9XG59OyIsICJleHBvcnQgbGV0IERhcmtUaGVtZV9SYWluX0JhY2tncm91bmRfUHJvcGVydHkgPSBcInJhZGlhbC1ncmFkaWVudChlbGxpcHNlIGF0IGJvdHRvbSwgIzFiMjczNSAyMCUsICMwOTBhMGYgMTAwJSlcIjtcblxuLy8gQWRkIFJhaW4gZHluYW1pYyBiYWNrZ3JvdW5kIGVmZmVjdCBmb3IgZGFyayB0aGVtZVxuZXhwb3J0IGZ1bmN0aW9uIEFkZF9SYWluKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGlmIChkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcikge1xuICAgIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvZGItZHQtcmFpbi1keW5hbWljLWVmZmVjdFwiIH0pO1xuXG4gICAgbGV0IGRyb3AxID0gJzxzdmcgY2xhc3M9XCJyYWluX19kcm9wXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluXCIgdmlld0JveD1cIjAgMCA1IDUwXCIgc3R5bGU9XCItLXg6IDM0OyAtLXk6IDkwOyAtLW86IDAuNjY1NDE1MzgwNDY4MzI2NDsgLS1hOiAwLjk5MTc3MTAxNTY5NDU4OTY7IC0tZDogLTAuODA0MzQyNTc0MDc0NDgxNDsgLS1zOiAwLjY5NTExNDIzNDk4MDQwOTZcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDIgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogNDk7IC0teTogODE7IC0tbzogMC4wMzE3NTA5OTQxNTA1NDY1OyAtLWE6IDEuNDE1MDM0MDc5NjA0MTk0NzsgLS1kOiAtMC44OTc3MDYwNDc1OTkwNjE1OyAtLXM6IDAuMzU2MDkyNjAzODc1ODk3NlwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wMyA9ICc8c3ZnIGNsYXNzPVwicmFpbl9fZHJvcFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWluWU1pblwiIHZpZXdCb3g9XCIwIDAgNSA1MFwiIHN0eWxlPVwiLS14OiA5MzsgLS15OiA2OyAtLW86IDAuNjUzNjE0NzE2NDIwNTIyOTsgLS1hOiAxLjMxNTA5ODA3MjIwODI1NDg7IC0tZDogLTAuNTQ5MzYzNzE3NzgyMTUzMzsgLS1zOiAwLjU1NTIxMzIzNzAyNDcxMDNcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDQgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogMjI7IC0teTogMTM7IC0tbzogMC40MjU5NjAwMDA0MDc4OTQ3OyAtLWE6IDAuNTg1NDI4NTE4NTM3NzczNDsgLS1kOiAtMC41MjkzMTM1MDAxMTgwMjU4OyAtLXM6IDAuMzUyNjc2MDg3ODMyNTkyNVwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wNSA9ICc8c3ZnIGNsYXNzPVwicmFpbl9fZHJvcFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWluWU1pblwiIHZpZXdCb3g9XCIwIDAgNSA1MFwiIHN0eWxlPVwiLS14OiAzNjsgLS15OiAyMDsgLS1vOiAwLjU2MDk0NDg0NTkwNjM2NjU7IC0tYTogMS40MjUyOTU2MTMzNzExMTE3OyAtLWQ6IC0wLjc2OTAxMzE1OTQ5ODYyNTE7IC0tczogMC42Njg5MjIzNDcxNTk5OTQxXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNIDIuNSwwIEMgMi42OTQ5NDU4LDMuNTM5MjAxNyAzLjM0NDc2NSwyMC41MjQ1NzEgNC40NDk0NTc3LDMwLjk1NTkgNS43NTUxMzU3LDQyLjY2Njc1MyA0LjU5MTU2ODUsNTAgMi41LDUwIDAuNDA4NDMxNTIsNTAgLTAuNzU1MTM1NjUsNDIuNjY2NzUzIDAuNTUwNTQyMzQsMzAuOTU1OSAxLjY1NTIzNSwyMC41MjQ1NzEgMi4zMDUwNTQyLDMuNTM5MjAxNyAyLjUsMCBaXCI+PC9wYXRoPjwvc3ZnPic7XG4gICAgbGV0IGRyb3A2ID0gJzxzdmcgY2xhc3M9XCJyYWluX19kcm9wXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluXCIgdmlld0JveD1cIjAgMCA1IDUwXCIgc3R5bGU9XCItLXg6IDQ4OyAtLXk6IDU0OyAtLW86IDAuMjg1MDYwMTM0MzE4MDA1NzsgLS1hOiAxLjQyMzU2MzUwMjYwMTg2ODM7IC0tZDogLTAuNDUyMzU2ODQyNzU5ODE3OTsgLS1zOiAwLjE5NzYzMzMzNzY2NTcwMzEyXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNIDIuNSwwIEMgMi42OTQ5NDU4LDMuNTM5MjAxNyAzLjM0NDc2NSwyMC41MjQ1NzEgNC40NDk0NTc3LDMwLjk1NTkgNS43NTUxMzU3LDQyLjY2Njc1MyA0LjU5MTU2ODUsNTAgMi41LDUwIDAuNDA4NDMxNTIsNTAgLTAuNzU1MTM1NjUsNDIuNjY2NzUzIDAuNTUwNTQyMzQsMzAuOTU1OSAxLjY1NTIzNSwyMC41MjQ1NzEgMi4zMDUwNTQyLDMuNTM5MjAxNyAyLjUsMCBaXCI+PC9wYXRoPjwvc3ZnPic7XG4gICAgbGV0IGRyb3A3ID0gJzxzdmcgY2xhc3M9XCJyYWluX19kcm9wXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluXCIgdmlld0JveD1cIjAgMCA1IDUwXCIgc3R5bGU9XCItLXg6IDE2OyAtLXk6IDQ7IC0tbzogMC40MjI0MzY3NDkyMTY0OTkzOyAtLWE6IDAuOTI5MTU3MDI1MTU3MzQyMjsgLS1kOiAtMC43MDcyMjg4NjUwMDcyOTMxOyAtLXM6IDAuMzIyNTAwNTk4Njk2ODc4M1wiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wOCA9ICc8c3ZnIGNsYXNzPVwicmFpbl9fZHJvcFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWluWU1pblwiIHZpZXdCb3g9XCIwIDAgNSA1MFwiIHN0eWxlPVwiLS14OiA1MDsgLS15OiA1MjsgLS1vOiAwLjUxNjM3MjQ5NDQ2NDg3MTY7IC0tYTogMC41MTYzNDE3MjUwNzIxMzkyOyAtLWQ6IC0wLjI0NTYyNjc1ODQ0OTA0ODU4OyAtLXM6IDAuNzQ2MjI3NzI0MzE5ODUyN1wiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wOSA9ICc8c3ZnIGNsYXNzPVwicmFpbl9fZHJvcFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWluWU1pblwiIHZpZXdCb3g9XCIwIDAgNSA1MFwiIHN0eWxlPVwiLS14OiAzNTsgLS15OiA2NjsgLS1vOiAwLjMxMjA2NDAyMTc0MjQ0OTc0OyAtLWE6IDAuNjA1OTc0NDM1NjU0MTYzNDsgLS1kOiAwLjM3OTA2NTQ4Nzc5MzI4NTk3OyAtLXM6IDAuNzMwNzQxODY2MjYzMzcxNlwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wMTAgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogNjQ7IC0teTogODE7IC0tbzogMC44MTU4MTAyODA3NTA4NjExOyAtLWE6IDAuNjcyMjcxODY4MjY3MjUwMjsgLS1kOiAwLjI0NDQyMTU3NDc5NTQzNDg7IC0tczogMC44NjY3MjUwMTk1MDQ2NTQ3XCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNIDIuNSwwIEMgMi42OTQ5NDU4LDMuNTM5MjAxNyAzLjM0NDc2NSwyMC41MjQ1NzEgNC40NDk0NTc3LDMwLjk1NTkgNS43NTUxMzU3LDQyLjY2Njc1MyA0LjU5MTU2ODUsNTAgMi41LDUwIDAuNDA4NDMxNTIsNTAgLTAuNzU1MTM1NjUsNDIuNjY2NzUzIDAuNTUwNTQyMzQsMzAuOTU1OSAxLjY1NTIzNSwyMC41MjQ1NzEgMi4zMDUwNTQyLDMuNTM5MjAxNyAyLjUsMCBaXCI+PC9wYXRoPjwvc3ZnPic7XG4gICAgbGV0IGRyb3AxMSA9ICc8c3ZnIGNsYXNzPVwicmFpbl9fZHJvcFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWluWU1pblwiIHZpZXdCb3g9XCIwIDAgNSA1MFwiIHN0eWxlPVwiLS14OiA4ODsgLS15OiAzNTsgLS1vOiAwLjAyNzYyODE1MjUzNDQxNTUzOyAtLWE6IDAuOTU1NTQ2ODc0OTg0MzQ4ODsgLS1kOiAwLjA4OTk2MzE5MDMxNTAwMzc3OyAtLXM6IDAuNzQyODI4MTYxMDg2MTEyOVwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wMTIgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogODg7IC0teTogOTE7IC0tbzogMC42MTAzMTM0ODQ3OTE5ODQ0OyAtLWE6IDAuOTAwMTczNDM0NTUzOTY5ODsgLS1kOiAtMC45MTczNTEwMjE1NzY4MjM7IC0tczogMC4wMDQwNTQyMzk5MTU1ODU0XCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNIDIuNSwwIEMgMi42OTQ5NDU4LDMuNTM5MjAxNyAzLjM0NDc2NSwyMC41MjQ1NzEgNC40NDk0NTc3LDMwLjk1NTkgNS43NTUxMzU3LDQyLjY2Njc1MyA0LjU5MTU2ODUsNTAgMi41LDUwIDAuNDA4NDMxNTIsNTAgLTAuNzU1MTM1NjUsNDIuNjY2NzUzIDAuNTUwNTQyMzQsMzAuOTU1OSAxLjY1NTIzNSwyMC41MjQ1NzEgMi4zMDUwNTQyLDMuNTM5MjAxNyAyLjUsMCBaXCI+PC9wYXRoPjwvc3ZnPic7XG4gICAgbGV0IGRyb3AxMyA9ICc8c3ZnIGNsYXNzPVwicmFpbl9fZHJvcFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWluWU1pblwiIHZpZXdCb3g9XCIwIDAgNSA1MFwiIHN0eWxlPVwiLS14OiA2MjsgLS15OiA1NDsgLS1vOiAwLjI4NTY3OTYyMDgzMTc3Mjk7IC0tYTogMC45MDQ2NTU0MTMxMjQxMTM4OyAtLWQ6IC0wLjEzNjQ1ODA5ODY2NDAwNTE2OyAtLXM6IDAuNTczOTA3OTI0Nzk0NzU1NlwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wMTQgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogMjY7IC0teTogNjc7IC0tbzogMC4zMjQ5Nzc3NTkzOTM3MjkzOyAtLWE6IDEuMDI3NDM1MDY2NDA5MDA3MzsgLS1kOiAtMC44NjA1Njg4MTU5MTIxNjQ3OyAtLXM6IDAuNzE5OTg5MzIxNDUwMDM0MVwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wMTUgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogNzQ7IC0teTogMzk7IC0tbzogMC42MDg1MTc2NzczODY1OTU5OyAtLWE6IDEuMTY0NzMyNDk2MjM4OTA1ODsgLS1kOiAtMC4wODY0MzA0ODUzNDU4Nzk0OTsgLS1zOiAwLjU0NDk0MjE4MDI4NjAyODFcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDE2ID0gJzxzdmcgY2xhc3M9XCJyYWluX19kcm9wXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluXCIgdmlld0JveD1cIjAgMCA1IDUwXCIgc3R5bGU9XCItLXg6IDM7IC0teTogNzg7IC0tbzogMC43NDEzMTU0MjI3OTE3MTA1OyAtLWE6IDAuNzA4MjEzNzE3NTg2NTkxNzsgLS1kOiAwLjkzMTYyOTUzODI2MDUwNjsgLS1zOiAwLjQ4MzM1NDY1NTAwNjQyMjk0XCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNIDIuNSwwIEMgMi42OTQ5NDU4LDMuNTM5MjAxNyAzLjM0NDc2NSwyMC41MjQ1NzEgNC40NDk0NTc3LDMwLjk1NTkgNS43NTUxMzU3LDQyLjY2Njc1MyA0LjU5MTU2ODUsNTAgMi41LDUwIDAuNDA4NDMxNTIsNTAgLTAuNzU1MTM1NjUsNDIuNjY2NzUzIDAuNTUwNTQyMzQsMzAuOTU1OSAxLjY1NTIzNSwyMC41MjQ1NzEgMi4zMDUwNTQyLDMuNTM5MjAxNyAyLjUsMCBaXCI+PC9wYXRoPjwvc3ZnPic7XG4gICAgbGV0IGRyb3BzID0gZHJvcDEgKyBkcm9wMiArIGRyb3AzICsgZHJvcDQgKyBkcm9wNSArIGRyb3A2ICsgZHJvcDcgKyBkcm9wOCArIGRyb3A5ICsgZHJvcDEwO1xuICAgIGRyb3BzICs9IGRyb3AxMSArIGRyb3AxMiArIGRyb3AxMyArIGRyb3AxNCArIGRyb3AxNSArIGRyb3AxNjtcbiAgICBlZmZlY3QuaW5uZXJIVE1MICs9ICBkcm9wcztcbiAgfVxufVxuXG4vLyBSZW1vdmUgUmFpbiBkeW5hbWljIGJhY2tncm91bmQgZWZmZWN0IGZvciBkYXJrIHRoZW1lXG5leHBvcnQgZnVuY3Rpb24gUmVtb3ZlX1JhaW4oZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KXtcbiAgbGV0IGVmZmVjdCA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmZpbmQoXCJkaXYub2RiLWR0LXJhaW4tZHluYW1pYy1lZmZlY3RcIik7XG4gIGlmIChlZmZlY3QpIHtcbiAgICBlZmZlY3QucmVtb3ZlKCk7XG4gIH1cbn0iLCAiZXhwb3J0IGxldCBEYXJrVGhlbWVfUmFuZG9tX0NpcmNsZV9CYWNrZ3JvdW5kX1Byb3BlcnR5ID0gXCJyYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSBhdCBib3R0b20sICMxYjI3MzUgMjAlLCAjMDkwYTBmIDEwMCUpXCI7XG5cbi8vIEFkZCBSYW5kb20gQ2lyY2xlIGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGRhcmsgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBBZGRfUmFuZG9tQ2lyY2xlKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGxldCBlZmZlY3RTY3JpcHQ6IEhUTUxTY3JpcHRFbGVtZW50O1xuXG4gIGlmIChkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcikge1xuICAgIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvZGItZHQtcmFuZG9tLWNpcmNsZS1keW5hbWljLWVmZmVjdFwiIH0pO1xuXG4gICAgZWZmZWN0LmNyZWF0ZUVsKFwiY2FudmFzXCIpO1xuXG4gICAgbGV0IGNvZGUgPSBgXG4gICAgICB2YXIgb2RiX3JhbmRvbV9jaXJjbGVfY3R4O1xuICAgICAgdmFyIG9kYl9yYW5kb21fY2lyY2xlX2dyZDtcblxuICAgICAgZnVuY3Rpb24gT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1N0YXJ0KCkge1xuICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdi5vZGItZHQtcmFuZG9tLWNpcmNsZS1keW5hbWljLWVmZmVjdCBjYW52YXNcIik7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfZ3JkID0gb2RiX3JhbmRvbV9jaXJjbGVfY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIHdpbmRvdy5pbm5lckhlaWdodCwgMCwgMCk7XG5cbiAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4LmZpbGxTdHlsZSA9IG9kYl9yYW5kb21fY2lyY2xlX2dyZDtcbiAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4LmZpbGxSZWN0KDAsIDAsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0FuaW1hdGUoKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0ZpcmV3b3JrKHgsIHkpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSA1O1xuICAgICAgICB0aGlzLnRpbWUgPSAwO1xuICAgICAgICB0aGlzLmxpZmVzcGFuID0gTWF0aC5yYW5kb20oKSoxODAgKyAxNTA7XG5cbiAgICAgICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5hcmModGhpcy54LCB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLnksIHRoaXMucmFkaXVzLCAwLCAyKk1hdGguUEksIGZhbHNlKTtcbiAgICAgICAgICB2YXIgYWxwaGEgPSAodGhpcy5saWZlc3BhbiAtIHRoaXMudGltZSkvdGhpcy5saWZlc3BhbjtcbiAgICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHguc3Ryb2tlU3R5bGUgPSBcInJnYmEoMjU1LCAyNTUsIDI1NSwgXCIgKyBhbHBoYSArIFwiKVwiO1xuICAgICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5zdHJva2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHRoaXMudGltZSA8IHRoaXMubGlmZXNwYW4pIHtcbiAgICAgICAgICAgIHRoaXMucmFkaXVzICs9IC4yNTtcbiAgICAgICAgICAgIHRoaXMudGltZSArPSAxO1xuICAgICAgICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBmaXJld29ya3MgPSBbXTtcbiAgICAgIHZhciB0aW1lID0gMDtcblxuICAgICAgZnVuY3Rpb24gT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0FuaW1hdGUoKSB7XG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5jbGVhclJlY3QoMCwgMCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5maWxsU3R5bGUgPSBvZGJfcmFuZG9tX2NpcmNsZV9ncmQ7XG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5maWxsUmVjdCgwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aW1lICUgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCArIDQwKSA9PSAwKSB7XG4gICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqd2luZG93LmlubmVyV2lkdGgpO1xuICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKndpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgICAgZmlyZXdvcmtzLnB1c2gobmV3IE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9GaXJld29yayh4LCB5KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmaXJld29ya3MuZm9yRWFjaChmaXJld29yayA9PiB7XG4gICAgICAgICAgZmlyZXdvcmsudXBkYXRlKCk7XG4gICAgICAgICAgaWYgKChmaXJld29yay50aW1lIC0gZmlyZXdvcmsuZXhwbG9zaW9uVGltZSkgPiAyMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaXJld29ya3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKGZpcmV3b3JrID09PSBmaXJld29ya3NbaV0pIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgZmlyZXdvcmtzW2ldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgdGltZSArPSAxO1xuXG4gICAgICAgIGlmIChPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfQW5pbWF0ZSlcbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0FuaW1hdGUpO1xuICAgICAgfVxuXG4gICAgICBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU3RhcnQoKTtcbiAgICBgXG4gICAgZWZmZWN0U2NyaXB0ID0gZWZmZWN0LmNyZWF0ZUVsKFwic2NyaXB0XCIpO1xuICAgIGVmZmVjdFNjcmlwdC50ZXh0Q29udGVudCA9IGNvZGU7XG4gIH1cbn1cblxuLy8gUmVtb3ZlIFJhbmRvbSBDaXJjbGUgZHluYW1pYyBiYWNrZ3JvdW5kIGVmZmVjdCBmb3IgZGFyayB0aGVtZVxuZXhwb3J0IGZ1bmN0aW9uIFJlbW92ZV9SYW5kb21DaXJjbGUoZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KXtcbiAgbGV0IGVmZmVjdCA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmZpbmQoXCJkaXYub2RiLWR0LXJhbmRvbS1jaXJjbGUtZHluYW1pYy1lZmZlY3RcIik7XG4gIGlmIChlZmZlY3QpIHtcbiAgICBlZmZlY3QucmVtb3ZlKCk7XG4gIH1cblxuICBVbmxvYWRfRWZmZWN0X1NjcmlwdCgpO1xufVxuXG5mdW5jdGlvbiBVbmxvYWRfRWZmZWN0X1NjcmlwdCgpXG57XG4gIHdpbmRvd1tcIk9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9TdGFydFwiXSA9IG51bGw7XG4gIHdpbmRvd1tcIk9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9GaXJld29ya1wiXSA9IG51bGw7XG4gIHdpbmRvd1tcIk9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9BbmltYXRlXCJdID0gbnVsbDtcbn0iLCAiZXhwb3J0IGxldCBMaWdodFRoZW1lX1JhbmRvbV9DaXJjbGVfQmFja2dyb3VuZF9Qcm9wZXJ0eSA9IFwibGluZWFyLWdyYWRpZW50KDBkZWcsIHJnYmEoMjU1LDI1NSwyNTUsMSkgNjIlLCByZ2JhKDIzMCwyNDQsMjU1LDEpIDEwMCUpXCI7XG5cbi8vIEFkZCBSYW5kb20gQ2lyY2xlIGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGxpZ2h0IHRoZW1lXG5leHBvcnQgZnVuY3Rpb24gQWRkX1JhbmRvbUNpcmNsZV9MaWdodChkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpe1xuICBsZXQgZWZmZWN0U2NyaXB0OiBIVE1MU2NyaXB0RWxlbWVudDtcblxuICBpZiAoZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpIHtcbiAgICBsZXQgZWZmZWN0ID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib2RiLWx0LXJhbmRvbS1jaXJjbGUtZHluYW1pYy1lZmZlY3RcIiB9KTtcblxuICAgIGVmZmVjdC5jcmVhdGVFbChcImNhbnZhc1wiKTtcblxuICAgIGxldCBjb2RlID0gYFxuICAgICAgdmFyIG9kYl9yYW5kb21fY2lyY2xlX2N0eDtcbiAgICAgIHZhciBvZGJfcmFuZG9tX2NpcmNsZV9ncmQ7XG5cbiAgICAgIGZ1bmN0aW9uIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9TdGFydCgpIHtcbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYub2RiLWx0LXJhbmRvbS1jaXJjbGUtZHluYW1pYy1lZmZlY3QgY2FudmFzXCIpO1xuICAgICAgICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2dyZCA9IG9kYl9yYW5kb21fY2lyY2xlX2N0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCB3aW5kb3cuaW5uZXJIZWlnaHQsIDAsIDApO1xuXG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5maWxsU3R5bGUgPSBvZGJfcmFuZG9tX2NpcmNsZV9ncmQ7XG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5maWxsUmVjdCgwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9BbmltYXRlKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9GaXJld29yayh4LCB5KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMucmFkaXVzID0gNTtcbiAgICAgICAgdGhpcy50aW1lID0gMDtcbiAgICAgICAgdGhpcy5saWZlc3BhbiA9IE1hdGgucmFuZG9tKCkqMTgwICsgMTUwO1xuXG4gICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHguYXJjKHRoaXMueCwgd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy55LCB0aGlzLnJhZGl1cywgMCwgMipNYXRoLlBJLCBmYWxzZSk7XG4gICAgICAgICAgdmFyIGFscGhhID0gKHRoaXMubGlmZXNwYW4gLSB0aGlzLnRpbWUpL3RoaXMubGlmZXNwYW47XG4gICAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4LnN0cm9rZVN0eWxlID0gXCJyZ2JhKDAsIDEyOCwgMjU1LCBcIiArIGFscGhhICsgXCIpXCI7XG4gICAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4LnN0cm9rZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAodGhpcy50aW1lIDwgdGhpcy5saWZlc3Bhbikge1xuICAgICAgICAgICAgdGhpcy5yYWRpdXMgKz0gLjI1O1xuICAgICAgICAgICAgdGhpcy50aW1lICs9IDE7XG4gICAgICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGZpcmV3b3JrcyA9IFtdO1xuICAgICAgdmFyIHRpbWUgPSAwO1xuXG4gICAgICBmdW5jdGlvbiBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfQW5pbWF0ZSgpIHtcbiAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4LmNsZWFyUmVjdCgwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4LmZpbGxTdHlsZSA9IG9kYl9yYW5kb21fY2lyY2xlX2dyZDtcbiAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4LmZpbGxSZWN0KDAsIDAsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRpbWUgJSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwICsgNDApID09IDApIHtcbiAgICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSp3aW5kb3cuaW5uZXJXaWR0aCk7XG4gICAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgICBmaXJld29ya3MucHVzaChuZXcgT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0ZpcmV3b3JrKHgsIHkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpcmV3b3Jrcy5mb3JFYWNoKGZpcmV3b3JrID0+IHtcbiAgICAgICAgICBmaXJld29yay51cGRhdGUoKTtcbiAgICAgICAgICBpZiAoKGZpcmV3b3JrLnRpbWUgLSBmaXJld29yay5leHBsb3Npb25UaW1lKSA+IDIwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcmV3b3Jrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoZmlyZXdvcmsgPT09IGZpcmV3b3Jrc1tpXSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBmaXJld29ya3NbaV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICB0aW1lICs9IDE7XG5cbiAgICAgICAgaWYgKE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9BbmltYXRlKVxuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfQW5pbWF0ZSk7XG4gICAgICB9XG5cbiAgICAgIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9TdGFydCgpO1xuICAgIGBcbiAgICBlZmZlY3RTY3JpcHQgPSBlZmZlY3QuY3JlYXRlRWwoXCJzY3JpcHRcIik7XG4gICAgZWZmZWN0U2NyaXB0LnRleHRDb250ZW50ID0gY29kZTtcbiAgfVxufVxuXG4vLyBSZW1vdmUgUmFuZG9tIENpcmNsZSBkeW5hbWljIGJhY2tncm91bmQgZWZmZWN0IGZvciBsaWdodCB0aGVtZVxuZXhwb3J0IGZ1bmN0aW9uIFJlbW92ZV9SYW5kb21DaXJjbGVfTGlnaHQoZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KXtcbiAgbGV0IGVmZmVjdCA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmZpbmQoXCJkaXYub2RiLWx0LXJhbmRvbS1jaXJjbGUtZHluYW1pYy1lZmZlY3RcIik7XG4gIGlmIChlZmZlY3QpIHtcbiAgICBlZmZlY3QucmVtb3ZlKCk7XG4gIH1cblxuICBVbmxvYWRfRWZmZWN0X1NjcmlwdCgpO1xufVxuXG5mdW5jdGlvbiBVbmxvYWRfRWZmZWN0X1NjcmlwdCgpe1xuICB3aW5kb3dbXCJPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU3RhcnRcIl0gPSBudWxsO1xuICB3aW5kb3dbXCJPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfRmlyZXdvcmtcIl0gPSBudWxsO1xuICB3aW5kb3dbXCJPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfQW5pbWF0ZVwiXSA9IG51bGw7XG59IiwgImV4cG9ydCBsZXQgTGlnaHRUaGVtZV9XYXZlX0JhY2tncm91bmRfUHJvcGVydHkgPSBcImxpbmVhci1ncmFkaWVudCgwZGVnLCByZ2JhKDI1NSwyNTUsMjU1LDEpIDYwJSwgcmdiYSgyMDEsMjMzLDI1NSwxKSAxMDAlKVwiO1xuXG4vLyBBZGQgV2F2ZSBkeW5hbWljIGJhY2tncm91bmQgZWZmZWN0IGZvciBsaWdodCB0aGVtZVxuZXhwb3J0IGZ1bmN0aW9uIEFkZF9XYXZlX0xpZ2h0KGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGxldCBlZmZlY3RTY3JpcHQ6IEhUTUxTY3JpcHRFbGVtZW50O1xuXG4gIGlmIChkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcikge1xuICAgIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvZGItbHQtd2F2ZS1lZmZlY3RcIiB9KTtcblxuICAgIGVmZmVjdC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvY2VhblwiIH0pO1xuXG4gICAgbGV0IGNvZGUgPSBgXG4gICAgICBmdW5jdGlvbiBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU2hvd1dhdmUoKSB7XG4gICAgICAgIHZhciBvY2VhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYub2RiLWx0LXdhdmUtZWZmZWN0IGRpdi5vY2VhblwiKSxcbiAgICAgICAgd2F2ZVdpZHRoID0gMTAsXG4gICAgICAgIHdhdmVDb3VudCA9IE1hdGguZmxvb3Iod2luZG93LmlubmVyV2lkdGgvd2F2ZVdpZHRoKSxcbiAgICAgICAgZG9jRnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgd2F2ZUNvdW50OyBpKyspe1xuICAgICAgICAgIHZhciB3YXZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICB3YXZlLmNsYXNzTmFtZSArPSBcIiB3YXZlLTA3MjNcIjtcbiAgICAgICAgICBkb2NGcmFnLmFwcGVuZENoaWxkKHdhdmUpO1xuICAgICAgICAgIHdhdmUuc3R5bGUubGVmdCA9IGkgKiB3YXZlV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgd2F2ZS5zdHlsZS53ZWJraXRBbmltYXRpb25EZWxheSA9IChpLzEwMCkgKyBcInNcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIG9jZWFuLmFwcGVuZENoaWxkKGRvY0ZyYWcpO1xuICAgICAgfVxuXG4gICAgICBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU2hvd1dhdmUoKTtcbiAgICBgO1xuICAgIGVmZmVjdFNjcmlwdCA9IGVmZmVjdC5jcmVhdGVFbChcInNjcmlwdFwiKTtcbiAgICBlZmZlY3RTY3JpcHQudGV4dENvbnRlbnQgPSBjb2RlO1xuICB9XG59XG5cbi8vIFJlbW92ZSBXYXZlIGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGRhcmsgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVfV2F2ZV9MaWdodChkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpe1xuICBsZXQgZWZmZWN0ID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuZmluZChcImRpdi5vZGItbHQtd2F2ZS1lZmZlY3RcIik7XG4gIGlmIChlZmZlY3QpIHtcbiAgICBlZmZlY3QucmVtb3ZlKCk7XG4gIH1cblxuICBVbmxvYWRfRWZmZWN0X1NjcmlwdCgpO1xufVxuXG5mdW5jdGlvbiBVbmxvYWRfRWZmZWN0X1NjcmlwdCgpe1xuICB3aW5kb3dbXCJPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU2hvd1dhdmVcIl0gPSBudWxsO1xufSIsICJleHBvcnQgbGV0IERhcmtUaGVtZV9EaWdpdGFsX1JhaW5fQmFja2dyb3VuZF9Qcm9wZXJ0eSA9IFwicmFkaWFsLWdyYWRpZW50KGVsbGlwc2UgYXQgYm90dG9tLCAjMWIyNzM1IDIwJSwgIzA5MGEwZiAxMDAlKVwiO1xuXG4vLyBBZGQgRGlnaXRhbCBSYWluIGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGRhcmsgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBBZGRfRGlnaXRhbFJhaW4oZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KXtcbiAgbGV0IGVmZmVjdFNjcmlwdDogSFRNTFNjcmlwdEVsZW1lbnQ7XG5cbiAgaWYgKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKSB7XG4gICAgbGV0IGVmZmVjdCA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm9kYi1kdC1kaWdpdGFsLXJhaW4tZHluYW1pYy1lZmZlY3RcIiB9KTtcblxuICAgIGVmZmVjdC5jcmVhdGVFbChcImNhbnZhc1wiKTtcblxuICAgIGxldCBjb2RlID0gYFxuICAgICAgdmFyIG9kYl9kaWdpdGFsX3JhaW5fY2FudmFzXG4gICAgICB2YXIgb2RiX2RpZ2l0YWxfcmFpbl9jdHg7XG4gICAgICB2YXIgb2RiX2RpZ2l0YWxfcmFpbl9ncmQ7XG4gICAgICB2YXIgb2RiX2RpZ2l0YWxfcmFpbl9kaWdpdGFscyA9IFwiMTAwMTEwMTAxMDExMDEwMTAxMDEwMTAxMDAxMDEwMTAxMDEwMTAxMTEwMTExMTAxMDEwMTAxMDExMDEwMTAxMDEwMTAxMDEwMTExMDAxMDEwMVwiO1xuICAgICAgdmFyIG9kYl9kaWdpdGFsX3JhaW5fZm9udF9zaXplID0gMTU7XG4gICAgICB2YXIgb2RiX2RpZ2l0YWxfcmFpbl9jb2x1bW5zOyAgICAvL251bWJlciBvZiBjb2x1bW5zIGZvciB0aGUgcmFpblxuICAgICAgdmFyIG9kYl9kaWdpdGFsX3JhaW5fZHJvcHMgPSBbXTsgLy9hbiBhcnJheSBvZiBkcm9wcyAtIG9uZSBwZXIgY29sdW1uXG4gICAgICB2YXIgb2RiX2RpZ2l0YWxfcmFpbl9pbnRlcnZhbDtcblxuICAgICAgZnVuY3Rpb24gT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0RyYXcoKXtcbiAgICAgICAgb2RiX2RpZ2l0YWxfcmFpbl9jdHguZmlsbFN0eWxlID0gXCJyZ2JhKDAsIDAsIDAsIDAuMSlcIjtcbiAgICAgICAgb2RiX2RpZ2l0YWxfcmFpbl9jdHguZmlsbFJlY3QoMCwgMCwgb2RiX2RpZ2l0YWxfcmFpbl9jYW52YXMud2lkdGgsIG9kYl9kaWdpdGFsX3JhaW5fY2FudmFzLmhlaWdodCk7XG5cbiAgICAgICAgb2RiX2RpZ2l0YWxfcmFpbl9jdHguZmlsbFN0eWxlID0gXCIjMEYwXCI7XG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY3R4LmZvbnQgPSBvZGJfZGlnaXRhbF9yYWluX2ZvbnRfc2l6ZSArIFwicHggYXJpYWxcIjtcblxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgb2RiX2RpZ2l0YWxfcmFpbl9kcm9wcy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGRpZ2l0YWwgPSBvZGJfZGlnaXRhbF9yYWluX2RpZ2l0YWxzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpvZGJfZGlnaXRhbF9yYWluX2RpZ2l0YWxzLmxlbmd0aCldO1xuXG4gICAgICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2N0eC5maWxsVGV4dChkaWdpdGFsLCBpKm9kYl9kaWdpdGFsX3JhaW5fZm9udF9zaXplLCBvZGJfZGlnaXRhbF9yYWluX2Ryb3BzW2ldKm9kYl9kaWdpdGFsX3JhaW5fZm9udF9zaXplKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYob2RiX2RpZ2l0YWxfcmFpbl9kcm9wc1tpXSpvZGJfZGlnaXRhbF9yYWluX2ZvbnRfc2l6ZSA+IG9kYl9kaWdpdGFsX3JhaW5fY2FudmFzLmhlaWdodCAmJiBNYXRoLnJhbmRvbSgpID4gMC45NzUpXG4gICAgICAgICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fZHJvcHNbaV0gPSAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fZHJvcHNbaV0rKztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU3RhcnQoKSB7XG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdi5vZGItZHQtZGlnaXRhbC1yYWluLWR5bmFtaWMtZWZmZWN0IGNhbnZhc1wiKTtcbiAgICAgICAgb2RiX2RpZ2l0YWxfcmFpbl9jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgb2RiX2RpZ2l0YWxfcmFpbl9jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY3R4ID0gb2RiX2RpZ2l0YWxfcmFpbl9jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2N0eC5nbG9iYWxBbHBoYSA9IDE7XG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwieG9yXCI7XG5cbiAgICAgICAgb2RiX2RpZ2l0YWxfcmFpbl9jb2x1bW5zID0gb2RiX2RpZ2l0YWxfcmFpbl9jYW52YXMud2lkdGgvb2RiX2RpZ2l0YWxfcmFpbl9mb250X3NpemU7XG5cbiAgICAgICAgZm9yKHZhciB4ID0gMDsgeCA8IG9kYl9kaWdpdGFsX3JhaW5fY29sdW1uczsgeCsrKVxuICAgICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fZHJvcHNbeF0gPSAxOyBcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1NldEJyaWdodG5lc3MoYnJpZ2h0bmVzcykge1xuICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2NhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOyAgLy8gY2xlYXIgY2FudmFzXG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwieG9yXCI7XG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY3R4Lmdsb2JhbEFscGhhID0gYnJpZ2h0bmVzcztcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0NsZWFyKCkge1xuICAgICAgICBjbGVhckludGVydmFsKG9kYl9kaWdpdGFsX3JhaW5faW50ZXJ2YWwpO1xuICAgICAgfVxuXG4gICAgICBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU3RhcnQoKTtcbiAgICAgIG9kYl9kaWdpdGFsX3JhaW5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfRHJhdywgODApO1xuICAgIGBcbiAgICBlZmZlY3RTY3JpcHQgPSBlZmZlY3QuY3JlYXRlRWwoXCJzY3JpcHRcIik7XG4gICAgZWZmZWN0U2NyaXB0LnRleHRDb250ZW50ID0gY29kZTtcbiAgfVxufVxuXG4vLyBSZW1vdmUgRGlnaXRhbCBSYWluIGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGRhcmsgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVfRGlnaXRhbFJhaW4oZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KXtcbiAgbGV0IGVmZmVjdCA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmZpbmQoXCJkaXYub2RiLWR0LWRpZ2l0YWwtcmFpbi1keW5hbWljLWVmZmVjdFwiKTtcbiAgaWYgKGVmZmVjdCkge1xuICAgIENhbGxDbGVhcihkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG4gICAgZWZmZWN0LnJlbW92ZSgpO1xuICB9XG5cbiAgVW5sb2FkX0VmZmVjdF9TY3JpcHQoKTtcbn1cblxuZnVuY3Rpb24gVW5sb2FkX0VmZmVjdF9TY3JpcHQoKVxueyAgXG4gIHdpbmRvd1tcIk9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9TdGFydFwiXSA9IG51bGw7XG4gIHdpbmRvd1tcIk9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9EcmF3XCJdID0gbnVsbDtcbiAgd2luZG93W1wiT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0NsZWFyXCJdID0gbnVsbDtcbiAgd2luZG93W1wiT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1NldEJyaWdodG5lc3NcIl0gPSBudWxsO1xufVxuXG5mdW5jdGlvbiBDYWxsQ2xlYXIoZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KXtcbiAgbGV0IGVmZmVjdFNjcmlwdDogSFRNTFNjcmlwdEVsZW1lbnQ7XG5cbiAgbGV0IGVmZmVjdCA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmZpbmQoXCJkaXYub2RiLWR0LWRpZ2l0YWwtcmFpbi1keW5hbWljLWVmZmVjdFwiKTtcblxuICBsZXQgY29kZSA9IGBcbiAgICBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfQ2xlYXIoKTtcbiAgICBgXG5cbiAgZWZmZWN0U2NyaXB0ID0gZWZmZWN0LmNyZWF0ZUVsKFwic2NyaXB0XCIpO1xuICBlZmZlY3RTY3JpcHQudGV4dENvbnRlbnQgPSBjb2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gU2V0QnJpZ2h0bmVzcyhkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQsIGJyaWdodG5lc3M6IG51bWJlcil7XG4gIGxldCBzZXRCcmlnaHRuZXNzU2NyaXB0OiBIVE1MU2NyaXB0RWxlbWVudDtcbiAgbGV0IHNldEJyaWdodG5lc3NTY3JpcHRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuXG4gIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5maW5kKFwiZGl2Lm9kYi1kdC1kaWdpdGFsLXJhaW4tZHluYW1pYy1lZmZlY3RcIik7XG4gIGlmIChlZmZlY3Qpe1xuICAgIGxldCBzZXRCcmlnaHRuZXNzU2NyaXB0Q29udGFpbmVyID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuZmluZChcImRpdi5vZGItZHQtZGlnaXRhbC1yYWluLWR5bmFtaWMtZWZmZWN0IGRpdi5zZXQtYnJpZ2h0bmVzcy1zY3JpcHQtY29udGFpbmVyXCIpO1xuXG4gICAgaWYgKHNldEJyaWdodG5lc3NTY3JpcHRDb250YWluZXIpe1xuICAgICAgc2V0QnJpZ2h0bmVzc1NjcmlwdENvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBzZXRCcmlnaHRuZXNzU2NyaXB0Q29udGFpbmVyID0gZWZmZWN0LmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcImRpdi5zZXQtYnJpZ2h0bmVzcy1zY3JpcHQtY29udGFpbmVyXCIgfSk7XG5cbiAgICBsZXQgY29kZSA9IFwiT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1NldEJyaWdodG5lc3MoXCIgKyBicmlnaHRuZXNzICsgXCIpXCI7XG5cbiAgICBzZXRCcmlnaHRuZXNzU2NyaXB0ID0gc2V0QnJpZ2h0bmVzc1NjcmlwdENvbnRhaW5lci5jcmVhdGVFbChcInNjcmlwdFwiKTtcblxuICAgIHNldEJyaWdodG5lc3NTY3JpcHQudGV4dENvbnRlbnQgPSBjb2RlO1xuICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQWdHOzs7QUNDekYscUJBQXFCLDRCQUEyQztBQUNyRSxNQUFJLDRCQUE0QjtBQUM5QixRQUFJLFNBQVMsMkJBQTJCLFNBQVMsT0FBTyxFQUFFLEtBQUssaUNBQWlDLENBQUM7QUFFakcsV0FBTyxTQUFTLE9BQU8sRUFBRSxLQUFLLFdBQVcsQ0FBQztBQUFBLEVBQzVDO0FBQ0Y7QUFHTyx3QkFBd0IsNEJBQTJDO0FBQ3hFLE1BQUksU0FBUywyQkFBMkIsS0FBSyxvQ0FBb0M7QUFDakYsTUFBSSxRQUFRO0FBQ1YsV0FBTyxPQUFPO0FBQUEsRUFDaEI7QUFDRjs7O0FDZk8sSUFBSSxxQ0FBcUM7QUFHekMsa0JBQWtCLDRCQUEy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
