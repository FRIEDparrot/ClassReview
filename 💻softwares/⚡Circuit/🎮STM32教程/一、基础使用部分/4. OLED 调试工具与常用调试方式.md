---
~
---
# ä¸€ã€OLEDè°ƒè¯•çš„ä½¿ç”¨æ–¹æ³•
æœ¬OLED æ˜¾ç¤ºå±ä¸º128x64çš„åˆ†è¾¨ç‡ã€‚
å¯ä»¥æ˜¾ç¤ºä¸­æ–‡å’Œå›¾åƒç­‰ç­‰ã€‚

å¸¸ç”¨çš„è°ƒè¯•åŒ…æ‹¬ä¸²å£é€šä¿¡è°ƒè¯•ï¼Œ æ˜¾ç¤ºå±è°ƒè¯•å’ŒKeil è°ƒè¯•æ¨¡å¼å•æ­¥è¿è¡Œå’Œè®¾ç½®æ–­ç‚¹ æŸ¥çœ‹å¯„å­˜å™¨ç­‰ç­‰ã€‚
å…¶ä¸­ä¾›ç”µä¸º3-5.5V , 
é€šä¿¡åè®®æ˜¯I2Cåè®®, ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‰çº¿SPIé€šä¿¡åè®®, å‚è€ƒ[[ğŸ’»softwares/âš¡Circuit/ğŸ’»51å•ç‰‡æœºæ•™ç¨‹/5. çº¢å¤–é¥æ§,DS1302æ—¶é’Ÿ, ADè½¬æ¢/DS1302é«˜ç²¾åº¦æ—¶é’Ÿä¸SPIé€šä¿¡|DS1302é«˜ç²¾åº¦æ—¶é’Ÿä¸SPIé€šä¿¡]] 

åŸºæœ¬çš„å‡½æ•°å·²ç»æä¾› : 
![[attachments/Pasted image 20240202165518.png|300]]

| å‡½æ•° | ä½œç”¨ |  |
| ---- | ---- | ---- |
| OLED_Init(); | åˆå§‹åŒ– |  |
| OLED_Clear(); | æ¸…å± |  |
| OLED_ShowChar(1, 1, 'A'); | æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦ |  |
| OLED_ShowString(1, 3, "HelloWorld!"); | æ˜¾ç¤ºå­—ç¬¦ä¸² |  |
| OLED_ShowNum(2, 1, 12345, 5); | æ˜¾ç¤ºåè¿›åˆ¶æ•°å­— |  |
| OLED_ShowSignedNum(2, 7, -66, 2); | æ˜¾ç¤ºæœ‰ç¬¦å·åè¿›åˆ¶æ•°å­— |  |
| OLED_ShowHexNum(3, 1, 0xAA55, 4); | æ˜¾ç¤ºåå…­è¿›åˆ¶æ•°å­— |  |
| OLED_ShowBinNum(4, 1, 0xAA55, 16); | æ˜¾ç¤ºäºŒè¿›åˆ¶æ•°å­— |  |

é¦–å…ˆï¼Œ stm32å¼•è„šä¸Šç”µä¹‹åå¦‚æœä¸åˆå§‹åŒ–é»˜è®¤ä¸ºæµ®ç©ºè¾“å…¥æ¨¡å¼ã€‚ 

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ æ¨¡æ¿ä¸­æä¾›çš„OLED å‡½æ•°çš„è¾“å‡ºå£ä¸ºB12-> SCL; B13->SDA; 

# äºŒã€åœ¨Keil è½¯ä»¶ä¸­ç”µè„‘æ¨¡æ‹ŸSTM32è¿è¡Œè°ƒè¯•

åœ¨Debugä¸­é€‰ç”¨Use Simulator 
![[attachments/Pasted image 20240202171848.png]]
ç„¶åCtrl + F5è¿›å…¥è°ƒè¯•æ¨¡å¼
![[attachments/Pasted image 20240202172121.png]]
æ€»ä½“æ“ä½œå¯ä»¥å‚è€ƒ[[ğŸ’»softwares/âš¡Circuit/ğŸ’»51å•ç‰‡æœºæ•™ç¨‹/1. åŸºç¡€éƒ¨åˆ†/å•ç‰‡æœºåŸºç¡€çŸ¥è¯†ç®€ä»‹#ä½¿ç”¨Keil è®¡ç®—ä»£ç çš„æ‰§è¡Œæ—¶é—´æ–¹æ³•|ä½¿ç”¨Keil è®¡ç®—ä»£ç çš„æ‰§è¡Œæ—¶é—´æ–¹æ³•]]

# ä¸‰ ã€ä½¿ç”¨VSCodeä½¿ç”¨STLinké…åˆOpenOCDè°ƒè¯•çš„é…ç½®æ–¹æ³•
### (1) ç›¸å…³æ’ä»¶ä¸è½¯ä»¶é…ç½®
é¦–å…ˆéœ€è¦åœ¨VsCodeä¸­å®‰è£…Cortex-Debugæ’ä»¶
![[attachments/Pasted image 20240203154830.png|500]]
### (2) ä¸€äº›æ²¡ç”¨çš„ä¸œè¥¿ (ä¸ç”¨ï¼Œ ç›´æ¥è·³ä¸‹ä¸€ä¸ª)
å®‰è£…MSYS2  https://www.msys2.org/, å‚è€ƒ https://blog.csdn.net/B11050729/article/details/131719012 
å®‰è£…ä¹‹åå…ˆæ‰§è¡Œä»£ç : 
```cpp
pacman -S mingw-w64-ucrt-x86_64-gcc
```
å…¶ä¸­ MSYS2çš„æ“ä½œå¯ä»¥å‚è€ƒ https://blog.csdn.net/B11050729/article/details/131719012 

é¦–å…ˆéœ€è¦å®‰è£…ç¼–è¯‘ç¯å¢ƒ 
```bash
pacman -SÂ [mingw-w64](https://so.csdn.net/so/search?q=mingw-w64&spm=1001.2101.3001.7020)-x86_64-toolchain git make libtool pkg-config autoconf automake texinfo wget
```

åœ¨ https://repo.msys2.org/mingw/x86_64/ ä¸Šä¸‹è½½ mingw-w64-x86_64-libusb-1.0.26-1-any.pkg.tar.zst, ç„¶åç”¨MSYS2å®‰è£…è¿™ä¸ªç¼–è¯‘åŒ…
```bash
pacman -U mingw-w64-x86_64-libusb-1.0.26-1-any.pkg.tar.zst
# ä¸‹é¢è¿™ä¸ªç”¨äºæ›´æ–°åŒ…
pacman -Syu
```
å…¶ä¸­åŒ…å«minGW64çš„åŒ…; 
![[attachments/Pasted image 20240203173955.png]]
è¿›å…¥opencd-code ç›®å½•
```bash
cd C:/Users/Parrot/Desktop/Utilities/OpenOCD/openocd-code
./bootstrap
./configure && make 
```
å¦‚æœå‡ºç°æ‰¾ä¸åˆ°cç¼–è¯‘å™¨é”™è¯¯ï¼Œ é¦–å…ˆæ·»åŠ è·¯å¾„åˆ°ç³»ç»Ÿå˜é‡ä¸­:(æ³¨æ„æ˜¯åœ¨ç³»ç»Ÿå˜é‡çš„Pathä¸‹)  
![[attachments/Pasted image 20240203173234.png]]
ç„¶åä½¿ç”¨MINGW64 æ•´ä¸ªé‡å¯, é‡æ–°./bootstrap
![[attachments/Pasted image 20240203175254.png]]
```bash
pacman -SÂ mingw-w64-i686-pkg-config
```
é€šè¿‡ `./configure && make` å¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤º (å¤§é‡çš„), å³ä¸ºç¼–è¯‘æˆåŠŸã€‚
![[attachments/Pasted image 20240203175305.png]]
éœ€è¦è¯´æ˜çš„æ˜¯, è¿™ä¸ªè¿è¡Œopenocd.exe ä¼šæŠ¥é”™æ²¡æœ‰libusbä¾èµ–ã€‚

### (3) å®é™…å®‰è£…
ç›´æ¥ä¸Šå®˜ç½‘ä¸‹è½½ç¼–è¯‘å¥½çš„æ–‡ä»¶: 
https://gnutoolchains.com/arm-eabi/openocd/

openocd-20231002.7z 
è§£å‹åå°† `E:\OpenOCD-20231002-0.12.0\bin` æ·»åŠ åˆ°ç³»ç»Ÿå˜é‡ã€‚ 
ç„¶åè¾“å…¥
![[attachments/Pasted image 20240203182213.png]]
æ­¤æ—¶openocd å®‰è£…æˆåŠŸï¼Œ ç»§ç»­è¾“å…¥æŒ‡å®šç¡¬ä»¶è°ƒè¯•å™¨çš„åè®®æ–‡ä»¶ã€‚
ç„¶ååœ¨`E:\OpenOCD-20231002-0.12.0\share\openocd\scripts`ä¸‹æ–‡ä»¶è¡Œè¾“å…¥cmd , ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤: 
```bash
openocd -f interface\stlink.cfg -f target\stm32f1x.cfg
```

![[attachments/Pasted image 20240203185611.png]]
å¦‚å›¾ï¼Œ åˆ™ç«¯å£3333å·²ç»ç›‘å¬

ç¬¬äºŒæ­¥, ä¸‹è½½ARM-toolChain  https://developer.arm.com/downloads/-/gnu-rm#, ç”¨Windows 10å³å¯
![[attachments/Pasted image 20240203192828.png|700]]
åœ¨å®‰è£…æ—¶å°±åŠ ä¸ŠAdd path to environment variable  
![[attachments/Pasted image 20240203193659.png]]

ç„¶ååœ¨EIDEæ’ä»¶è®¾ç½®ä¸­è¿›è¡Œå¦‚ä¸‹çš„ä¸‰ä¸ªæ’ä»¶é…ç½®:  
1. é…ç½®ARMCC5 å®‰è£…è·¯å¾„ 
![[attachments/Pasted image 20240203191111.png]]
2. ç”±äºKeil å’Œ VsCode ä¸ç»è¿‡é…ç½®åœ¨Targetä¸­äº§ç”Ÿçš„æ–‡ä»¶éƒ½æ˜¯.axf æ–‡ä»¶, å› æ­¤ç¬¬äºŒæ­¥æ˜¯é€‰ä¸­Convert .axf to .elf æˆä¸ºå¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ 
![[attachments/Pasted image 20240203191156.png]] 
3. ç„¶åæ˜¯è®¾ç½®EIDE.Open OCD Exe Path å¦‚å›¾
![[attachments/Pasted image 20240203191406.png]]
4. é…ç½®ARM_GCC è·¯å¾„: 
![[attachments/Pasted image 20240203194312.png]]

æ­¤æ—¶**å†æ¬¡ä½¿ç”¨STLinkç¼–è¯‘ï¼Œ åœ¨Targetä¸­å°±æœ‰elfæ–‡ä»¶ç”Ÿæˆäº†**ã€‚  
![[attachments/Pasted image 20240203191553.png]]

**ç„¶åæ˜¯ä¿®æ”¹** Cortex-Debug çš„æ‰©å±•è®¾ç½®ï¼Œ åœ¨è¿™ä¸ªæ’ä»¶çš„settings.jsonä¸­æ·»åŠ /ä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç (æ³¨æ„ä¸€å®šè¦æ·»åŠ !!!): 
```cpp
"cortex-debug.armToolchainPath": "E:\\GCC_ARM\\10 2021.10\\bin",
"cortex-debug.openocdPath":"E:\\OpenOCD-20231002-0.12.0\\bin\\openocd.exe",
```


ç„¶ååœ¨Flash Configurationsä¸­ï¼Œå°†çƒ§å½•é€‰é¡¹è®¾ç½®ä¸º<mark style="background: transparent; color: red">Stlink</mark>, å¹¶ä¿®æ”¹Chip Config ä¸º stm32f1x.cfg  
![[attachments/Pasted image 20240203195413.png]]
æœ€åæ˜¯Debugé€‰é¡¹ï¼Œ æ³¨æ„Debug å¿…é¡»ä½¿ç”¨Debug with OpenOCD, è¿™æ ·æ‰èƒ½ä¿è¯è°ƒè¯•æˆåŠŸã€‚ 
![[attachments/Pasted image 20240203221726.png]]
æ­¤æ—¶å³å¯æŒ‰ä¸‹F5å¼€å§‹è°ƒè¯•ã€‚  è°ƒè¯•æˆåŠŸã€‚
![[attachments/Pasted image 20240203200327.png]]

å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯, å¿…é¡»æŒ‰ä¸‹ F7å…ˆç¼–è¯‘å®Œæ¯•ä¹‹åï¼Œ æ‰èƒ½è¿›è¡ŒF5çš„Debug 