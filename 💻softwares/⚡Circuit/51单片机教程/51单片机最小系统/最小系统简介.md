将51单片机能够工作的最小的单元即为51单片机的最小系统。

## 51单片机的最小系统
1. **晶振电路**
2. **复位电路**
3. **电源电路**
4. 下载电路

P0口漏极开路 - 接入上拉电阻 

### (1) 晶振电路部分
对于工作范围在0 - 40MHz的单片机, 需要为单片机提供运行的周期
一般选择12 MHz(计算周期时间方便)或者11.0592MHz (适合串行通信)
![[attachments/Pasted image 20231207011314.png|400]]

在晶振两端需要加两个电容 (晶振在<mark style="background: transparent; color: red">起振的一瞬间会产生电感</mark>, 因此需要加两个旁路电容来消除电感的电流等)

一般旁路电容可以选为33pF或者22pF

### (2) 复位电路部分
![[attachments/Pasted image 20231207011853.png|300]]
重要的管口是RST管脚, 由于51单片机是高电平复位, 因此RST维持一段时间高电平之后,

复位包括按键的手动复位和电路开启时的自动复位。按键按下时, 

自动复位是**通过RC的充放电功能完成的**, 在电源开启时, RST首先为高电平, 而充满之后变为低电平。

### (3) 电源电路
STC系列单片机工作范围为 $3.3 - 5.5 V$, 从而可以通过ASM1117-3.3可以接入外部的部分3.3V供电的器件
![[attachments/Pasted image 20231207012509.png]]

如果USB不连接USB供电, 则可以通过P3口接入外部的5V电源

#### (4) 下载电路  
USB 转TTL 的CH340芯片 
![[attachments/Pasted image 20231207013031.png|400]]
我们往往使用**CH340C芯片**(内部自带晶振, 可以节约PCB布局) 

利用USB 的D- 和D+脚进行连接CH340进行通信, 此处用到P5端子, 将单片机和串口通信分开。
但是如果使用无线蓝牙通信, Wifi模块等等, 可以利用串口调试助手来发送串口指令。

在USB与串口模块进行连接。

除此以外, P5的设置还<mark style="background: transparent; color: red">给其他芯片类型的单片机提供了串口下载</mark>。 从而可以将串口的芯片连接到上述脚连接。
**出厂时, RxD-U和TXD-U默认与RxD, TxD 短接**以方便下载程序。

需要注意的是， 单片机的TXD连的是RXD-U, 而RXD连接的是TXD写引脚
![[attachments/Pasted image 20231207014111.png|400]]
串口的接收连接对方的发送(RXD-U  连TXD)。
对方的接收连接到自身的发送(TXD-U连RXD)。

电源处上方的<mark style="background: transparent; color: red">MOS管是控制后端系统电压的</mark>(VCC)。
在RTS#和DTR#处接有三极管, 通过配合Pz-ISP软件将DTR和RTS的电平进行控制, 从而实现电源的切断和打开。
当DTR输出高电平而RTS输出低电平时, 三极管导通, 从而MOS管导通, 从而电源的输出成立。
![[attachments/Pasted image 20231207014829.png|400]]
普中的软件是自动切换RTS和DTR脚的电平实现==自动切换电源==。实现VCC的自动断电重启过程。

提供5V电源, 下载, 串口通信和


