åœ¨ç‹¬ç«‹æŒ‰é”®æ¨¡å—ä¸­, æ¥åˆ°äº†**P30(RXD), P31(TXD), P32, P33**ä¸Šã€‚

å‚è€ƒ[[ğŸ’»softwares/âš¡Circuit/Proteus/1.proteusç•Œé¢ç®€ä»‹å’ŒåŸºæœ¬æ“ä½œ#äºŒã€æ¥çº¿åŸç†|æ¥çº¿åŸç†]], è¾“å…¥å£å’Œè¾“å‡ºå£é»˜è®¤æ˜¯é«˜ç”µå¹³çš„, **å°†æŒ‰é”®æŒ‰ä¸‹ç›¸å½“äºå°†å£æ¥åœ°ç½®äºä½ç”µå¹³**ã€‚

å¯„å­˜å™¨å¯ä»¥å®ç°è¯»å–é«˜ä½ç”µå¹³çš„åŸç†ã€‚

![[attachments/Pasted image 20231203115224.png|700]]

ä¸‹é¢çš„ä»£ç å®šä¹‰çš„æ˜¯**ä½å¯„å­˜å™¨** 
```c
/*------------------------------------------------
P2 Bit Registers
------------------------------------------------*/
sbit P2_0 = 0xA0;
sbit P2_1 = 0xA1;
sbit P2_2 = 0xA2;
sbit P2_3 = 0xA3;
sbit P2_4 = 0xA4;
sbit P2_5 = 0xA5;
sbit P2_6 = 0xA6;
sbit P2_7 = 0xA7;
```
**æ“ä½œä¸Šè¿°çš„æ•°æ®**(8ä½æ•°)åªç»™0,1æ•°æ®, å³å¯ä»¥**å®ç°æ“ä½œç«¯å£çš„é«˜ä½ç”µå¹³çŠ¶æ€**,
å½“æ•´ä½“ä¼ å…¥ä¸€ä¸ªP2æ—¶, éœ€è¦ç»™å®š0xFFç­‰ç­‰, è€Œä»…æ“ä½œä¸€ç«¯å£åªéœ€0,1, ä¾‹å¦‚`P2_0  = 0`æ“ä½œP2ä¸ºä½ç”µå¹³ã€‚
![[attachments/Pasted image 20231203121756.png|600]]

å› æ­¤åªéœ€è¦æ·»åŠ æ£€æµ‹ä»£ç 
```c
	while(1){
		if (P3_1 == 0){
			P2_6 = 1;
			P2_7 = 0;
		}
		else{
			P2_6 = 0;
			P2_7 = 1;
		}
	}
å³é€šè¿‡æ§åˆ¶æŒ‰é”®1æ§åˆ¶6,7çš„äº®ç­
```

éœ€è¦æ³¨æ„æŒ‰é”®é¡ºåºå¹¶ä¸ç›¸åŒã€‚

æœ€ç®€å•çš„LEDç¯å·¦å³ç§»åŠ¨ä»£ç å¦‚ä¸‹:
```c
void ShiftLEDleft(){
	bool pre = P2_0;
	P2_0 = P2_1;
	P2_1 = P2_2;
	P2_2 = P2_3;
	P2_3 = P2_4;
	P2_4 = P2_5;
	P2_5 = P2_6;
	P2_6 = P2_7;
	P2_7 = pre;
}

void ShiftLEDright(){
    bool pre = P2_7;
    P2_7 = P2_6;
	P2_6 = P2_5;
	P2_5 = P2_4;
	P2_4 = P2_3;
	P2_3 = P2_2;
	P2_2 = P2_1; 
	P2_1 = P2_0;
	P2_0 = pre;
}
```

Cè¯­è¨€ä¸­, å¯¹äºå¤šä½çš„è¿ç®—, æœ‰:
```c
 & æŒ‰ä½ä¸è¿ç®—
 |  æŒ‰ä½æˆ–è¿ç®—
 ^ æŒ‰ä½å¼‚æˆ–è¿ç®— 
 ~ æŒ‰ä½éè¿ç®—
```

# åŸºæœ¬æŒ‰é’®æ“ä½œ
51å•ç‰‡æœºä¸­ä½¿ç”¨ç±»å‹sbit (single bit )æ¥è¿›è¡ŒæŒ‰é’®çš„è®¾ç½®
ä¸€èˆ¬ç‚¹ä¸€æ¬¡æ“ä½œä¸€æ¬¡çš„æ–¹æ³•å¦‚ä¸‹
æ³¨æ„éœ€è¦å…ˆDelay(10)æ¥é˜²æŠ–
```c
sbit btn2 = P3^0;
if (!btn2) { // add the number when the button is pressed
			Delay(10);
			if (!btn2){
				num = 0; // return the num to zero 
				while (!btn2); // then do nothing until next press 
			}
		}
```

å¦‚æœéœ€è¦è¿›è¡Œè®¡æ—¶, åˆ™å¯ä»¥
```c
sbit btn1 = P3^1;

if (!btn1) {
			Delay(10);
			if(!btn1){
				unsigned int xms = 0;
					while(!btn1){  // count in the range 5000 
						Delay(1); 
						if (xms< 5000) xms ++;
					}
					if (xms < 600) {
						if (num < 255) num++;
					}
					else{
						if(num > 0) num--;
					}
					while(!btn1); // then do nothing until next press 
			}
		}
```


å¦å¤–å†™ä¸€ä¸ªç”¨äºå¾ªç¯ç§»ä½çš„å‡½æ•°, å³å°†ç›®å‰çš„æ•°å­—ç®—å‡ºç§»ä½ä¹‹åçš„åè¿›åˆ¶æ•°, æ³¨æ„enumçš„ç”¨æ³•: 
```c
enum Dir{
	left,
	right
};

int ShiftNum(int num, enum Dir d){
	int n = num;
	int n0, n1, n2, n3, n4, n5, n6, n7;
	int res = 0;

	n0 = n % 2;  n = n / 2;
	n1 = n % 2;  n = n / 2;
	n2 = n % 2;  n = n / 2;
	n3 = n % 2;  n = n / 2;
	n4 = n % 2;  n = n / 2;
	n5 = n % 2;  n = n / 2;
	n6 = n % 2;  n = n / 2;
	n7 = n % 2;  n = n / 2;

	if (d == left){
		res = n7 + n0 * 2 + n1 * 4 + n2 * 8 + n3 * 16 + n4 * 32 + n5 * 64 + n6 * 128;
	}
	else if (d == right){
		res = n1 + n2 * 2 + n3 * 4 + n4 * 8 + n5 * 16 + n6 * 32 + n7 * 64 + n0 * 128;
	}
	return res;
}

```


å¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨åŠŸèƒ½LEDNumå’Œå¾ªç¯ç§»ä½çš„åŠŸèƒ½
ä¹Ÿå¯ä»¥ä½¿ç”¨åŸºæœ¬çš„é‡ 0x01
```c
unsigned char LEDNum; 

... LEDNum++;  

0000 0001 = 0x01 << 0
0000 0010 = 0x01 << 1
0000 0100 = 0x01 << 2
// ç›¸åº”åœ°, å¯ä»¥ä½¿ç”¨ 0xFEç‚¹äº®ä¸€ä¸ªç¯å¹¶è®©å…¶å·¦å³ç§»åŠ¨
// ä¹Ÿå¯ä»¥
P2 = ~(0x01 << LEDNum)
```

