对于高级定时器, CH1-CH3 具有互补输出功能(一般用于无刷电机等), 死区控制;  

死区控制即在互补输出过程加入一定的**死区时间**。
![[Excalidraw/9. 定时器的互补输出,死区控制和H桥的使用 2024-08-12 08.47.19]]
往往使用于 H 桥(控制电机正反转), 用于适应元器件的延迟特性 (一般需要Q1, Q4导通正转, Q2, Q3 导通反转, 因此Q1, Q4接入正转; Q2, Q3接入反转);
![[attachments/Pasted image 20240812085721.png|500]]
为了保证不短路, 即**不能同时置于有效电平**, 所以需要加入死区控制。保证瞬间不出现短路现象。**仅有在高级定时器中才有死区控制部分**。

**死区时间计算和刹车断路功能**: 首先确定 $f_{DTS}$ 时间值, 有:
$$f_{DTS} = \frac{F_{t}}{2^{CKD[1:0]}}$$
其中CKD在CR寄存器中有解释; 1-4 的分频部分

第二需要判断 DTG\[7:5\] (Dead-time generator stop) 
![[attachments/Pasted image 20240812093429.png]]
例如: F4 的168MHz,  DTG[7:0] = 250, 则 DT = 32 + DTG [4:0] = 11010 = 26; 则得到 DTG = 58;
则 $T_{DTS} = \frac{2^{CKD[1:0]}}{168Mhz} \times 58 \times 16$ 即可计算出对应的死区时间特性;

对于**刹车断路功能**, 通过 TIMx_BKIN 进行控制; BRK 进行极性选择; 
注意: **硬件强制输出OCx和OCNx不能同时在有效电平**。在发生刹车断路之后, MOE 位清零, 两个输出OCx 和 OCxN 均为无效(具体参考手册部分); 其中 OCx 和 OCxN 的状态由控制位决定;
刹车中断位 BIF 置1;
