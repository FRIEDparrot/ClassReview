## ä¸€ã€ Python å¤šé‡ç»§æ‰¿ä½¿ç”¨
å¯¹äº  Python ç±», æ”¯æŒå¤šé‡ç»§æ‰¿, å³å­ç±»ç»§æ‰¿äºä¸¤ä¸ªæˆ–è€…å¤šä¸ªçˆ¶ç±»ã€‚


## äºŒã€Python æŠ½è±¡ç±»çš„ä½¿ç”¨æ–¹æ³•
åœ¨ Python ä¸­, æŠ½è±¡ç±»æ˜¯ä¸€ç§æ— æ³•è¢«å®ä¾‹åŒ–çš„ç±»ï¼Œç”¨äºå®šä¹‰é€šç”¨çš„æ¥å£æˆ–è¡Œä¸ºï¼Œå…·ä½“å®ç°ç”±å­ç±»å®Œæˆã€‚æŠ½è±¡ç±»çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œç¡®ä¿å­ç±»å¿…é¡»å®ç°è¿™äº›æ–¹æ³•ï¼Œä»è€Œå®ç°ä¸€ç§åè®®æˆ–è§„èŒƒã€‚ä¾‹å¦‚, åœ¨ VB ä¸­, é€šè¿‡ MustInherit å’Œ MustOverride  å®ç°æŠ½è±¡ç±»å‹, å‚è€ƒ[[ğŸ“˜ClassNotes/âŒ¨ï¸Programming/ğŸ“º VisualBasic/ç»“æ„ä½“æ¨¡æ‹Ÿ Union ç±»å‹#MustInherit å’Œ MustOverride|MustInherit å’Œ MustOverride]] 

## å®šä¹‰æŠ½è±¡ç±»
Python ä½¿ç”¨ `abc` æ¨¡å—ä¸­çš„ `ABC` å’Œ `abstractmethod` æ¥å®šä¹‰æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•ã€‚

### å…³é”®æ­¥éª¤ï¼š
1. ç»§æ‰¿ `abc.ABC` ç±»ã€‚
2. ä½¿ç”¨ `@abstractmethod` <mark style="background: transparent; color: red">è£…é¥°å™¨å®šä¹‰æŠ½è±¡æ–¹æ³•</mark>, è¿™ä¸ªæ–¹æ³•å¿…é¡»è¢« å­ç±»è¿›è¡Œç»§æ‰¿ 

### ç¤ºä¾‹ä»£ç 
```python
from abc import ABC, abstractmethod

class AbstractAnimal(ABC):
    @abstractmethod
    def make_sound(self):
        """å­ç±»å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•"""
        pass

    @abstractmethod
    def move(self):
        """å¦ä¸€ä¸ªæŠ½è±¡æ–¹æ³•"""
        pass

# æ— æ³•ç›´æ¥å®ä¾‹åŒ–æŠ½è±¡ç±»
# animal = AbstractAnimal()  # è¿™ä¼šæŠ›å‡º TypeError

# å­ç±»ç»§æ‰¿æŠ½è±¡ç±»
class Dog(AbstractAnimal):
    def make_sound(self):
        return "Woof!"

    def move(self):
        return "Runs on four legs"

# æ­£å¸¸å®ä¾‹åŒ–å­ç±»
dog = Dog()
print(dog.make_sound())  # è¾“å‡º: Woof!
print(dog.move())        # è¾“å‡º: Runs on four legs
```

## æŠ½è±¡ç±»çš„ä¸»è¦å‚æ•°å’Œæ–¹æ³•

### æŠ½è±¡ç±»ä¸­å¸¸ç”¨çš„è£…é¥°å™¨å’Œæ–¹æ³•ï¼š
1. **`@abstractmethod`**
   - å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå¿…é¡»åœ¨å­ç±»ä¸­å®ç°ã€‚
   - ä¸æä¾›é»˜è®¤å®ç°ã€‚

2. **`@classmethod` å’Œ `@staticmethod` çš„ç»“åˆ**
   - å¯ä»¥ç»“åˆ `@abstractmethod` ä½¿ç”¨ä»¥å®šä¹‰æŠ½è±¡çš„ç±»æ–¹æ³•æˆ–é™æ€æ–¹æ³•ã€‚
   ```python
   from abc import ABC, abstractmethod

   class AbstractExample(ABC):
       @classmethod
       @abstractmethod
       def abstract_class_method(cls):
           pass

       @staticmethod
       @abstractmethod
       def abstract_static_method():
           pass

   class ConcreteExample(AbstractExample):
       @classmethod
       def abstract_class_method(cls):
           return "Class method implemented"

       @staticmethod
       def abstract_static_method():
           return "Static method implemented"

   example = ConcreteExample()
   print(example.abstract_class_method())  # è¾“å‡º: Class method implemented
   print(example.abstract_static_method())  # è¾“å‡º: Static method implemented
   ```

3. **`ABCMeta`**
   - `ABC` ç±»æ˜¯ `ABCMeta` çš„å¿«æ·æ–¹å¼ã€‚
   - **å¦‚æœä¸æƒ³æ˜¾å¼ç»§æ‰¿ `ABC`ï¼Œå¯ä»¥ç›´æ¥å°†å…ƒç±»è®¾ç½®ä¸º `ABCMeta`**ã€‚
   ```python
   from abc import ABCMeta, abstractmethod

   class AbstractExample(metaclass=ABCMeta):
       @abstractmethod
       def method(self):
           pass
   ```

4. **`isinstance` å’Œ `issubclass` æ£€æŸ¥**
   - ç”¨äºç¡®è®¤æŸä¸ªç±»æ˜¯å¦ç»§æ‰¿è‡ªæŸä¸ªæŠ½è±¡ç±»ã€‚
   ```python
   print(issubclass(Dog, AbstractAnimal))  # True
   print(isinstance(dog, AbstractAnimal)) # True
   ```

### æŠ½è±¡ç±»çš„æ³¨æ„äº‹é¡¹ï¼š
1. **ä¸èƒ½å®ä¾‹åŒ–æŠ½è±¡ç±»**  
   æŠ½è±¡ç±»æœ¬èº«ä¸èƒ½å®ä¾‹åŒ–ï¼Œåªæœ‰å®ç°äº†æ‰€æœ‰æŠ½è±¡æ–¹æ³•çš„å­ç±»æ‰èƒ½å®ä¾‹åŒ–ã€‚

2. **éƒ¨åˆ†å®ç°**  
   æŠ½è±¡ç±»å¯ä»¥åŒ…å«å…·ä½“å®ç°çš„æ™®é€šæ–¹æ³•ã€‚å­ç±»å¯ä»¥ç›´æ¥ç»§æ‰¿ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©é‡å†™ã€‚

   ```python
   class AbstractAnimal(ABC):
       @abstractmethod
       def make_sound(self):
           pass

       def eat(self):
           return "Eats food"  # æ™®é€šæ–¹æ³•

   class Dog(AbstractAnimal):
       def make_sound(self):
           return "Woof!"

   dog = Dog()
   print(dog.eat())  # è¾“å‡º: Eats food
   ```

3. **å¼ºåˆ¶å®ç°æ¥å£**  
   å­ç±»å¿…é¡»å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œ**å¦åˆ™å®ƒè‡ªèº«ä¹Ÿä¼šè¢«è§†ä¸ºæŠ½è±¡ç±»ï¼Œæ— æ³•å®ä¾‹åŒ–**ã€‚

4. **å¤šç»§æ‰¿çš„æ”¯æŒ**  
   Python çš„æŠ½è±¡ç±»æ”¯æŒå¤šç»§æ‰¿(åŒç»§æ‰¿å¤šä¸ªç±»)ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºå¤æ‚çš„åè®®
   ```python
   class Flyable(ABC):
       @abstractmethod
       def fly(self):
           pass

   class Swimmable(ABC):
       @abstractmethod
       def swim(self):
           pass

   class Duck(Flyable, Swimmable):
       def fly(self):
           return "Duck flies"

       def swim(self):
           return "Duck swims"

   duck = Duck()
   print(duck.fly())  # è¾“å‡º: Duck flies
   print(duck.swim()) # è¾“å‡º: Duck swims
   ```

### æ€»ç»“
æŠ½è±¡ç±»æ˜¯å®šä¹‰è¡Œä¸ºæ¥å£çš„æœ‰æ•ˆå·¥å…·ï¼Œåœ¨éœ€è¦å¼ºåˆ¶å®ç°æŸäº›æ–¹æ³•çš„åœºæ™¯ï¼ˆå¦‚æ¥å£è®¾è®¡æˆ–æ¡†æ¶å¼€å‘ï¼‰ä¸­å°¤ä¸ºå¸¸ç”¨ã€‚é€šè¿‡æŠ½è±¡ç±»ï¼Œå¯ä»¥ç¡®ä¿ä»£ç å…·æœ‰ä¸€è‡´æ€§å’Œå¯æ‰©å±•æ€§ã€‚

##  Python  ç±»çš„ç‰¹æ®Šæ–¹æ³•å‡½æ•°
ç‰¹æ®Šç±»å‹å‡½æ•°: å‚è€ƒèµ„æ–™ [3. Data model â€” Python 3.13.1 documentation](https://docs.python.org/3/reference/datamodel.html#special-method-names) 

åœ¨ Python ä¸­ï¼Œç±»ä¸­æœ‰è®¸å¤šç‰¹æ®Šæ–¹æ³•ï¼ˆä¹Ÿç§°ä¸ºé­”æœ¯æ–¹æ³•æˆ–åŒä¸‹åˆ’çº¿æ–¹æ³•ï¼‰ï¼Œè¿™äº›æ–¹æ³•ä»¥åŒä¸‹åˆ’çº¿ï¼ˆ`__`ï¼‰åŒ…å›´ï¼Œé€šå¸¸è¢«ç”¨æ¥ä¸ºç±»å®šä¹‰ç‰¹æ®Šè¡Œä¸ºã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ç‰¹æ®Šæ–¹æ³•åˆ†ç±»åŠç¤ºä¾‹: 
### **1. å¯¹è±¡åˆå§‹åŒ–å’Œé”€æ¯**
| æ–¹æ³•       | æè¿°                                   |
|------------|----------------------------------------|
| `__init__` | åˆå§‹åŒ–æ–¹æ³•ï¼Œç”¨äºå¯¹è±¡å®ä¾‹åŒ–æ—¶è°ƒç”¨ã€‚      |
| `__del__`  | ææ„æ–¹æ³•ï¼Œåœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶å‰è°ƒç”¨ã€‚      |

```python
class MyClass:
    def __init__(self, name):
        self.name = name
        print(f"{name} initialized")
    
    def __del__(self):
        print(f"{self.name} destroyed")
```

### **2. å­—ç¬¦ä¸²è¡¨ç¤º**
| æ–¹æ³•       | æè¿°                                                       |
|------------|------------------------------------------------------------|
| `__str__`  | å®šä¹‰å¯¹è±¡çš„â€œå¯æ‰“å°â€å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œ`print(obj)` æ—¶è°ƒç”¨ã€‚           |
| `__repr__` | å®šä¹‰å¯¹è±¡çš„å®˜æ–¹å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œç”¨äºè°ƒè¯•ï¼Œ`repr(obj)` æ—¶è°ƒç”¨ã€‚      |

```python
class MyClass:
    def __init__(self, name):
        self.name = name
    
    def __str__(self):
        return f"MyClass({self.name})"
    
    def __repr__(self):
        return f"MyClass(name={self.name!r})"
```

### **3. è¿ç®—ç¬¦é‡è½½**
| æ–¹æ³•          | æè¿°                                 |
|---------------|--------------------------------------|
| `__add__`     | å®šä¹‰åŠ æ³• `+`ã€‚                        |
| `__sub__`     | å®šä¹‰å‡æ³• `-`ã€‚                        |
| `__mul__`     | å®šä¹‰ä¹˜æ³• `*`ã€‚                        |
| `__truediv__` | å®šä¹‰çœŸé™¤æ³• `/`ã€‚                     |
| `__floordiv__`| å®šä¹‰æ•´æ•°é™¤æ³• `//`ã€‚                  |
| `__mod__`     | å®šä¹‰å–æ¨¡ `%`ã€‚                       |
| `__pow__`     | å®šä¹‰å¹‚è¿ç®— `**`ã€‚                    |

```python
class Vector:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    
    def __add__(self, other):
        return Vector(self.x + other.x, self.y + other.y)
    
    def __repr__(self):
        return f"Vector({self.x}, {self.y})"

v1 = Vector(1, 2)
v2 = Vector(3, 4)
print(v1 + v2)  # è¾“å‡º: Vector(4, 6)
```

### **4. æ¯”è¾ƒè¿ç®—**
| æ–¹æ³•       | æè¿°                      |
|------------|---------------------------|
| `__eq__`   | ç­‰äº `==`ã€‚                |
| `__ne__`   | ä¸ç­‰äº `!=`ã€‚              |
| `__lt__`   | å°äº `<`ã€‚                 |
| `__le__`   | å°äºç­‰äº `<=`ã€‚            |
| `__gt__`   | å¤§äº `>`ã€‚                 |
| `__ge__`   | å¤§äºç­‰äº `>=`ã€‚            |

### **5. å®¹å™¨ç±»æ”¯æŒ**
| æ–¹æ³•          | æè¿°                                 |
|---------------|--------------------------------------|
| `__len__`     | å®šä¹‰å®¹å™¨é•¿åº¦ï¼Œ`len(obj)` è°ƒç”¨ã€‚       |
| `__getitem__` | å®šä¹‰ç´¢å¼•è®¿é—® `obj[key]`ã€‚             |
| `__setitem__` | å®šä¹‰ç´¢å¼•èµ‹å€¼ `obj[key] = value`ã€‚     |
| `__delitem__` | å®šä¹‰ç´¢å¼•åˆ é™¤ `del obj[key]`ã€‚         |
| `__contains__`| å®šä¹‰æˆå‘˜æµ‹è¯• `key in obj`ã€‚           |

```python
class MyList:
    def __init__(self, items):
        self.items = items
    
    def __len__(self):
        return len(self.items)
    
    def __getitem__(self, index):
        return self.items[index]

lst = MyList([1, 2, 3])
print(len(lst))  # è¾“å‡º: 3
print(lst[1])    # è¾“å‡º: 2
```

### **6. å¯è¿­ä»£å¯¹è±¡**
| æ–¹æ³•          | æè¿°                                 |
|---------------|--------------------------------------|
| `__iter__`    | å®šä¹‰å¯è¿­ä»£å¯¹è±¡ï¼Œè¿”å›è¿­ä»£å™¨ã€‚          |
| `__next__`    | å®šä¹‰è¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªå€¼ã€‚                |

```python
class MyRange:
    def __init__(self, start, end):
        self.start = start
        self.end = end
    
    def __iter__(self):
        self.current = self.start
        return self
    
    def __next__(self):
        if self.current >= self.end:
            raise StopIteration
        result = self.current
        self.current += 1
        return result

for i in MyRange(1, 5):
    print(i)  # è¾“å‡º: 1 2 3 4
```

---

### **7. ä¸Šä¸‹æ–‡ç®¡ç†**
| æ–¹æ³•          | æè¿°                                 |
|---------------|--------------------------------------|
| `__enter__`   | å®šä¹‰è¿›å…¥ä¸Šä¸‹æ–‡æ—¶çš„è¡Œä¸ºã€‚              |
| `__exit__`    | å®šä¹‰ç¦»å¼€ä¸Šä¸‹æ–‡æ—¶çš„è¡Œä¸ºã€‚              |

```python
class MyContext:
    def __enter__(self):
        print("Entering context")
    
    def __exit__(self, exc_type, exc_val, exc_tb):
        print("Exiting context")

with MyContext():
    print("In context")
```