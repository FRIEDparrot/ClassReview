# 程序员需要了解的硬核知识之操作系统入门

* [程序员需要了解的硬核知识之操作系统入门](#程序员需要了解的硬核知识之操作系统入门)
   * [操作系统环境](#操作系统环境)
   * [Windows 操作系统克服了CPU以外的硬件差异](#windows-操作系统克服了cpu以外的硬件差异)
   * [不同操作系统的 API 差异性](#不同操作系统的-api-差异性)
   * [FreeBSD Port 帮你轻松使用源代码](#freebsd-port-帮你轻松使用源代码)
   * [可以使用虚拟机获取其他环境](#可以使用虚拟机获取其他环境)
      * [提供相同运行环境的 Java 虚拟机](#提供相同运行环境的-java-虚拟机)
   * [BIOS 和引导](#bios-和引导)

## 操作系统环境

程序中包含着`运行环境`这一内容，可以说 **运行环境 = 操作系统 + 硬件** ，操作系统又可以被称为软件，它是由一系列的指令组成的。我们不介绍操作系统，我们主要来介绍一下硬件的识别。

我们肯定都玩儿过游戏，你玩儿游戏前需要干什么？是不是需要先看一下自己的笔记本或者电脑是不是能肝的起游戏？下面是一个游戏的配置（怀念一下 wow）

![](http://www.cxuan.vip/image-20230129141000106.png)

图中的主要配置如下

* 操作系统版本：说的就是应用程序运行在何种系统环境，现在市面上主要有三种操作系统环境，Windows 、Linux 和 Unix ，一般我们玩儿的大型游戏几乎都是在 Windows 上运行，可以说 Windows 是游戏的天堂。Windows 操作系统也会有区分，分为32位操作系统和64位操作系统，互不兼容。
* 处理器：处理器指的就是 CPU，你的电脑的计算能力，通俗来讲就是每秒钟能处理的指令数，如果你的电脑觉得卡带不起来的话，很可能就是 CPU 的计算能力不足导致的。想要加深理解，请阅读博主的另一篇文章：[程序员需要了解的硬核知识之CPU](https://mp.weixin.qq.com/s?__biz=MzU2NDg0OTgyMA==&mid=2247484585&idx=1&sn=0d6c3ccf8cc5bec2fea80eb437213801&chksm=fc45f95acb32704c7dcc952a803e88e8a9b0e67c86d8c27abf4e6c776e48b1fcd770dd2dcc8d&token=653889808&lang=zh_CN#rd)

* 显卡：显卡承担图形的输出任务，因此又被称为图形处理器（Graphic Processing Unit，GPU），显卡也非常重要，比如我之前玩儿的`剑灵`开五档（其实就是图像变得更清晰）会卡，其实就是显卡显示不出来的原因。
* 内存：内存即主存，就是你的应用程序在运行时能够动态分析指令的这部分存储空间，它的大小也能决定你电脑的运行速度，想要加深理解，请阅读博主的另一篇文章 [程序员需要了解的硬核知识之内存](https://mp.weixin.qq.com/s?__biz=MzU2NDg0OTgyMA==&mid=2247484617&idx=1&sn=497af1daab7bba6b44ca291194c56621&chksm=fc45f93acb32702c5bc8575f7830f2b585952e31e62af3d73867c42360a2f538ae779452eb52&token=653889808&lang=zh_CN#rd)

* 存储空间：存储空间指的就是应用程序安装所占用的磁盘空间，由图中可知，此游戏的最低存储空间必须要大于 5GB，其实我们都会遗留很大一部分用来安装游戏。

从程序的运行环境这一角度来考量的话，CPU 的种类是特别重要的参数，为了使程序能够正常运行，必须满足 CPU 所需的最低配置。

CPU 只能解释其自身固有的语言。不同的 CPU 能解释的机器语言的种类也是不同的。机器语言的程序称为 `本地代码(native code)`，程序员用 C 等高级语言编写的程序，仅仅是文本文件。`文本文件(排除文字编码的问题)`在任何环境下都能显示和编辑。我们称之为`源代码`。通过对源代码进行编译，就可以得到`本地代码`。下图反映了这个过程。

![](http://www.cxuan.vip/image-20230129141224082.png)

## Windows 操作系统克服了CPU以外的硬件差异

计算机的硬件并不仅仅是由 CPU 组成的，还包括用于存储程序指令的数据和内存，以及通过 I/O 连接的键盘、显示器、硬盘、打印机等外围设备。

在 WIndows 软件中，键盘输入、显示器输出等并不是直接向硬件发送指令。而是通过向 Windows 发送指令实现的。因此，程序员就不用注意内存和 I/O 地址的不同构成了。Windows 操作的是硬件而不是软件，软件通过操作 Windows 系统可以达到控制硬件的目的。

![](http://www.cxuan.vip/image-20230129141234269.png)

## 不同操作系统的 API 差异性

接下来我们看一下操作系统的种类。同样机型的计算机，可安装的操作系统类型也会有多种选择。例如：AT 兼容机除了可以安装 Windows 之外，还可以采用 Unix 系列的 Linux 以及 FreeBSD （也是一种Unix操作系统）等多个操作系统。当然，应用软件则必须根据不同的操作系统类型来专门开发。**CPU 的类型不同，所对应机器的语言也不同**,同样的道理，**操作系统的类型不同，应用程序向操作系统传递指令的途径也不同**。

应用程序向系统传递指令的途径称为 `API(Application Programming Interface)`。Windows 以及 Linux 操作系统的 API，提供了任何应用程序都可以利用的函数组合。因为不同操作系统的 API 是有差异的。所以，如何要将同样的应用程序移植到另外的操作系统，就必须要覆盖应用所用到的 API 部分。

键盘输入、鼠标输入、显示器输出、文件输入和输出等同外围设备进行交互的功能，都是通过 API 提供的。

**这也就是为什么 Windows 应用程序不能直接移植到 Linux 操作系统上的原因，API 差异太大了。**

在同类型的操作系统下，不论硬件如何，API 几乎相同。但是，由于不同种类 CPU 的机器语言不同，因此本地代码也不尽相同。

## FreeBSD Port 帮你轻松使用源代码

不知道你有没有这个想法：“既然 CPU 不同会导致本地代码不同，那为何不将源代码直接发送给程序呢？”这确实是一种解决办法，Unix 系列的 `FreeBSD` 操作系统就使用了这种方式。

Unix 系列操作系统 FreeBSD 中，存在一种名为 `Ports` 的机制。该机制能够结合当前运行环境的硬件环境来编译应用的源代码，进而得到可以运行的本地代码。如果目标应用的源代码在硬件上找不到，Ports 就会自动使用 FTP 连接到相应站点下载代码。

![](http://www.cxuan.vip/image-20230129141245570.png)

全球有很多站点都提供适用于 FreeBSD 的应用源代码。通过使用 Ports 可以利用的程序源代码，大约有 16000 种。根据不同的领域进行分类，可以随时使用。

FreeBSD 上应用的源代码，大部分是用 C 语言来标注的，`C 编译器`可以结合 FreeBSD 的运行环境来生成合适的本地代码。

>FTP( File Transfer Protocol) 是连接到互联网上的计算机之间的传送文件的协议。

## 可以使用虚拟机获取其他环境

即使不通过应用程序的移植，在同一个操作系统上仍然可以使用其他的操作系统，那就是使用 `虚拟机软件`。虚拟机（Virtual Machine）指通过软件的具有完整硬件系统功能的、运行在一个完全隔离环境中的完整计算机系统。在实体计算机中能够完成的工作在虚拟机中都能够实现。

### 提供相同运行环境的 Java 虚拟机

总算是提到大 Java 了， Java 大法好，除了虚拟机的方法之外，还有一种方法能够提供不依赖于特定硬件和操作系统的程序运行环境，那就是 Java。

大家说的 Java 其实有两层意思，一种是作为编程语言的 Java；一种是作为程序运行环境的 Java。Java 与其他语言相同，都是通过源代码编译后运行的。不过，编译后生成的不是特定 CPU 使用的本地代码，而是名为`字节代码` 的程序。直接代码的运行环境就称为 `Java 虚拟机(Java Virtual Machine)`。Java 虚拟机是一边把 Java 字节代码逐一转换为本地代码一边在运行着。

程序运行时，将编译后的字节代码转换为本地代码，这样的操作看上去有些迂回，但由此可以实现相同的字节码可以在不同的操作系统环境下运行。

**想象一下，你开发完成的应用部署到 Linux 环境下，是不是什么都不用管？**

![](http://www.cxuan.vip/image-20230129141256171.png)

Windows 有专门的 Windows 虚拟机，Macintosh 有 Macintosh 专门的虚拟机。从操作系统来看，Java虚拟机就是一个应用，从运行环境上来看，Java 虚拟机就是运行环境。

## BIOS 和引导

最后对一些比较基础的部分做一些补充说明。程序的运行环境，存在着名为 `BIOS(Basic Input/Output System)`的系统。BIOS 存储在 ROM 中，是预先内置在计算机主机内部的程序。BIOS 除了键盘、磁盘和显卡等基本控制外，还有`引导程序`的功能。引导程序是存储在启动驱动器启示区域的小程序。操作系统的启动驱动器一般硬盘。不过有时也可能是 `CD-ROM` 或软盘。

电脑开机后，BIOS 会确认硬件是否正常运行，没有异常的话会直接启动引导程序。引导程序的功能是把在硬盘等记录的 OS 加载到内存中运行。虽然启动应用是 OS 的功能，但 OS 不能启动自己，是通过引导程序来启动的。

如果你在阅读文章的过程中发现错误和问题，请及时与我联系！

如果文章对你有帮助，希望小伙伴们三连走起！

