ECMA Script å®é™…ä¸Šæ˜¯ JavaScript çš„æ ‡å‡†.
è€Œé’ˆå¯¹ECMAScript,  ä¸åŒæµè§ˆå™¨å‚å•†çš„å®é™…å®ç°æ˜¯ä¸åŒçš„, å…¶ä¸­Chorme é‡‡ç”¨çš„æ˜¯ v8 å®ç° ECMAScript æ ‡å‡†

JavaScript æ˜¯è§£é‡Šå‹çš„è¯­è¨€, ç±»ä¼¼ python, è€Œ<b><mark style="background: transparent; color: orange">åŸºäº jit æŠ€æœ¯æé«˜ JavaScript çš„è¿è¡Œé€Ÿåº¦</mark></b>. 
é¦–å…ˆ js æ˜¯å¤§å°å†™æ•æ„Ÿçš„,

## ä¸€ã€åŸºç¡€è¯­æ³•
### (1) æ ‡è¯†ç¬¦
æ ‡è¯†ç¬¦ä»¥ a-z, `_` , `$`  è¿›è¡Œå¼€å¤´, ç”¨äºç»™å…¨å±€å˜é‡, å‡½æ•°, å±æ€§æˆ–è€…å‚æ•°å‘½åã€‚

å…¶ä¸­å¸¸è§çš„å…³é”®å­—æœ‰:
break; do; **instanceof**; **typeof**; 
if; else; 
new; delete; var; try;  catch ; finally;
switch; case; return void continue;
for; switch; default; while; throw; 
in ; try ; function ; this ; with ;
debugger; false; true; null;

ä¿ç•™å­—:
class; enum ; entends; super;  const; export; 
import;  implements; let; private; public ; yield;
interface; packagge;   protected; static;

ä¸€èˆ¬æ ‡è¯†ç¬¦å‘½åé‡‡ç”¨é©¼å³°å‘½åæ³• (studentName)

### (2) åŸºæœ¬æ•°æ®ç±»å‹æ¦‚è¿°
å¯¹äº JavaScript æœ‰ 6 ç§æ•°æ®ç±»å‹:
1. String 
2. Number èŒƒå›´æ˜¯ +- 1.797e308, å¦å¤–æœ‰ Infinity, -Infinity å’Œ NaN 
3. Boolean 
4. Undefined  (var  å£°æ˜å˜é‡, ä½†æ˜¯æœªåˆå§‹åŒ–)
5. Null  (æ¯”è¾ƒ Undefined å’Œ Null æ—¶ä¼šè¿”å› True)
6. Object ç±»å‹ (é™¤ä¸Šè¿° 5 ç§æ•°æ®ç±»å‹, å³å¯¹è±¡ç±»å‹)

å¼ºåˆ¶ç±»å‹è½¬æ¢
1. å¯ä»¥é‡‡ç”¨ String(),  toString() å’Œ  æ‹¼æ¥ ""ï¼Œä¾‹å¦‚  123 + ""
2. Number() ParseInt() ParseFloat() (æ³¨æ„: Number ä¼šå°† null æˆ–ç©ºæ ¼å­—ç¬¦ä¸²è½¬æ¢ä¸º0ï¼Œundefined è½¬æ¢ä¸º NaN) 
3. Boolean() è½¬æ¢ä¸ºå¸ƒå°”ç±»å‹

å¦å¤–æœ‰ ++è‡ªå¢è¿ç®—, ä¹Ÿæœ‰ +=,  -=, `*=`, `%=` è¿ç®—ç¬¦, é€»è¾‘è¿ç®—å®Œå…¨ä¸€è‡´, æ”¯æŒ  ?: ä¸‰ç›®è¿ç®—\
æ³¨æ„: === ç”¨äºåˆ¤æ–­å…¨ç­‰è¿ç®—, è¦æ±‚ç±»å‹ä¸€è‡´, !== ä¸º ä¸å…¨ç­‰è¿ç®—ç¬¦

å¦å¤–ä¹Ÿæä¾›äº† Object.is(), ä¸ == ç›¸åŒ. 

#### 1. åˆ›å»ºæ•°å€¼æ•°æ®ç±»å‹
æˆ‘ä»¬å¾€å¾€åˆ©ç”¨ var è®¾ç½®å„ä¸ªå˜é‡å¹¶åµŒå…¥ html ä¸­, åŒæ—¶æ”¯æŒå£°æ˜å¤šä¸ª, ä¾‹å¦‚: 
```js
var s =  "<p></p>"
linktag = "<a href= "web.net"></a>"
```

å¯¹è±¡ç±»å‹å¯ä»¥é‡‡ç”¨å­—å…¸åˆ›å»º:
```js title:object  å¯¹è±¡
const obj1 = {
	host :"HOST",
	name : "h"
};
const obj2 = {
	host :"HOST",
	name2: "h"
};
Object.assign(obj1, obj2);    // å¯¹äº object ç±»å‹å‡é€‚ç”¨ï¼Œè¦†ç›–æˆ–è€…åˆå¹¶
```

#### 2. å‡½æ•°æ•°æ®ç±»å‹ 
function ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç±»å‹(å®é™…ä¸Šæ˜¯  object æ•°æ®ç±»å‹), ä¸€èˆ¬å‡½æ•°ä¸éœ€è¦æŒ‡å®šæ•°æ®ç±»å‹, ä¹Ÿä¸éœ€è¦ä½¿ç”¨ var ,return æŒ‡å®šè¿”å›å€¼.
```js
function output(str){
	document.write(str);
	// è®¿é—®å…¶ä¸­çš„å˜é‡å¯ä»¥ç›´æ¥è¿›è¡Œ, è€Œ å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®å˜é‡, åªéœ€é‡‡ç”¨ ${} æ–¹æ³•
	console.log('${str}')
	return 1 
}
// é‡‡ç”¨å‡½æ•°å¯¹è±¡è¿›è¡Œåˆ›å»º
var fun = new Function("Console.Log("Hello, World")");
// é‡‡ç”¨å‡½æ•°å£°æ˜è¿›è¡Œåˆ›å»º 
function fun(para1, para2){
}
var fun = function(para1, para2, ... ){
}
fun();
// ç«‹å³æ‰§è¡Œå‡½æ•° --> å®šä¹‰å®Œæ¯•åç«‹å³è°ƒç”¨çš„å‡½æ•°
(function(){
	console.log("æ­¤è¯­å¥å°†ä¼šè¢«ç«‹å³æ‰§è¡Œ")
})();
```

æ”¯æŒç±»ä¼¼ python çš„é»˜è®¤å‚æ•°:
```js
functionÂ myFunction(x, y =Â 10) {  
Â Â // y is 10 if not passed or undefined  
Â Â returnÂ x + y;  
}  
myFunction(5);Â // will return 15
```

å¦å¤–, javascript æ”¯æŒå‡½æ•°å†…éƒ¨åµŒå¥—å®šä¹‰å‡½æ•°:
```js
function fun1(){
	function  fun2(){
	}
}
```

#### 3.  åŒ¿åå‡½æ•°å’Œç®­å¤´å‡½æ•°(ç±»ä¼¼ Lambda è¡¨è¾¾å¼)
åœ¨ JavaScript ä¸­ï¼ŒåŒ¿åå‡½æ•°å’Œ lambda è¡¨è¾¾å¼ï¼ˆé€šå¸¸ç§°ä¸ºç®­å¤´å‡½æ•°ï¼‰æ˜¯ç®€æ´ä¸”å¼ºå¤§çš„å·¥å…·ï¼Œå¸¸ç”¨äºå›è°ƒã€äº‹ä»¶å¤„ç†å’Œé«˜é˜¶å‡½æ•°ã€‚å®ƒä»¬æä¾›äº†æ›´çµæ´»çš„è¯­æ³•å’ŒåŠŸèƒ½ã€‚ä¸‹é¢æ˜¯å¯¹å®ƒä»¬çš„è¯¦ç»†ä»‹ç»:
##### 1. åŒ¿åå‡½æ•°
**åŒ¿åå‡½æ•°**æ˜¯æ²¡æœ‰åç§°çš„å‡½æ•°ï¼Œå®ƒä»¬é€šå¸¸ç›´æ¥å®šä¹‰å¹¶ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚å› ä¸ºæ²¡æœ‰åå­—ï¼Œè¿™ç±»å‡½æ•°æ— æ³•åœ¨å®šä¹‰åå•ç‹¬å¼•ç”¨ã€‚
```javascript
function(str) {
    // å‡½æ•°ä½“
}
```
åŒ¿åå‡½æ•°å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯:
- **å›è°ƒå‡½æ•°**ï¼šåœ¨äº‹ä»¶å¤„ç†ã€å®šæ—¶å™¨ã€æ•°ç»„æ–¹æ³•ï¼ˆå¦‚ `.map()`ã€`.filter()`ã€`.forEach()`ï¼‰ä¸­ï¼ŒåŒ¿åå‡½æ•°éå¸¸æœ‰ç”¨ã€‚
**ç¤ºä¾‹ï¼šåŒ¿åå‡½æ•°ä½œä¸ºå›è°ƒ**
```javascript
setTimeout(function() {
    console.log("This is an anonymous function.");
}, 1000);
```
- **è‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFE, Immediately Invoked Function Expressionï¼‰**ï¼šå¯ä»¥å®šä¹‰å¹¶ç«‹å³æ‰§è¡Œä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå¸¸ç”¨äºåˆ›å»ºå±€éƒ¨ä½œç”¨åŸŸï¼Œé¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚
**ç¤ºä¾‹ï¼šè‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°** 
```javascript
(function() {
    console.log("This is an IIFE.");
})();
```
##### 2. ç®­å¤´å‡½æ•°(Arrow Functions)
**ç®­å¤´å‡½æ•°**æ˜¯ JavaScript ES6 å¼•å…¥çš„ä¸€ç§æ›´ç®€æ´çš„å‡½æ•°å®šä¹‰æ–¹å¼ã€‚å®ƒçš„è¯­æ³•ç®€æ´ï¼Œé€‚åˆç”¨äºå®šä¹‰çŸ­å°çš„åŒ¿åå‡½æ•°ã€‚ç›¸å¯¹äºæ™®é€šå‡½æ•°ï¼Œå®ƒè¿˜å…·æœ‰ä¸€äº›è¯­æ³•å’Œè¡Œä¸ºä¸Šçš„å·®å¼‚ã€‚å…·ä½“å®šä¹‰æ–¹æ³•å¦‚ä¸‹:
```javascript
(param1, param2) => {
    // å‡½æ•°ä½“
}
/* å¦‚æœæ˜¯ç©ºçš„å‚æ•°å‡½æ•°,  åˆ™é‡‡ç”¨ */
() => {
}
```
- å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥çœç•¥æ‹¬å·:
```javascript
param => {
  console.log(param);
}
```
- å¦‚æœå‡½æ•°ä½“åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶ä¸”éœ€è¦è¿”å›è¯¥è¡¨è¾¾å¼çš„å€¼ï¼Œå¯ä»¥çœç•¥å¤§æ‹¬å·å’Œ `return` å…³é”®å­—:
```javascript
(a, b) => a + b;
```
ä¸Šé¢çš„ç®­å¤´å‡½æ•°ç›¸å½“äº:
  ```javascript
  function(a, b) {
      return a + b;
  }
  ```
- **ç®€åŒ–å›è°ƒå‡½æ•°**ï¼šç®­å¤´å‡½æ•°ç‰¹åˆ«é€‚åˆç”¨äºç®€åŒ–å›è°ƒå‡½æ•°çš„å®šä¹‰ã€‚
  **ç¤ºä¾‹ï¼šä½¿ç”¨ç®­å¤´å‡½æ•°ç®€åŒ–å›è°ƒ** 
```javascript
const numbers = [1, 2, 3, 4, 5];
const squared = numbers.map(n => n * n);
console.log(squared); // è¾“å‡º: [1, 4, 9, 16, 25]
```
- **ä¿æŒ `this` ä½œç”¨åŸŸ**ï¼šç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ `this`ï¼Œå®ƒ**ä¼šæ•è·å®šä¹‰å®ƒæ—¶çš„ `this` å€¼**ï¼Œé€‚åˆåœ¨**éœ€è¦ä½¿ç”¨çˆ¶ä½œç”¨åŸŸçš„ `this` æ—¶ä½¿ç”¨**ã€‚
  **ç¤ºä¾‹ï¼šç®­å¤´å‡½æ•°ä¸­çš„ `this`** 
```javascript
function Counter() {
	this.count = 0;
	setInterval(() => {
	  this.count++;
	  console.log(this.count);
	}, 1000);
}
const counter = new Counter();
```
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`setInterval` ä¸­çš„ç®­å¤´å‡½æ•°ä¼šæ•è· `Counter` æ„é€ å‡½æ•°çš„ `this`ï¼Œæ‰€ä»¥æ¯æ¬¡è®¡æ•°éƒ½èƒ½æ­£ç¡®è®¿é—® `Counter` å¯¹è±¡çš„ `count` å±æ€§ã€‚(è¦æ±‚åªèƒ½ç”¨ new, ä¸èƒ½é‡‡ç”¨ Const å®šä¹‰ function, å½“æˆ‘ä»¬ä½¿ç”¨ `new` å…³é”®å­—è°ƒç”¨ `Counter` æ—¶ï¼Œ`this` ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ `counter` ä¸Š,ä»å…¶å®šä¹‰æ—¶çš„ä¸Šä¸‹æ–‡ä¸­æ•è· `this`, ä¹Ÿå°±æ˜¯æ•è·åˆ° counter å¯¹è±¡)

##### 3. ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«
- **`this` ç»‘å®š**:
  - æ™®é€šå‡½æ•°çš„ `this` æ˜¯è°ƒç”¨æ—¶å†³å®šçš„ã€‚
  - ç®­å¤´å‡½æ•°çš„ `this` æ˜¯åœ¨**å®šä¹‰æ—¶ä»å¤–éƒ¨ä½œç”¨åŸŸæ•è·**çš„(ä¸€èˆ¬åœ°,å¿…é¡»å®šä¹‰å¤–éƒ¨ä½œç”¨åŸŸæ‰èƒ½è¿›è¡Œthisæ•è·)ã€‚
- **ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°**:
  - æ™®é€šå‡½æ•°å¯ä»¥ä½¿ç”¨ `new` å…³é”®å­—æ¥åˆ›å»ºå®ä¾‹ã€‚
  - **ç®­å¤´å‡½æ•°ä¸èƒ½ä½¿ç”¨ `new`ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰è‡ªå·±çš„** `this`ã€‚
- **æ²¡æœ‰ `arguments` å¯¹è±¡**: 
  - æ™®é€šå‡½æ•°æœ‰ä¸€ä¸ª `arguments` å¯¹è±¡ï¼ŒåŒ…å«ä¼ å…¥çš„å‚æ•°ã€‚
  - ç®­å¤´å‡½æ•°æ²¡æœ‰ `arguments` å¯¹è±¡ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥é€šè¿‡å‰©ä½™å‚æ•°è¯­æ³•æ¥ä»£æ›¿ã€‚
```javascript
const sum = (...args) => {
	  return args.reduce((total, current) => total + current, 0);
};
```

ç‰¹æ€§æ€»ç»“å¦‚ä¸‹:

| ç‰¹æ€§                 | åŒ¿åå‡½æ•°                 | ç®­å¤´å‡½æ•°               |
| ------------------ | -------------------- | ------------------ |
| è¯­æ³•                 | `function() { ... }` | `() => { ... }`    |
| `this` ç»‘å®š          | è°ƒç”¨æ—¶ç»‘å®š                | å®šä¹‰æ—¶ç»‘å®š              |
| æ˜¯å¦å¯ä½œä¸ºæ„é€ å‡½æ•°          | æ˜¯                    | å¦                  |
| æ˜¯å¦æœ‰ `arguments` å¯¹è±¡ | æœ‰                    | æ—                   |
| é€‚ç”¨åœºæ™¯               | æ™®é€šå›è°ƒã€æ„é€ å‡½æ•°            | ç®€åŒ–å›è°ƒã€ä¿æŒ `this` ä½œç”¨åŸŸ |
æ€»ç»“:
- **åŒ¿åå‡½æ•°**é€‚ç”¨äºéœ€è¦å®šä¹‰çŸ­å°çš„å‡½æ•°æ—¶ï¼Œä¾‹å¦‚å›è°ƒå‡½æ•°ã€IIFE ç­‰ã€‚
- **ç®­å¤´å‡½æ•°**æä¾›äº†æ›´ç®€æ´çš„è¯­æ³•ï¼ŒåŒæ—¶é¿å…äº†ä¼ ç»Ÿå‡½æ•°åœ¨ `this` ç»‘å®šä¸Šçš„å›°æ‰°ã€‚å®ƒæ›´é€‚ç”¨äºä¿æŒå¤–éƒ¨ä½œç”¨åŸŸçš„ `this`ï¼Œä»¥åŠå‡½æ•°ä½“ç®€å•çš„å›è°ƒåœºæ™¯ã€‚

##### 4. æ™®é€šå‡½æ•°çš„ `this` ç»‘å®šæ–¹å¼
åœ¨ JavaScript ä¸­ï¼Œæ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°åœ¨å¤„ç† `this` å…³é”®å­—æ—¶æœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚**æ™®é€šå‡½æ•°çš„ `this` æ˜¯åŸºäºè°ƒç”¨ä¸Šä¸‹æ–‡çš„**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒåœ¨**å‡½æ•°è°ƒç”¨æ—¶ç¡®å®š `this` çš„å€¼**ã€‚ä»¥ä¸‹æ˜¯å…³äºæ™®é€šå‡½æ•°ä¸­ `this` çš„ä¸€äº›å…¸å‹è°ƒç”¨æ–¹æ³•å’Œè§„åˆ™ï¼Œå®ƒä»¬æœ‰åŠ©äºç†è§£ä¸ç®­å¤´å‡½æ•°çš„åŒºåˆ«ã€‚

æ™®é€šå‡½æ•°çš„ `this` ç»‘å®šæ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§: 
- **é»˜è®¤ç»‘å®š**ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹çš„**å…¨å±€å¯¹è±¡ç»‘å®š**ï¼‰
- **éšå¼ç»‘å®š**ï¼ˆé€šè¿‡å¯¹è±¡è°ƒç”¨ï¼‰
- **æ˜¾å¼ç»‘å®š**ï¼ˆé€šè¿‡ `call`ã€`apply`ã€`bind` æ–¹æ³•ï¼‰
- **`new` ç»‘å®š**(ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨)

**1.1 é»˜è®¤ç»‘å®š**
å½“æ™®é€šå‡½æ•°ç‹¬ç«‹è°ƒç”¨æ—¶ï¼Œ`this` çš„å€¼åœ¨ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯ä¸åŒçš„:
- **éä¸¥æ ¼æ¨¡å¼**ï¼š`this` é»˜è®¤æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆ`window` æˆ– `global`ï¼‰ã€‚
- **ä¸¥æ ¼æ¨¡å¼**ï¼š`this` çš„å€¼ä¸º `undefined`ã€‚

**ç¤ºä¾‹ï¼šé»˜è®¤ç»‘å®š** 
```javascript
function showThis() {
    console.log(this);
}
showThis(); 
// éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¾“å‡º: window (æµè§ˆå™¨ç¯å¢ƒ)
// ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¾“å‡º: undefined
```

**1.2 éšå¼ç»‘å®š** 
å½“ä¸€ä¸ªå‡½æ•°**ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œ`this` ä¼šæŒ‡å‘è°ƒç”¨å®ƒçš„å¯¹è±¡**ã€‚
**ç¤ºä¾‹ï¼šéšå¼ç»‘å®š**
```javascript
const obj = {
    value: 42,
    showValue: function() {
        console.log(this.value);
    }
};
obj.showValue(); // è¾“å‡º: 42
```
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`showValue` å‡½æ•°ä¸­çš„ `this` æŒ‡å‘è°ƒç”¨å®ƒçš„ `obj` å¯¹è±¡ï¼Œå› æ­¤ `this.value` è¾“å‡º `42`ã€‚

**1.3 æ˜¾å¼ç»‘å®š** (`call`ã€`apply`ã€`bind`)
å¯ä»¥ä½¿ç”¨ `call`ã€`apply` å’Œ `bind` æ–¹æ³•æ¥æ˜¾å¼æŒ‡å®šå‡½æ•°è°ƒç”¨æ—¶çš„ `this` ç»‘å®šã€‚
- **`call`** å’Œ **`apply`**ï¼šç«‹å³è°ƒç”¨å‡½æ•°ï¼Œå¹¶æ‰‹åŠ¨æŒ‡å®š `this`ã€‚
**ç¤ºä¾‹ï¼šä½¿ç”¨ `call` å’Œ `apply`** 
  ```javascript
  function showThis() {
      console.log(this.value);
  }
  const obj = { value: 42 };
  showThis.call(obj);  // è¾“å‡º: 42
  showThis.apply(obj); // è¾“å‡º: 42
  ```
- **`bind`**ï¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¹¶å°† `this` æ°¸ä¹…ç»‘å®šä¸ºæŒ‡å®šçš„å¯¹è±¡ã€‚
  **ç¤ºä¾‹ï¼šä½¿ç”¨ `bind`** 
```javascript
function showThis() {
  console.log(this.value);
}
const obj = { value: 42 };
const boundFunction = showThis.bind(obj);
boundFunction(); // è¾“å‡º: 42
```
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`bind` è¿”å›äº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå…¶ä¸­ `this` å§‹ç»ˆæŒ‡å‘ `obj`ã€‚
**1.4 `new` ç»‘å®š**
å½“å‡½æ•°ä½¿ç”¨ `new` å…³é”®å­—è°ƒç”¨æ—¶ï¼Œå®ƒä½œä¸º**æ„é€ å‡½æ•°**ï¼Œ`this` æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚
**ç¤ºä¾‹ï¼š`new` ç»‘å®š** 
```javascript
function Person(name) {
    this.name = name;
}
const person = new Person('Alice');
console.log(person.name); // è¾“å‡º: Alice
```
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé€šè¿‡ `new` å…³é”®å­—è°ƒç”¨ `Person` å‡½æ•°ï¼Œ`this` æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ `person`ã€‚ 

##### 5. æ™®é€š this ç»‘å®šä¸ç®­å¤´å‡½æ•°çš„åŒºåˆ«
ç›¸æ¯”äºæ™®é€šå‡½æ•°ä¸­ `this` çš„å¤šç§ç»‘å®šæ–¹å¼ï¼Œ**ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ `this`**ï¼Œå®ƒä¼šä»**å®šä¹‰æ—¶çš„å¤–éƒ¨ä½œç”¨åŸŸ**ä¸­æ•è· `this`ã€‚
- æ™®é€šå‡½æ•°çš„ `this` æ˜¯è°ƒç”¨æ—¶ç¡®å®šçš„ï¼Œå¯èƒ½ä¼šæŒ‡å‘ä¸åŒçš„å¯¹è±¡ã€‚
- ç®­å¤´å‡½æ•°çš„ `this` æ˜¯**å®šä¹‰æ—¶æ•è·çš„ï¼Œå¹¶ä¸”ä¸ä¼šå› ä¸ºè°ƒç”¨æ–¹å¼è€Œæ”¹å˜**ã€‚
**ç¤ºä¾‹ï¼šæ™®é€šå‡½æ•°ä¸ç®­å¤´å‡½æ•°çš„ `this`** 
```javascript
const obj = {
    value: 42,
    showThis: function() {
        console.log(this.value);
    },
    showThisArrow: () => {
        console.log(this.value);
    }
};
obj.showThis(); // è¾“å‡º: 42ï¼Œå› ä¸º `this` æŒ‡å‘è°ƒç”¨è€… `obj`
obj.showThisArrow(); // è¾“å‡º: undefinedï¼Œå› ä¸º `this` åœ¨å®šä¹‰æ—¶ä»å¤–éƒ¨ä½œç”¨åŸŸæ•è·
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š
- `showThis` æ˜¯æ™®é€šå‡½æ•°ï¼Œ`this` æŒ‡å‘ `obj` å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥è®¿é—® `obj.value`ã€‚
- `showThisArrow` æ˜¯ç®­å¤´å‡½æ•°ï¼Œ`this` åœ¨**å®šä¹‰æ—¶ä»å¤–éƒ¨ä½œç”¨åŸŸï¼ˆå³ `obj` çš„å¤–éƒ¨ç¯å¢ƒï¼‰æ•è·**ã€‚**åœ¨è¿™ä¸ªç¯å¢ƒä¸­ï¼Œ`this` å¯èƒ½æŒ‡å‘ `window`ï¼ˆåœ¨æµè§ˆå™¨ä¸­ï¼‰æˆ– `undefined`ï¼ˆåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰**ã€‚

| ç»‘å®šæ–¹å¼         | æè¿°                                                   | é€‚ç”¨äº  |
| ------------ | ---------------------------------------------------- | ---- |
| é»˜è®¤ç»‘å®š         | åœ¨å…¨å±€ç¯å¢ƒæˆ–ç‹¬ç«‹è°ƒç”¨æ—¶ï¼Œ`this` æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰æˆ– `undefined`ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰ã€‚ | æ™®é€šå‡½æ•° |
| éšå¼ç»‘å®š         | ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œ`this` æŒ‡å‘è¯¥å¯¹è±¡ã€‚                             | æ™®é€šå‡½æ•° |
| æ˜¾å¼ç»‘å®š         | ä½¿ç”¨ `call`ã€`apply`ã€`bind` æ˜¾å¼æŒ‡å®š `this`ã€‚                | æ™®é€šå‡½æ•° |
| `new` ç»‘å®š     | ä½¿ç”¨ `new` è°ƒç”¨å‡½æ•°æ—¶ï¼Œ`this` æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚                      | æ™®é€šå‡½æ•° |
| ç®­å¤´å‡½æ•°çš„ `this` | `this` **ä»å®šä¹‰æ—¶çš„å¤–éƒ¨ä½œç”¨åŸŸæ•è·**ï¼Œ**ä¸ä¼šè¢«è°ƒç”¨æ–¹å¼å½±å“**ã€‚               | ç®­å¤´å‡½æ•° |

> [!NOTE] è¯´æ˜
> å¯¹äºå‡½æ•°, **ä»¥å‡½æ•°å½¢å¼è°ƒç”¨æ—¶, this æ˜¯ window** 
> **ä»¥æ–¹æ³•å½¢å¼è°ƒç”¨æ—¶, åˆ™ä¸ºå¯¹åº”çš„å¯¹è±¡**
> **æ„é€ å‡½æ•° -> this æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡**
> åœ¨éœ€è¦åŠ¨æ€æ”¹å˜ `this` æ—¶ï¼Œæ™®é€šå‡½æ•°æ›´é€‚ç”¨ï¼›è€Œåœ¨éœ€è¦å›ºå®š `this` æŒ‡å‘æˆ–ç®€åŒ–è¯­æ³•æ—¶ï¼Œç®­å¤´å‡½æ•°åˆ™æ›´æ–¹ä¾¿ã€‚

#### 4. Js å‡½æ•°çš„ Call å’Œ Apply æ–¹æ³•
å¯¹äº Call æ–¹æ³•å’Œ Apply æ–¹æ³•, éƒ½æ˜¯å‡½æ•°å¯¹è±¡çš„æ–¹æ³•ï¼Œ å¹¶éœ€è¦é€šè¿‡å‡½æ•°å¯¹è±¡è¿›è¡Œè°ƒç”¨ï¼Œ

å…¶ä¸­, <b><mark style="background: transparent; color: orange">Call æ–¹æ³•å¯ä»¥åœ¨å®å‚åœ¨å¯¹è±¡ä¹‹åä¾æ¬¡ä¼ é€’</mark></b>, <b><mark style="background: transparent; color: orange">Apply æ–¹æ³•å¯ä»¥å°†ç¬¬ä¸€ä¸ªå¯¹è±¡æŒ‡å®šä¸ºç¬¬ä¸€ä¸ªå‚æ•°, è€Œè¿™ä¸ªå‚æ•°æˆä¸ºå‡½æ•°æ‰§è¡Œæ—¶çš„ this </mark></b>
ä¾‹å¦‚ `call(obj, 1, 2)`, æˆ–è€…  `apply(obj, [1,2])` æ˜¯ç­‰ä»·çš„.  
å¦å¤–å¯¹äºä»»ä½•å‡½æ•°, éƒ½å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨é€šè¿‡ arguments è®¿é—®å…¶å¯¹è±¡, 
```js
function fun(a, b) {
    console.log("a = " + a);
    console.log("b = " + b);
    console.log("fun = " + this);
	console.log(arguments[0]);  // è°ƒç”¨ arguments éƒ¨åˆ†
}
var obj = {
    name: "obj",
    sayName: function () {
        console.log(this.name);
    }
};
fun(2, 3);
console.log("===============");
fun.call(obj, 2, 3);
```

### (3) JavaScript ä¸­çš„åˆ›å»ºå¯¹è±¡
####  1. åŸºæœ¬æ–¹æ³•åˆ›å»ºå¯¹è±¡
js æ”¯æŒé€šè¿‡ Console.Log æ‰“å°æ‰€æœ‰å±æ€§ 
```js
var a = new Object 
a.name = "obj1"
a.age = 10

// ä»¥å­—å…¸å½¢å¼åˆ›å»º 
var a = {
	name : "obj1",
	age : 10
};
```
è®¿é—®å±æ€§åŒ…æ‹¬å¦‚ä¸‹æ–¹å¼:
```js
a.name
a[name]
delete a.name ;  delete a[name];
```

#### 2. ä»¥å·¥å‚æ¨¡å¼åˆ›å»ºå¯¹è±¡
é€‚ç”¨äºç‰¹åˆ«å¤šå¯¹è±¡éœ€è¦åˆ›å»ºçš„æƒ…å†µ, ä¸€èˆ¬æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å°†å¯¹è±¡ä»¥ new å½¢å¼è¿›è¡Œåˆ›å»º(åˆ›å»ºåŒæ—¶å®ä¾‹åŒ–), ç„¶åè¿”å›å®ä¾‹
```js
function createPerson(name, age){
	var obj  = new Object();
	obj.name= name;
	obj.age = age;
	obj.sayName = () =>{
		console.log(this.name)
	}
	/* å®é™…ä¸Šæ˜¯ç»‘å®šåˆ° new äº§ç”Ÿçš„å¯¹è±¡ä¸Šå» */
	return obj 
}

obj = createPerson("name", 2);
obj.sayName();
```

ä»¥æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡:
```js
function Person(name, age){
	this.name= name;
	this.age = age;
	obj.sayName = () =>{
		console.log(this.name)
	}
	/* å®é™…ä¸Šæ˜¯ç»‘å®šåˆ° new äº§ç”Ÿçš„å¯¹è±¡ä¸Šå» */
	return obj 
}

persob1 = new Person("name", 2);
console.log(person1)
obj.sayName();
```

#### 3. é‡‡ç”¨Class å…³é”®å­—åˆ›å»ºå¯¹è±¡
å¯¹äºä¸Šè¿°çš„å¯¹è±¡, æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ class å’Œ constructor å…³é”®å­—ä»£æ›¿ Function æ„é€ å‡½æ•°è¿›è¡Œåˆ›å»ºå¯¹è±¡ï¼Œå°è£…æ€§æ›´å¼º, ä¾‹å¦‚:
```js
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
        # sex;  // ç§æœ‰å±æ€§, å¤–éƒ¨ä¸å¯è®¿é—®, ä»…åœ¨ ECMAScript 11 ä¹‹åæœ‰æ•ˆ
    }

    // å®šä¹‰æ–¹æ³•ï¼Œç›¸å½“äºåœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ this.sayName = function() {}
    sayName() {
        console.log(this.name);
    }

    // ä½¿ç”¨ç®­å¤´å‡½æ•°çš„æ–¹å¼å®šä¹‰æ–¹æ³•
    sayNameArrow = () => {
        console.log(this.name);
    }
}

const person1 = new Person("Alice", 25);
console.log(person1); // è¾“å‡º: Person { name: 'Alice', age: 25 }
person1.sayName(); // è¾“å‡º: Alice
person1.sayNameArrow(); // è¾“å‡º: Alice
```

- `class` å†…éƒ¨å¯ä»¥ç›´æ¥å®šä¹‰æ–¹æ³•ï¼ˆå¦‚ `sayName`ï¼‰ï¼Œè¿™äº›æ–¹æ³•ä¼šè‡ªåŠ¨è¢«æ·»åŠ åˆ°ç±»çš„ `prototype` ä¸Šï¼Œä»è€ŒèŠ‚çœå†…å­˜ã€‚

### (4) æ•°æ®ç±»å‹çš„å¼•ç”¨ä¼ é€’å’Œå€¼ä¼ é€’
åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°å‚æ•°çš„ä¼ é€’æ–¹å¼åˆ†ä¸º**å€¼ä¼ é€’**å’Œ**å¼•ç”¨ä¼ é€’**ï¼Œä½†ç†è§£ä¸Šä¸ä¸€äº›ä¼ ç»Ÿçš„ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚ C++ï¼‰æœ‰äº›ä¸åŒã€‚JavaScript é‡‡ç”¨çš„æ˜¯åŸºäºå¯¹è±¡ç±»å‹çš„ä¼ é€’æ–¹å¼ã€‚
#### 1. å€¼ä¼ é€’ï¼ˆPass by Valueï¼‰
   - **åŸºæœ¬æ•°æ®ç±»å‹**ï¼ˆå¦‚ `number`ã€`string`ã€`boolean`ã€`null`ã€`undefined`ã€`symbol`ã€`bigint`ï¼‰åœ¨ä¼ é€’æ—¶æ˜¯**å€¼ä¼ é€’**ã€‚
   - å½“å°†åŸºæœ¬ç±»å‹çš„å˜é‡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œä¼ é€’çš„æ˜¯å®ƒä»¬çš„**å‰¯æœ¬**ï¼Œä¿®æ”¹å‰¯æœ¬ä¸ä¼šå½±å“åŸå§‹å˜é‡ã€‚
   **ç¤ºä¾‹ï¼šå€¼ä¼ é€’** 
   ```javascript
   function modifyValue(x) {
       x = 10;
       console.log("Inside function:", x); // è¾“å‡º: 10
   }

   let a = 5;
   modifyValue(a);
   console.log("Outside function:", a); // è¾“å‡º: 5
   ```
   åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`a` çš„å€¼åœ¨å‡½æ•°å¤–éƒ¨ä¸ä¼šæ”¹å˜ï¼Œå› ä¸ºä¼ é€’ç»™ `modifyValue` çš„æ˜¯ `a` çš„å‰¯æœ¬ã€‚

#### 2. å¼•ç”¨ç±»å‹å’Œå¼•ç”¨ä¼ é€’ï¼ˆPass by Referenceï¼‰
   - **å¼•ç”¨ç±»å‹**ï¼ˆå¦‚ `Object`ã€`Array`ã€`Function`ï¼‰åœ¨ä¼ é€’æ—¶æ˜¯**å¼•ç”¨ä¼ é€’**ã€‚
   - å½“å°†å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œä¼ é€’çš„æ˜¯å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¼•ç”¨ï¼ˆå³åœ°å€ï¼‰ã€‚ä¿®æ”¹è¯¥å¼•ç”¨æŒ‡å‘çš„å†…å®¹ä¼šå½±å“åˆ°åŸå§‹å¯¹è±¡ã€‚
   **ç¤ºä¾‹ï¼šå¼•ç”¨ä¼ é€’**
   ```javascript
   function modifyObject(obj) {
       obj.name = "Modified";
       console.log("Inside function:", obj);
   }

   let myObj = { name: "Original" };
   modifyObject(myObj);
   console.log("Outside function:", myObj);
   ```
   åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`myObj` çš„ `name` å±æ€§åœ¨å‡½æ•°å†…éƒ¨è¢«ä¿®æ”¹åï¼Œå‡½æ•°å¤–éƒ¨çš„ `myObj` ä¹Ÿä¼šæ˜¾ç¤ºä¿®æ”¹åçš„å€¼ï¼Œå› ä¸º `myObj` çš„å¼•ç”¨è¢«ä¼ é€’ç»™äº† `modifyObject`ã€‚

#### 3. æ¨¡æ‹Ÿå€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’
**ç¤ºä¾‹:æ¨¡æ‹Ÿå€¼ä¼ é€’ï¼ˆå¯¹å¯¹è±¡ç±»å‹ï¼‰**:
  - å¦‚æœä¸æƒ³åœ¨å‡½æ•°ä¸­ä¿®æ”¹åŸå§‹å¯¹è±¡ï¼Œå¯ä»¥ä¼ é€’å¯¹è±¡çš„**æµ…æ‹·è´**æˆ–**æ·±æ‹·è´**ã€‚
  **ç¤ºä¾‹ï¼šæµ…æ‹·è´æ¨¡æ‹Ÿå€¼ä¼ é€’** 
  ```javascript
  function modifyObject(obj) {
      let copy = { ...obj }; // æµ…æ‹·è´å¯¹è±¡
      copy.name = "Modified";
      console.log("Inside function:", copy);
  }
  let myObj = { name: "Original" };
  modifyObject(myObj);
  console.log("Outside function:", myObj);
  ```
  - ä½¿ç”¨ `{ ...obj }`ï¼ˆæ‰©å±•è¿ç®—ç¬¦ï¼‰åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡å‰¯æœ¬ï¼Œå¹¶ä¼ é€’è¯¥å‰¯æœ¬ï¼Œè¿™æ ·å‡½æ•°å†…éƒ¨çš„ä¿®æ”¹ä¸ä¼šå½±å“åŸå§‹å¯¹è±¡ã€‚
  **ç¤ºä¾‹ï¼šæ·±æ‹·è´æ¨¡æ‹Ÿå€¼ä¼ é€’**  
  ```javascript
  function modifyObject(obj) {
      let copy = JSON.parse(JSON.stringify(obj)); // æ·±æ‹·è´å¯¹è±¡
      copy.name = "Modified";
      console.log("Inside function:", copy);
      return copy 
  }
  let myObj = { name: "Original" };
  modifyObject(myObj);
  console.log("Outside function:", myObj);
  ```
  - ä½¿ç”¨ `JSON.parse(JSON.stringify(obj))` åˆ›å»ºæ·±æ‹·è´ï¼Œè¿™æ ·åµŒå¥—å¯¹è±¡ä¹Ÿä¸ä¼šè¢«ä¿®æ”¹ã€‚
- **æ¨¡æ‹Ÿå¼•ç”¨ä¼ é€’ï¼ˆå¯¹åŸºæœ¬ç±»å‹ï¼‰**:
  - å¯¹äºåŸºæœ¬ç±»å‹ï¼Œå¦‚æœä½ å¸Œæœ›æ¨¡æ‹Ÿå¼•ç”¨ä¼ é€’ï¼Œå¯ä»¥å°†å®ƒä»¬åŒ…è£…åœ¨å¯¹è±¡æˆ–æ•°ç»„ä¸­ã€‚
**ç¤ºä¾‹ï¼šä½¿ç”¨å¯¹è±¡æ¨¡æ‹Ÿå¼•ç”¨ä¼ é€’** 
  ```javascript
  function modifyValue(wrapper) {
      wrapper.value = 10;
      console.log("Inside function:", wrapper.value);
  }
  let numWrapper = { value: 5 };
  modifyValue(numWrapper);
  console.log("Outside function:", numWrapper.value);
  ```
  - **å°†æ•°å€¼åŒ…è£…åœ¨å¯¹è±¡çš„ `value` å±æ€§ä¸­ï¼Œé€šè¿‡å¯¹è±¡çš„å¼•ç”¨ä¿®æ”¹ `value`ï¼Œå¯ä»¥è¾¾åˆ°ç±»ä¼¼å¼•ç”¨ä¼ é€’çš„æ•ˆæœã€‚** 
> [!summary] æ¦‚æ‹¬
> - JavaScript ä¸­ï¼ŒåŸºæœ¬ç±»å‹æ˜¯é€šè¿‡**å€¼ä¼ é€’**çš„ï¼Œè€Œå¯¹è±¡ç±»å‹æ˜¯é€šè¿‡**å¼•ç”¨ä¼ é€’**çš„ã€‚
> - å¯¹äºå¯¹è±¡ç±»å‹ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºæµ…æ‹·è´æˆ–æ·±æ‹·è´æ¥æ¨¡æ‹Ÿå€¼ä¼ é€’ï¼Œé¿å…å¯¹åŸå§‹å¯¹è±¡çš„ä¿®æ”¹ã€‚
> - å¯¹äºåŸºæœ¬ç±»å‹ï¼Œå¯ä»¥é€šè¿‡å°†å®ƒä»¬åŒ…è£…åœ¨å¯¹è±¡æˆ–æ•°ç»„ä¸­æ¥æ¨¡æ‹Ÿå¼•ç”¨ä¼ é€’ã€‚

<b><mark style="background: transparent; color: orange">åŸºæœ¬ç±»å‹ä¿å­˜åœ¨æ ˆä¸­, å¼•ç”¨ç±»å‹ä¿å­˜åœ¨å †ä¸­</mark></b>

## äºŒã€é¢å‘å¯¹è±¡ç¼–ç¨‹
### (1) é€šç”¨æ–¹æ³•
åŸºæœ¬å¯¹è±¡åˆ›å»ºå‚è€ƒ [[#3. é‡‡ç”¨Class å…³é”®å­—åˆ›å»ºå¯¹è±¡]] 
==ä»¥ä¸‹é€šç”¨äº Function åˆ›å»ºå’Œ class åˆ›å»º==
å¯ä»¥é‡‡ç”¨ instanceof è¿ç®—ç¬¦<b><mark style="background: transparent; color: orange">æ£€éªŒå¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å®ä¾‹</mark></b>, ç±»ä¼¼åœ°, typeof ç”¨æ³•ç±»ä¼¼
```js
person1 instanceof Person
```
éœ€è¦è¯´æ˜çš„æ˜¯, é‡‡ç”¨ Function åˆ›å»ºç±»æ—¶, å…¶ä¸­çš„æ¯ä¸ªæ–¹æ³•éƒ½ä¼šå ç”¨ç©ºé—´, ä¾‹å¦‚1000ä¸ªå®ä¾‹åˆ™å ç”¨ 1000 ä¸ª æ–¹æ³•çš„ç©ºé—´ã€‚ä¸€ç§æ–¹æ³•æ˜¯æŠ½å–ä¸ºå…¨å±€å‡½æ•°æ¥èŠ‚çœç©ºé—´, ä¹Ÿå¯ä»¥å®šä¹‰å‡½æ•°çš„åŸå‹ ProtoTypeã€‚ 
```js
Person.prototype.sayName = function(){
	console.log(this.name)
}
// å…¶ä¸­prototype è®¿é—®å‡½æ•°çš„åŸå‹(prototype)å¯¹è±¡
```
å¦å¤–å¯ä»¥åœ¨åˆ›å»ºçš„å¯¹è±¡ä¸­é€šè¿‡ `__proto__` å…³é”®å­—è®¿é—®ç›¸åº”çš„å±æ€§ã€‚å³ Person  ç±»çš„å®ä¾‹å¯ä»¥é€šè¿‡ `__proto__` è®¿é—®å…¶åŸå‹å¯¹è±¡
```js
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
    sayName() {
        console.log(`Hello, my name is ${this.name}`);
    }
}
const person1 = new Person("Alice", 25);
// è®¿é—® `person1` çš„åŸå‹å¯¹è±¡
console.log(person1.__proto__ === Person.prototype); // è¾“å‡º: true
// é€šè¿‡ `__proto__` è°ƒç”¨åŸå‹ä¸Šçš„æ–¹æ³•
person1.__proto__.sayName.call(person1); // è¾“å‡º: Hello, my name is Alice
```
é‡‡ç”¨ class å…³é”®å­—åˆ›å»º,ä¼šå°†æ–¹æ³•è‡ªåŠ¨æå–ä¸º prototype ä»¥èŠ‚çœå†…å­˜ã€‚

**æ£€æŸ¥æŸä¸ªå±æ€§æ˜¯å¦å­˜åœ¨**: é‡‡ Object çš„ [hasOwnProperty æ–¹æ³•](https://www.w3schools.com/js/js_objects.asp) åˆ¤æ–­æ˜¯å¦å…·æœ‰æŸä¸ªæ–¹æ³•æˆ–è€…å±æ€§(éç»§æ‰¿)
```js
person1.hasOwnProperty("age")
```

### (2) Function å¯¹è±¡ç»§æ‰¿
JavaScript çš„å¯¹è±¡ç»§æ‰¿æ–¹å¼åŒ…æ‹¬:
1. åŸå‹é“¾ç»§æ‰¿ 
2. æ„é€ å‡½æ•°ç»§
3. **ç»„åˆç»§æ‰¿**  
4. åŸå‹å¼ç»§æ‰¿ 
5. å¯„ç”Ÿå¼ç»§æ‰¿ 
6. å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿
JavaScript ä¸­çš„å¯¹è±¡ç»§æ‰¿æœ‰å¤šç§æ–¹å¼ï¼Œæ¯ç§æ–¹å¼éƒ½æœ‰å…¶ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚ä¸‹é¢é€ä¸€ä»‹ç»è¿™äº›ç»§æ‰¿æ–¹å¼ï¼Œå¹¶ä¸ºæ¯ç§æ–¹å¼æä¾›ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ã€‚

#### 1. åŸå‹é“¾ç»§æ‰¿
**åŸç†**: **ä½¿ç”¨å¯¹è±¡çš„ `prototype` å±æ€§æ¥è®©å­å¯¹è±¡è®¿é—®çˆ¶å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚æ‰€æœ‰å®ä¾‹éƒ½ä¼šå…±äº«åŒä¸€ä¸ªçˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§**ã€‚
éœ€è¦è¯´æ˜çš„æ˜¯, **å­ç±»å‹åŸå‹çš„æ„é€ å±æ€§å¯ä»¥è®¾ç½®ä¸ºå­ç±»å‹**ã€‚
```javascript
function Parent() {
    this.name = 'Parent';
}
Parent.prototype.sayHello = function() {
    console.log('Hello from ' + this.name);
};

function Child() {}
Child.prototype = new Parent(); // åŸå‹é“¾ç»§æ‰¿, åˆ›å»ºçˆ¶ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”èµ‹å€¼ç»™å­ç±»çš„ prototype 

/* å¯ä»¥åŠ ä¸Šä¸‹é¢ä¸€å¥: å°†å­ç±»å‹çš„ prototype æ„é€ å±æ€§è®¾ç½®ä¸ºå­ç±»å‹ */
Child.prototype.constructor  = Child     // ä¿®æ­£æ„é€ å‡½æ•°æŒ‡å‘ 
const child1 = new Child();   
child1.sayHello(); // è¾“å‡º: Hello from Parent 
```
**é—®é¢˜**: 
1. å¦‚æœ**çˆ¶å¯¹è±¡çš„å±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼ˆå¦‚æ•°ç»„ï¼‰ï¼Œåˆ™æ‰€æœ‰å­å®ä¾‹éƒ½ä¼šå…±äº«è¯¥å±æ€§**ï¼Œä¿®æ”¹ä¸€ä¸ªå®ä¾‹çš„å¼•ç”¨ç±»å‹å±æ€§ä¼šå½±å“å…¶ä»–å®ä¾‹ã€‚
2. ä¸èƒ½ä¼ é€’å‚æ•° 

#### 2. å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿
**åŸç†**: åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ `call` æˆ– `apply` æ¥æ”¹å˜ `this` çš„æŒ‡å‘ã€‚è¿™ä½¿å¾—æ¯ä¸ªå­å®ä¾‹æœ‰ç‹¬ç«‹çš„çˆ¶ç±»å±æ€§ã€‚
```javascript
function Parent(name) {
    this.name = name;
    this.colors = ['red', 'green', 'blue'];
}
function Child(name, age) {
    Parent.call(this, name); 
    this.age =  age
    // è°ƒç”¨çˆ¶æ„é€ å‡½æ•°, å› æ­¤ ChildType  ä¸­çš„æ¯å®ä¾‹éƒ½ä¼šå°† Parent ä¸­çš„å±æ€§è¿›è¡Œå¤åˆ¶
}
const child1 = new Child('child1');
child1.colors.push('black');

const child2 = new Child('child2');
console.log(child2.colors); // è¾“å‡º: ['red', 'green', 'blue']
```
**ä¼˜ç‚¹**: é¿å…äº†å¼•ç”¨ç±»å‹å±æ€§å…±äº«çš„é—®é¢˜ï¼Œ **å®é™…åˆ›å»ºçš„æ˜¯å„ä¸ªå¯¹è±¡çš„å¤åˆ¶**; 
**é—®é¢˜**:
1. **çˆ¶ç±»çš„æ–¹æ³•æ— æ³•è¢«å­ç±»å¤ç”¨**ï¼Œå› ä¸ºæ–¹æ³•æ˜¯å®šä¹‰åœ¨ `Parent` çš„ `prototype` ä¸Šã€‚ 
2. åªèƒ½ç»§æ‰¿çˆ¶ç±»å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•, ä¸èƒ½åŸå‹çš„å±æ€§å’Œæ–¹æ³• 
3. **æ— æ³•å®ç°æ„é€ å‡½æ•°å¤ç”¨, å®é™…ä¸Šæ¯ä¸ªæ„é€ å‡½æ•°è¿˜éœ€è¦å­ç±»ä¸­å¤šç”Ÿæˆä¸€ä¸ªå‰¯æœ¬, å¯¼è‡´å½±å“æ€§èƒ½**

#### 3. ç»„åˆç»§æ‰¿(é‡ç‚¹, æœ€å¸¸ç”¨)
**åŸç†**: å°†**åŸå‹é“¾ç»§æ‰¿å’Œæ„é€ å‡½æ•°ç»§æ‰¿ç»“åˆä½¿ç”¨**ã€‚å…ˆ<b><mark style="background: transparent; color: blue">é€šè¿‡åŸå‹é“¾ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•ï¼Œå†é€šè¿‡æ„é€ å‡½æ•°ç»§æ‰¿çˆ¶ç±»çš„å±æ€§</mark></b>ã€‚
```javascript
function Parent(name) {
    this.name = name;
    this.colors = ['red', 'green', 'blue'];
};
Parent.prototype.sayName = function() {
    console.log(this.name);
};

function Child(name, age) {
    Parent.call(this, name); // ç»§æ‰¿å±æ€§
    this.age = age;
}
Child.prototype = new Parent(); // ä»çˆ¶ç±»çš„åŸå‹ç»§æ‰¿æ–¹æ³•
Child.prototype.constructor = Child; // ä¿®æ­£æ„é€ å‡½æ•°æŒ‡å‘

const child1 = new Child('child1', 10);
child1.colors.push('black');
console.log(child1.colors); // è¾“å‡º: ['red', 'green', 'blue', 'black']
child1.sayName(); // è¾“å‡º: child1

const child2 = new Child('child2', 20);
console.log(child2.colors); // è¾“å‡º: ['red', 'green', 'blue']
```

**ä¼˜ç‚¹**: **å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•**ã€‚
**é—®é¢˜**: è°ƒç”¨äº†ä¸¤æ¬¡ `Parent` æ„é€ å‡½æ•°ï¼Œæ¶ˆè€—å†…å­˜ã€‚ æ­¤æ—¶, çˆ¶ç±»ä¸­çš„**å®ä¾‹å±æ€§å’Œæ–¹æ³•**å­˜åœ¨äºå­ç±»çš„å®ä¾‹ä¸­, **ä¹Ÿå­˜åœ¨äºå­ç±»çš„åŸå‹ä¸­**ã€‚

#### 4. åŸå‹å¼ç»§æ‰¿
**åŸç†**: ä½¿ç”¨ä¸€ä¸ªç°æœ‰å¯¹è±¡ä½œä¸ºæ–°å¯¹è±¡çš„åŸå‹ï¼Œç±»ä¼¼äº `Object.create()` çš„åŠŸèƒ½ã€‚
```javascript
const parent = {
    name: 'Parent',
    sayHello() {
        console.log('Hello from ' + this.name);
    }
};

const child = Object.create(parent);
child.name = 'Child';
child.sayHello(); // è¾“å‡º: Hello from Child
```
**ä¼˜ç‚¹**: ç®€å•æ˜“æ‡‚ï¼Œé€‚åˆä¸éœ€è¦æ„é€ å‡½æ•°çš„åœºæ™¯ã€‚
**é—®é¢˜**: ä¸åŸå‹é“¾ç»§æ‰¿ä¸€æ ·ï¼Œå¼•ç”¨ç±»å‹çš„å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«ã€‚
#### 5. å¯„ç”Ÿå¼ç»§æ‰¿
**åŸç†**: åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ªæŸä¸ªå¯¹è±¡çš„æ–°å¯¹è±¡ï¼Œç„¶åå¢å¼ºè¯¥å¯¹è±¡ã€‚
```javascript
function createAnother(original) {
    const clone = Object.create(original);
    clone.sayGoodbye = function() {
        console.log('Goodbye from ' + this.name);
    };
    return clone;
}

const parent = {
    name: 'Parent',
    sayHello() {
        console.log('Hello from ' + this.name);
    }
};

const child = createAnother(parent);
child.name = 'Child';
child.sayHello(); // è¾“å‡º: Hello from Child
child.sayGoodbye(); // è¾“å‡º: Goodbye from Child
```
**ä¼˜ç‚¹**: é€šè¿‡åœ¨å¯¹è±¡ä¸Šæ·»åŠ æ–¹æ³•ï¼Œå¢å¼ºå¯¹è±¡çš„åŠŸèƒ½ã€‚
**é—®é¢˜**: æ²¡æœ‰ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œæ— æ³•å¤ç”¨å¢å¼ºçš„æ–¹æ³•ã€‚

#### 6. å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿
**åŸç†**: ç»„åˆç»§æ‰¿çš„ä¼˜åŒ–ç‰ˆæœ¬ã€‚é€šè¿‡å¯„ç”Ÿå¼ç»§æ‰¿ `Parent.prototype` æ¥é¿å…è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ã€‚
```javascript
function Parent(name) {
    this.name = name;
    this.colors = ['red', 'green', 'blue'];
}
Parent.prototype.sayName = function() {
    console.log(this.name);
};
function Child(name, age) {
    Parent.call(this, name); // ç»§æ‰¿å±æ€§
    this.age = age;
}
Child.prototype = Object.create(Parent.prototype); // å¯„ç”Ÿå¼ç»§æ‰¿
Child.prototype.constructor = Child; // ä¿®æ­£æ„é€ å‡½æ•°æŒ‡å‘
const child1 = new Child('child1', 10);
child1.sayName(); // è¾“å‡º: child1
```

**ä¼˜ç‚¹**: **å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯æ€§èƒ½æœ€å¥½çš„ç»§æ‰¿æ–¹å¼ï¼Œåªè°ƒç”¨ä¸€æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°**ï¼Œä¸ä¼šé‡å¤åˆ›å»º `Parent` çš„å®ä¾‹ã€‚
**é—®é¢˜**: ç›¸å¯¹å…¶ä»–ç»§æ‰¿æ–¹å¼ï¼Œä»£ç ç¨å¾®å¤æ‚ã€‚

- **åŸå‹é“¾ç»§æ‰¿**: ç®€å•ä½†å…±äº«å¼•ç”¨ç±»å‹çš„é—®é¢˜ã€‚
- **æ„é€ å‡½æ•°ç»§æ‰¿**: ç‹¬ç«‹å±æ€§ï¼Œä½†æ— æ³•ç»§æ‰¿æ–¹æ³•ã€‚
- **ç»„åˆç»§æ‰¿**: å±æ€§å’Œæ–¹æ³•éƒ½å¯ä»¥ç»§æ‰¿ï¼Œä½†è°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ã€‚
- **åŸå‹å¼ç»§æ‰¿**: é€šè¿‡ç°æœ‰å¯¹è±¡åˆ›å»ºæ–°å¯¹è±¡ï¼Œç®€å•ä½†å…±äº«å¼•ç”¨ç±»å‹ã€‚
- **å¯„ç”Ÿå¼ç»§æ‰¿**: åœ¨åŸå‹å¼ç»§æ‰¿åŸºç¡€ä¸Šå¢å¼ºå¯¹è±¡åŠŸèƒ½ã€‚
- **å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿**: æœ€ä¼˜åŒ–çš„ç»§æ‰¿æ–¹å¼ï¼Œé¿å…é‡å¤åˆ›å»ºå®ä¾‹ã€‚ 

### (3) ç±» Class ç»§æ‰¿çš„ä½¿ç”¨æ–¹æ³• 
åœ¨ JavaScript ä¸­ï¼Œ`class` çš„ç»§æ‰¿é€šè¿‡ `extends` å…³é”®å­—æ¥å®ç°ã€‚`class` ç»§æ‰¿æä¾›äº†ä¸€ç§æ¸…æ™°çš„è¯­æ³•ï¼Œç”¨äºåœ¨ä¸€ä¸ªç±»ï¼ˆå­ç±»ï¼‰ä¸­ç»§æ‰¿å¦ä¸€ä¸ªç±»ï¼ˆçˆ¶ç±»ï¼‰çš„å±æ€§å’Œæ–¹æ³•ã€‚å­ç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¹¶å¯ä»¥é€šè¿‡ `super` å…³é”®å­—æ¥è®¿é—®å’Œè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°å’Œæ–¹æ³•ã€‚

#### 1. åŸºæœ¬è¯­æ³•
```javascript
class Parent {
    constructor(name) {
        this.name = name;
    }
    sayHello() {
        console.log(`Hello from ${this.name}`);
    }
}

class Child extends Parent {
    constructor(name, age) {
        super(name); // è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
        this.age = age;
    }

    sayAge() {
        console.log(`${this.name} is ${this.age} years old`);
    }
}

const child1 = new Child('Alice', 25);
child1.sayHello(); // è¾“å‡º: Hello from Alice
child1.sayAge(); // è¾“å‡º: Alice is 25 years old
```

- **`extends`**: `Child` é€šè¿‡ `extends` ç»§æ‰¿ `Parent`ï¼Œä»è€Œè·å¾—äº† `Parent` ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚
- **`super`**: åœ¨å­ç±»çš„ `constructor` ä¸­ï¼Œå¿…é¡»å…ˆè°ƒç”¨ `super()`ï¼Œæ‰èƒ½åœ¨å­ç±»ä¸­ä½¿ç”¨ `this`ã€‚`super()` ç”¨æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚
- **æ–¹æ³•ç»§æ‰¿**: `Child` ç±»ç»§æ‰¿äº† `Parent` çš„ `sayHello()` æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„ `sayAge()` æ–¹æ³•ã€‚

#### 2. è¦†ç›–é‡å†™çˆ¶ç±»æ–¹æ³•
å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨ `super.methodName()` æ¥è®¿é—®çˆ¶ç±»çš„æ–¹æ³•ã€‚
```javascript
class Parent {
    constructor(name) {
        this.name = name;
    }

    sayHello() {
        console.log(`Hello from ${this.name}`);
    }
}

class Child extends Parent {
    constructor(name, age) {
        super(name);
        this.age = age;
    }

    sayHello() {
        super.sayHello(); // è°ƒç”¨çˆ¶ç±»çš„ sayHello æ–¹æ³•
        console.log(`And I'm ${this.age} years old`);
    }
}

const child1 = new Child('Bob', 30);
child1.sayHello(); 
// è¾“å‡º:
// Hello from Bob
// And I'm 30 years old
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`Child` ç±»é‡å†™äº† `sayHello()` æ–¹æ³•ï¼Œå¹¶åœ¨é‡å†™çš„æ–¹æ³•ä¸­é€šè¿‡ `super.sayHello()` è°ƒç”¨äº† `Parent` ç±»çš„ `sayHello()` æ–¹æ³•ã€‚

#### 3. é™æ€æ–¹æ³•çš„ç»§æ‰¿
`class` ç»§æ‰¿ä¹Ÿé€‚ç”¨äºé™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•æ˜¯é€šè¿‡ç±»æœ¬èº«è°ƒç”¨ï¼Œè€Œä¸æ˜¯é€šè¿‡å®ä¾‹è°ƒç”¨çš„ã€‚
```javascript
class Parent {
    static greet() {
        console.log('Greetings from Parent class');
    }
}

class Child extends Parent {}

Parent.greet(); // è¾“å‡º: Greetings from Parent class
Child.greet(); // è¾“å‡º: Greetings from Parent class
```
- **é™æ€æ–¹æ³•ç»§æ‰¿**: `Child` ç±»è‡ªåŠ¨ç»§æ‰¿äº† `Parent` ç±»çš„é™æ€æ–¹æ³• `greet()`ï¼Œå› æ­¤å¯ä»¥ç›´æ¥é€šè¿‡ `Child.greet()` è°ƒç”¨è¯¥æ–¹æ³•ã€‚
- **é™æ€æ–¹æ³•å®šä¹‰**: ä½¿ç”¨ `static` å…³é”®å­—å®šä¹‰é™æ€æ–¹æ³•ï¼Œä¸èƒ½é€šè¿‡å®ä¾‹è°ƒç”¨ã€‚

#### 4. ä½¿ç”¨ `super` è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•
å­ç±»å¯ä»¥ä½¿ç”¨ `super` è°ƒç”¨çˆ¶ç±»ä¸­çš„æ™®é€šæ–¹æ³•ï¼ˆéæ„é€ æ–¹æ³•ï¼‰ï¼Œä»¥å®ç°çˆ¶å­ç±»æ–¹æ³•çš„æ‰©å±•ã€‚
```javascript
class Animal {
    speak() {
        console.log('Animal makes a sound');
    }
}

class Dog extends Animal {
    speak() {
        super.speak(); // è°ƒç”¨çˆ¶ç±»çš„ speak æ–¹æ³•
        console.log('Dog barks');
    }
}

const dog = new Dog();
dog.speak(); 
// è¾“å‡º:
// Animal makes a sound
// Dog barks
```

- **`super` è°ƒç”¨çˆ¶ç±»æ–¹æ³•**: åœ¨ `Dog` ç±»ä¸­ï¼Œ`speak()` æ–¹æ³•ä½¿ç”¨ `super.speak()` å…ˆè°ƒç”¨ `Animal` ç±»çš„ `speak()` æ–¹æ³•ï¼Œç„¶åæ·»åŠ è‡ªå·±çš„é€»è¾‘ã€‚
- **å­ç±»æ‰©å±•çˆ¶ç±»æ–¹æ³•**: è¿™ç§æ–¹å¼é€‚ç”¨äºéœ€è¦åœ¨å­ç±»æ–¹æ³•ä¸­æ‰©å±•çˆ¶ç±»é€»è¾‘çš„åœºæ™¯ã€‚

#### 5. å¤šå±‚ç»§æ‰¿
å¯ä»¥é€šè¿‡å¤šå±‚ç»§æ‰¿æ¥åˆ›å»ºæ›´å¤æ‚çš„ç»§æ‰¿é“¾ã€‚
```javascript
class Grandparent {
    constructor() {
        this.familyName = 'Smith';
    }
}

class Parent extends Grandparent {
    constructor(name) {
        super();
        this.name = name;
    }
}
class Child extends Parent {
    constructor(name, age) {
        super(name);
        this.age = age;
    }
    showInfo() {
        console.log(`Name: ${this.name}, Age: ${this.age}, Family: ${this.familyName}`);
    }
}
const child1 = new Child('Alice', 25);
child1.showInfo(); 
// è¾“å‡º: Name: Alice, Age: 25, Family: Smith
```
- **å¤šå±‚ç»§æ‰¿**: `Child` ç»§æ‰¿è‡ª `Parent`ï¼Œ`Parent` ç»§æ‰¿è‡ª `Grandparent`ï¼Œå½¢æˆäº†ä¸€ä¸ªä¸‰å±‚ç»§æ‰¿é“¾ã€‚
- **`super` çš„é€å±‚è°ƒç”¨**: åœ¨ `Parent` å’Œ `Child` çš„æ„é€ å‡½æ•°ä¸­ï¼Œéƒ½éœ€è¦è°ƒç”¨ `super()` æ¥ç¡®ä¿çˆ¶ç±»çš„æ„é€ å‡½æ•°è¢«æ‰§è¡Œã€‚

> [!summary] æ€»ç»“
> Contents
> - **`extends`** ç”¨äºå­ç±»ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚
> - **`super`** ç”¨äºè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°å’Œæ–¹æ³•ã€‚
> - å­ç±»å¯ä»¥è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¹¶é€šè¿‡ `super.method()` è°ƒç”¨çˆ¶ç±»ç‰ˆæœ¬çš„æ–¹æ³•ã€‚
> - ç»§æ‰¿æ”¯æŒå¤šå±‚çº§ï¼Œå¯ä»¥é€šè¿‡å¤šå±‚ç»§æ‰¿æ¥å®ç°å¤æ‚çš„å¯¹è±¡å…³ç³»ã€‚
> - é™æ€æ–¹æ³•ä¹Ÿå¯ä»¥è¢«å­ç±»ç»§æ‰¿å’Œé‡å†™ã€‚

- åƒåœ¾å›æ”¶æœºåˆ¶
åƒåœ¾å›æ”¶ (GC): åœ¨  JS ä¸­æœ‰è‡ªåŠ¨çš„åƒåœ¾å›æ”¶æœºåˆ¶, ä¾‹å¦‚å›æ”¶æ²¡æœ‰å¼•ç”¨çš„å¯¹è±¡, **åªéœ€è¦å°†ä¸å†ä½¿çš„å¯¹è±¡è®¾ç½®ä¸º null å³å¯**
```js
person1 = null
```

### (4) å‡½æ•°å¯¹è±¡çš„ call å’Œ apply  æ–¹æ³•
éƒ½ä¼šè°ƒç”¨å‡½æ•°æ‰§è¡Œ, **ä½†æ˜¯ call å’Œ apply å¯ä»¥æŒ‡å®šä¸€ä¸ªå¯¹è±¡ä¸ºç¬¬ä¸€ä¸ªå‚æ•°, å¹¶æˆä¸ºå‡½æ•°æ‰§è¡Œæ—¶çš„  this** , ä¸€èˆ¬é»˜è®¤çš„æ˜¯ window å¯¹è±¡, ä½†å¯ä»¥é‡‡ç”¨ apply  æˆ–è€…  call æŒ‡å®š 

```js
function fun(a,b){
}
var obj = New Object();
obj.a = 1;
fun.call(obj, 2,3);
fun.apply(obj,[2,3]);
```

æ­¤å¤–ä¼ å…¥çš„å‚æ•°é™¤äº† this è¿˜æœ‰ arguments å¯¹è±¡ 
arguments.callee æ˜¯å½“å‰æ­£åœ¨æŒ‡å‘çš„å‡½æ•°çš„å¯¹è±¡ 

### (5) JS é¢„å®šä¹‰å¯¹è±¡
window å¯¹è±¡ (window.alert), document å¯¹è±¡, navigator å¯¹è±¡
history å¯¹è±¡, location å¯¹è±¡ , screen å¯¹è±¡ 
navigator å¯¹ä¸ºæµè§ˆå™¨çš„å±æ€§, åç§°, ç‰ˆæœ¬å·ç­‰ç­‰ã€‚ä¸€èˆ¬é‡‡ç”¨ window.navigator æˆ–è€… navigator 
å¯ä»¥é€šè¿‡ navigator.property è®¿é—®å…¶å±æ€§, [navigator æ–‡æ¡£](https://www.w3schools.com/jsref/obj_navigator.asp)
globalThis å¯¹è±¡

#### 1. Navigator å¯¹è±¡
> [!caution] è¯´æ˜
> éœ€è¦è¯´æ˜, ä¸€èˆ¬æˆ‘ä»¬å¤§éƒ¨åˆ†å·²ç»ä¸ä½¿ç”¨ Navigator è¯†åˆ«ä¸åŒæµè§ˆå™¨, è€Œå¾€å¾€é‡‡ç”¨ `userAgent`  åˆ¤æ–­æè¿°æµè§ˆå™¨ä¿¡æ¯çš„å†…å®¹ã€‚
> ä¸åŒçš„æµè§ˆå™¨é‡‡ç”¨ `navigator.userAgent` æ˜¯ä¸åŒçš„, å¯ä»¥ console.Log è¿›è¡Œæ‰“å°ã€‚
> IE ç‰¹æ®Š, ä¸è€ƒè™‘ã€‚

| javaEnabled() | Returns true if the browser has Java enabled |
|---------------|----------------------------------------------|

#### 2. History å¯¹è±¡
å¯¹äº [history](https://www.w3schools.com/jsref/prop_win_history.asp)æä¾›äº†å†å²å¯¹è±¡, ä½†ä»…æœ‰ä¸€ä¸ªå±æ€§ length(),  è¡¨ç¤ºå½“å‰çª—å†å²ç»˜ç”»é¡µé¢çš„æ•°é‡, ä½†æ˜¯ä¸€èˆ¬ç”¨äºç•Œé¢çš„å‰è¿›å’Œåé€€å¾ˆæœ‰ç”¨ã€‚

| Property/Method | Description                                            |
|-----------------|--------------------------------------------------------|
| back()          | Loads the previous URL (page) in the history list      |
| forward()       | Loads the next URL (page) in the history list          |
| go()            | Loads a specific URL (page) from the history list      |
| length          | Returns the number of URLs (pages) in the history list |
å…¶ä¸­ go å¯ä»¥åŒæ—¶å®šä¹‰å‰è¿›æˆ–è€…åé€€

#### 3. location å¯¹è±¡
ä¸»è¦çš„å±æ€§å¦‚ä¸‹:
```js
console.log(location);          //è¾“å‡ºlocationå¯¹è±¡
console.log(location.href);     //è¾“å‡ºå½“å‰åœ°å€çš„å…¨è·¯å¾„åœ°å€
console.log(location.origin);   //è¾“å‡ºå½“å‰åœ°å€çš„æ¥æº
console.log(location.protocol); //è¾“å‡ºå½“å‰åœ°å€çš„åè®®
console.log(location.hostname); //è¾“å‡ºå½“å‰åœ°å€çš„ä¸»æœºå
console.log(location.host);     //è¾“å‡ºå½“å‰åœ°å€çš„ä¸»æœº
console.log(location.port);     //è¾“å‡ºå½“å‰åœ°å€çš„ç«¯å£å·
console.log(location.pathname); //è¾“å‡ºå½“å‰åœ°å€çš„è·¯å¾„éƒ¨åˆ†
console.log(location.search);   //è¾“å‡ºå½“å‰åœ°å€çš„?åè¾¹çš„å‚æ•°éƒ¨åˆ†
```

å¸¸ç”¨æ–¹æ³•:
```js
location.assign("http://11.com");  // è·³è½¬é¡µé¢ 
location.reload(true) // é‡æ–°åŠ è½½,  åˆ·æ–°æŒ‰é’®
location.replace("") // ç”¨æ–°çš„é¡µé¢æ›¿æ¢å½“å‰é¡µé¢(æ³¨æ„ä¸ä¼šç”Ÿæˆå†å²è®°å½•, ä¹Ÿä¸èƒ½å›é€€)
```

## ä¸‰ã€å…¶ä»–è¯­å¥ç”¨æ³•
### (1) å¾ªç¯è¯­å¥
é€»è¾‘åˆ¤æ–­è¯­å¥å’Œ C è¯­è¨€åŸºæœ¬å®Œå…¨ä¸€è‡´, åŒæ—¶æ”¯æŒåœ¨å¤šå¾ªç¯ä¸­åˆ›å»º label (Cä¸æ”¯æŒ)æ¥è·³å‡ºå¤šå±‚å¾ªç¯

ä½†æ˜¯ `[], {}, -1, -0.1` ç­‰ç­‰éƒ½ä¼šè¢«è®¤ä¸ºæ˜¯çœŸ, è€Œ `''`, null, undefined è®¤ä¸ºå‡ã€‚

```js
outer: for(var i = 0; i <  10; i++){
	for (var j = 0; j < 10; j++) {
		if (j == 5) {
			break outer;
		}
	}
}
```

ç¬¬äºŒ, åœ¨ JavaScript ä¸­ï¼Œ`for...in` å’Œ `for...of` æ˜¯ä¸¤ç§ä¸åŒçš„å¾ªç¯è¯­æ³•
1. **`for...in`**:
   - ç”¨äºéå†å¯¹è±¡çš„**å¯æšä¸¾å±æ€§**æˆ–æ•°ç»„çš„**ç´¢å¼•**ã€‚
   - éå†çš„æ˜¯å±æ€§åæˆ–ç´¢å¼•ï¼ˆåœ¨æ•°ç»„çš„æƒ…å†µä¸‹ï¼‰ï¼Œè€Œä¸æ˜¯å±æ€§çš„å€¼ã€‚
   - é€‚åˆç”¨äºå¯¹è±¡çš„é”®æˆ–æ•°ç»„çš„ç´¢å¼•ã€‚
```javascript
const arr = ['electron', 'node'];
for (var proc in arr) {
	console.log(proc);  // è¾“å‡º: 0, 1
}
```
   - åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`for...in` å¾ªç¯ä¼šéå† `arr` æ•°ç»„çš„ç´¢å¼•ï¼Œæ‰€ä»¥ä¼šè¾“å‡º `0` å’Œ `1`ï¼Œå³æ•°ç»„ä¸­å…ƒç´ çš„ç´¢å¼•ã€‚

æ­¤å¤–, for ... in å¾ªç¯å¯ä»¥ å¾ªç¯éå†å¯¹è±¡çš„å±æ€§
```js
for (var  prop_name in Parent){
	Parent.prop_name ;   // è®¿é—®å®ä¾‹ 
}
```

2. **`for...of`**:
   - ç”¨äºéå†**å¯è¿­ä»£å¯¹è±¡**ï¼ˆå¦‚æ•°ç»„ã€å­—ç¬¦ä¸²ã€Mapã€Set ç­‰ï¼‰ã€‚
   - éå†çš„æ˜¯**å€¼**è€Œä¸æ˜¯ç´¢å¼•æˆ–å±æ€§åã€‚
   - é€‚åˆç”¨äºè·å–æ•°ç»„çš„å€¼ã€å­—ç¬¦ä¸²çš„å­—ç¬¦ã€æˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡çš„å…ƒç´ ã€‚
   ```javascript
   const arr = ['electron', 'node'];
   for (const proc of arr) {
       console.log(proc);  // è¾“å‡º: electron, node
   }
   ```

```javascript  title:ç¤ºä¾‹:éå†Setå’ŒMap
const set = new Set(['a', 'b', 'c']);
for (const value of set) {
  console.log(value);  // è¾“å‡º: a, b, c
}
const map = new Map();
map.set('name', 'electron');
map.set('type', 'framework');

for (const [key, value] of map) {
  console.log(`${key}: ${value}`);
  // è¾“å‡º:
  // name: electron
  // type: framework
}
```

with ä½¿ç”¨è¾ƒå°‘, ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨;

### (2) æ•°ç»„å¯¹è±¡ Array 
push å‘ç»“å°¾æ·»åŠ  
unshift å‘å¼€å¤´æ·»åŠ  
shift åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›åˆ é™¤çš„å…ƒç´  
å…·ä½“å‚è€ƒ [Array æ–‡æ¡£è§£é‡Š](https://www.w3schools.com/jsref/jsref_obj_array.asp) 

```js
var arr = [1,2,3,4,5,6];
var arr = new Array();
arr.push(7,8,9,10)
console.log(arr.length);
```

å¦å¤– forEach ä¹Ÿå¯ä»¥ä½¿ç”¨
```js title:ForEach å‡½æ•°ç”¨æ³•
arr.forEach(function(value, index, obj){
	console.log(value + index + obj);   // obj
})
```

ä¾‹å¦‚ arr.sort å¯ä»¥é‡‡ç”¨æŒ‡å®šçš„è§„åˆ™:
```js
var arr = [1,2,3,4,5,6];
arr.sort((a,b)=>b-a); // é™åºæ’åˆ—
```

å¯ä»¥é‡‡ç”¨ flat å±•å¹³;
æ•°ç»„å¯ä»¥é‡‡ç”¨ Map æ˜ å°„,
æ•°ç»„å¯ä»¥**é‡‡ç”¨ flatMap() æ–¹æ³•**æ˜ å°„æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ,å¹¶å°†ç»“æœå‹ç¼©æˆä¸ºæ–°çš„æ•°ç»„, é€šå¸¸æ¯” map æ·±åº¦ä¸º  1 çš„ flat ç›¸åŒ 
```js
console.log([1,2,3,4].map(x=>x*10))
console.log([1,2,3,4].flatMap(x=> x*10));
```

### (3) å…¶ä»–å¸¸ç”¨å¯¹è±¡
åœ¨ JavaScript ä¸­æœ‰ä¸€ä¸ªå…¨å±€å¯¹è±¡:
windowï¼Œä»£è¡¨æµè§ˆå™¨çª—å£, è€Œå‡½æ•°ä¸­éœ€è¦è®¿é—®å…¨å±€å˜é‡å’Œå…¨å±€å‡½æ•°å¯ä»¥é‡‡ç”¨ window å¯¹è±¡; å…·ä½“å‚è€ƒ[Windows Object](https://www.w3schools.com/jsref/obj_window.asp) 

Math å¯¹è±¡  
Number å¯¹è±¡ (ä¸€èˆ¬64ä½æµ®ç‚¹æ•°æ ¼å¼ -> `+- 2^53 -1`)
Date å¯¹è±¡ : å‚è€ƒ[æ–‡æ¡£éƒ¨åˆ†](https://www.w3schools.com/jsref/jsref_obj_date.asp)
String å¯¹è±¡: å‚è€ƒ [String Methods](https://www.w3schools.com/js/js_string_methods.asp)
æ­£åˆ™è¡¨è¾¾å¼: RegExp ä¸€èˆ¬é‡‡ç”¨  emailReg ç­‰å­˜å‚¨æŸäº›æ­£åˆ™å€¼ [æ­£åˆ™è¡¨è¾¾å¼æ–‡æ¡£éƒ¨åˆ†](https://www.w3schools.com/jsref/jsref_obj_regexp.asp)
BigInt å¯¹è±¡:å¤§æ•´æ•°ç±»å‹(ç†è®ºä¸Šæ²¡æœ‰ä¸Šä¸‹é™) 
```js
let n = 521n;   // 
```

ES6-Symbol å¯¹è±¡:  Symbol å€¼æ˜¯å”¯ä¸€çš„,  ç”¨äºè§£å†³å‘½åå†²çªçš„é—®é¢˜, [å‚è€ƒé“¾æ¥](https://www.w3schools.com/js/js_es6.asp#mark_symbol) 
æ­¤å¤–, è¿˜æœ‰ <b><mark style="background: transparent; color: orange">Set å¯¹è±¡, Mapå¯¹è±¡ ,  Promise å¯¹è±¡ç­‰ç­‰</mark></b> , å…·ä½“ä¼šä¹‹åè®²è§£

### (4) å¯¹è±¡åˆ›å»º(var, let, const)
let å…³é”®å­—ä¸€èˆ¬ç”¨äº é™å®šä½œç”¨åŸŸ, ä¾‹å¦‚åœ¨ `{}` ä¸­çš„ let å£°æ˜, ç±»ä¼¼äºvar, ä½†ä¸ç›¸åŒçš„æ˜¯, ä¸éœ€è¦å°† let å®šä¹‰åœ¨ block çš„æœ€å¼€å¤´ã€‚
```js
// Using let in a block  
{  
    let x = 10;  
    console.log(x); // Outputs: 10  
}  
// console.log(x); // ReferenceError: x is not defined  

// Loop example  
for (let i = 0; i < 5; i++) {  
    console.log(i); // Outputs: 0, 1, 2, 3, 4  
}  
// console.log(i); // ReferenceError: i is not defined  

// Re-declaring with let  
let y = 20;  
// let y = 30; // SyntaxError: Identifier 'y' has already been declared
```

å…¶ä¸­, `var`ã€`let` å’Œ `const` æ˜¯ JavaScript ä¸­ç”¨äºå£°æ˜å˜é‡çš„ä¸‰ç§æ–¹å¼ã€‚å®ƒä»¬æœ‰ä¸åŒçš„ä½œç”¨åŸŸè§„åˆ™å’Œç‰¹æ€§ï¼Œé€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚

**var:**
`var` æ˜¯ JavaScript ä¸­æœ€æ—©çš„å˜é‡å£°æ˜æ–¹å¼ï¼Œå…¶ç‰¹æ€§å¦‚ä¸‹ï¼š
- **å‡½æ•°ä½œç”¨åŸŸ**ï¼š`var` å£°æ˜çš„å˜é‡åœ¨å‡½æ•°å†…å¯è§ï¼Œå³å…·æœ‰å‡½æ•°ä½œç”¨åŸŸã€‚åœ¨å‡½æ•°å¤–å£°æ˜çš„ `var` å˜é‡åˆ™æ˜¯å…¨å±€å˜é‡ã€‚
- **å˜é‡æå‡**ï¼š`var` å£°æ˜çš„å˜é‡ä¼šè¢«â€œæå‡â€åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚**å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ï¼Œä½†å…¶å€¼ä¸º `undefined`**ã€‚
- **å¯ä»¥é‡å¤å£°æ˜**ï¼šåœ¨åŒä¸€ä½œç”¨åŸŸå†…ï¼Œå¯ä»¥å¤šæ¬¡ä½¿ç”¨ `var` å£°æ˜ç›¸åŒåç§°çš„å˜é‡ï¼Œåç»­å£°æ˜ä¼šè¦†ç›–ä¹‹å‰çš„å€¼ã€‚

ç¤ºä¾‹ï¼š
```javascript
console.log(x); // undefined (å˜é‡æå‡)
var x = 10;
console.log(x); // 10
```

**let:**
`let` æ˜¯åœ¨ ES6 ä¸­å¼•å…¥çš„ï¼Œç”¨äºæ›¿ä»£ `var`ï¼Œå…·æœ‰æ›´ä¸¥æ ¼çš„ä½œç”¨åŸŸå’Œç‰¹æ€§ï¼š
- **å—çº§ä½œç”¨åŸŸ**ï¼š`let` å˜é‡åªåœ¨å£°æ˜çš„å— `{ }` å†…æœ‰æ•ˆã€‚è¿™æ„å‘³ç€å®ƒåœ¨å¾ªç¯æˆ–æ¡ä»¶è¯­å¥çš„å—å†…éƒ¨å£°æ˜æ—¶ï¼Œåªèƒ½åœ¨è¯¥å—å†…éƒ¨è®¿é—®ã€‚
- **ä¸å…è®¸é‡å¤å£°æ˜**ï¼šåœ¨åŒä¸€ä½œç”¨åŸŸå†…ï¼Œä¸å…è®¸ä½¿ç”¨ `let` å£°æ˜åŒåå˜é‡ã€‚
- **æ²¡æœ‰å˜é‡æå‡**ï¼š`let` å˜é‡åœ¨å£°æ˜ä¹‹å‰ä¸å¯ä½¿ç”¨ï¼Œå¦åˆ™ä¼šå¯¼è‡´ `ReferenceError`ã€‚
ç¤ºä¾‹ï¼š
```javascript
if (true) {
    let y = 20;
    console.log(y); // 20
}
// console.log(y); // ReferenceError: y is not defined

let z = 30;
// let z = 40; // SyntaxError: Identifier 'z' has already been declared
```

**const:**
`const` ä¹Ÿæ˜¯åœ¨ ES6 ä¸­å¼•å…¥çš„ï¼Œç”¨äºå£°æ˜å¸¸é‡ã€‚å®ƒå…·æœ‰ä¸ `let` ç›¸åŒçš„å—çº§ä½œç”¨åŸŸï¼Œä½†æœ‰ä¸€äº›é¢å¤–çš„é™åˆ¶:
- **å¿…é¡»åˆå§‹åŒ–**ï¼šä½¿ç”¨ `const` å£°æ˜å˜é‡æ—¶ï¼Œå¿…é¡»åœ¨å£°æ˜æ—¶èµ‹åˆå§‹å€¼ã€‚
- **ä¸å¯é‡æ–°èµ‹å€¼**ï¼š`const` å£°æ˜çš„å˜é‡ä¸èƒ½è¢«é‡æ–°èµ‹å€¼ã€‚å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œå˜é‡å†…å®¹ä¸èƒ½æ”¹å˜ã€‚
- **å¯¹äºå¼•ç”¨ç±»å‹**ï¼š`const` å£°æ˜çš„å¼•ç”¨ç±»å‹ï¼ˆå¦‚å¯¹è±¡å’Œæ•°ç»„ï¼‰å˜é‡ï¼Œå¼•ç”¨åœ°å€ä¸å¯å˜ï¼Œä½†å¯¹è±¡çš„å±æ€§æˆ–æ•°ç»„çš„å…ƒç´ å¯ä»¥ä¿®æ”¹ã€‚
ç¤ºä¾‹ï¼š
```javascript
const a = 100;
// a = 200; // TypeError: Assignment to constant variable

const obj = { name: "Alice" };
obj.name = "Bob"; // å…è®¸ä¿®æ”¹å¯¹è±¡çš„å±æ€§
console.log(obj.name); // "Bob"
```

| ç‰¹æ€§              | `var`                     | `let`                       | `const`                   |
|-------------------|---------------------------|-----------------------------|---------------------------|
| ä½œç”¨åŸŸ            | å‡½æ•°ä½œç”¨åŸŸ                | å—çº§ä½œç”¨åŸŸ                  | å—çº§ä½œç”¨åŸŸ                |
| å˜é‡æå‡          | æœ‰                        | æ—                           | æ—                         |
| å¯å¦é‡å¤å£°æ˜      | å…è®¸                      | ä¸å…è®¸                      | ä¸å…è®¸                    |
| å¯å¦é‡æ–°èµ‹å€¼      | å…è®¸                      | å…è®¸                        | ä¸å…è®¸                    |
| å¿…é¡»åˆå§‹åŒ–        | å¦                        | å¦                          | æ˜¯                        |

åœ¨ç°ä»£ JavaScript å¼€å‘ä¸­ï¼Œé€šå¸¸ä¼˜å…ˆä½¿ç”¨ `let` å’Œ `const`ï¼Œå› ä¸ºå®ƒä»¬çš„ä½œç”¨åŸŸæ›´æ¸…æ™°ï¼Œå‡å°‘äº†æ„å¤–é”™è¯¯çš„å‘ç”Ÿã€‚

### (5) å¯é€‰é“¾æ“ä½œç¬¦ 
å¯¹äºåˆ¤æ–­ä¸€ä¸ªå±æ€§å€¼æœ‰æ²¡æœ‰ä¼ å…¥, å¯ä»¥é‡‡ç”¨ `config &&  config.db && config.db.host` ( && æ˜¯  **é€å±‚æ£€æŸ¥æ˜¯å¦ä¸º `null` æˆ– `undefined`**ï¼Œå¹¶è¿”å›**æœ€åä¸€ä¸ªå€¼**ï¼ˆå³ `config.db.host`))

æƒ³è¦è¿”å›ç¬¬ä¸€ä¸ªä¸ä¸º `null` æˆ– `undefined` çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ **ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ `??`** æˆ– **é€»è¾‘æˆ–è¿ç®—ç¬¦ `||`** 
```js
let result = config?.db?.host ?? "é»˜è®¤å€¼"; // å¦‚æœ config.db.host ä¸å­˜åœ¨åˆ™è¿”å› "é»˜è®¤å€¼"
```
ä¸Šè¿°çš„é€å±‚æ£€æŸ¥å¯ä»¥é€‰ç”¨å¯é€‰é“¾æ“ä½œç¬¦è¿›è¡Œå®ç°:
```js
function connect(config) {
    // const dbHost = config && config.db && config.db.host;
    const dbHost = config?.db?.host;  // å¯é€‰é“¾æ“ä½œç¬¦
    console.log(dbHost);
}

connect({
    db: {
        host: "192.168.1.100",
        username: "root"
    },
    cache: {
        host: "192.168.1.200",
        username: "admin"
    }
})
```

## å››ã€é«˜çº§æ•°æ®ç±»å‹
### (1) Set å’Œ Map 
é›†åˆç±»å‹:
Set: add(), delete(), has(), clear(),  size();
Map: set(), get(),  has(), clear(),  size();
```js 
let s = new Set();
let m = new Map();
```

### (2) è¿­ä»£å™¨
#### 1. è¿­ä»£å™¨ç±»å‹(Symbol.iterator)
Symbol éƒ¨åˆ†å‚è€ƒ[[ğŸ“˜ClassNotes/âŒ¨ï¸ Pre-front Programming/ğŸµJavaScript/8. å¼‚å¸¸å¤„ç†,é—­åŒ…å¼•å…¥å’Œæ¨¡å—åŒ–#è¡¥å…… Symbol å¯¹è±¡|8. å¼‚å¸¸å¤„ç†,é—­åŒ…å¼•å…¥]] éƒ¨åˆ†.
è¿­ä»£å™¨(Iterator)æ˜¯ä¸€ç§æ¥å£, ç”¨äºä¸ºä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚
iterator æ¥å£ä¸»è¦ä¾› for... of ä½¿ç”¨, <mark style="background: transparent; color: red">å¯¹äºä»»ä½•æ•°æ®, åªéœ€è¦éƒ¨ç½² Iterator æ¥å£,å³å¯é‡‡ç”¨ for...of å®Œæˆéå†æ“ä½œ</mark>ã€‚

å¯¹äºåŸç”Ÿæ•°æ®ç±»å‹
```js
array 
arguments 
set 
map
string 
typedArray
nodeList
```

æ¯æ¬¡è°ƒç”¨ `next()` ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ `{ value: å½“å‰å€¼, done: æ˜¯å¦è¿­ä»£ç»“æŸ }`ï¼Œå…¶ä¸­ `done` åœ¨æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åå˜ä¸º `true`, è€Œå®é™…ä¸Š iterator ä¼šåœ¨ done ç»“æœè¿”å› true ä¹‹åè‡ªåŠ¨åœæ­¢ã€‚
```js
const array1 = [1, 2, 3];
let iterator =  array1[Symbol.iterator]();
console.log(iterator.next().value);
console.log(iterator.next().value);
```

å¦å¤–å¯¹äºå­—ç¬¦ä¸², å¯ä»¥é‡‡ç”¨
```js
const str = "Hello";

for (const char of str) {
    console.log(char);
}

// æ‰‹åŠ¨ä½¿ç”¨è¿­ä»£å™¨
const strIterator = str[Symbol.iterator]();
console.log(strIterator.next().value); // "H"
console.log(strIterator.next().value); // "e"
console.log(strIterator.next().value); // "l"
```

å¯¹äº Set, Map çš„éå†æ–¹æ³•ï¼Œå…·ä½“å¦‚ä¸‹:
```js
const mySet = new Set([1, 2, 3]);

for (const value of mySet) {
    console.log(value); // è¾“å‡º 1, 2, 3
}
const myMap = new Map([['a', 1], ['b', 2], ['c', 3]]);
for (const [key, value] of myMap) {
    console.log(key, value); // è¾“å‡º 'a' 1, 'b' 2, 'c' 3
}
```

#### 2. è‡ªå®šä¹‰è¿­ä»£å™¨ç±»å‹
æˆ‘ä»¬å¯ä»¥ä¸ºè‡ªå®šä¹‰å¯¹è±¡å®ç° `Symbol.iterator`ï¼Œä»è€Œè®©å®ƒå…·å¤‡è¿­ä»£åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå®ç°ä¸€ä¸ªç®€å•çš„èŒƒå›´å¯¹è±¡ï¼Œä½¿å…¶èƒ½å¤Ÿç”Ÿæˆä» `start` åˆ° `end` çš„æ•°å­—åºåˆ—ï¼š
```js
const range = {
    start: 1,
    end: 5,
    [Symbol.iterator]: function() {
        let current = this.start;
        const end = this.end;
        return {
            next: function() {
                if (current <= end) {
                    return { value: current++, done: false };
                } else {
                    return { value:undefined, done: true };
                }
            }
        };
    }
};

for (const num of range) {
    console.log(num); // è¾“å‡º 1, 2, 3, 4, 5
}
```
å…¶ä¸­: å¯¹äºè‡ªå¸¦å‚æ•°, function å¯ä»¥çœç•¥, ä¾‹å¦‚å†™æˆ:
```
[Symbol.iterator]():
next(){}
```

### (3) Promise å¯¹è±¡
#### 1. Promise å¯¹è±¡åŸºç¡€æ¦‚å¿µ
Promise å¯¹è±¡å‚è€ƒ[js_promise](https://www.w3schools.com/js/js_promise.asp)éƒ¨åˆ†, ä¹Ÿæ˜¯ ES6 å¼•å…¥çš„æ–°çš„å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ, Promise æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°, èƒ½å¤Ÿ<b><mark style="background: transparent; color: orange">å°è£…å¼‚æ­¥æ“ä½œå‡½æ•°</mark></b>ã€‚

Promise éœ€è¦å®šä¹‰ä¸¤ä¸ªå‡½æ•°, **æˆåŠŸå, ä¼šè°ƒç”¨ myResolve å‡½æ•°å¤„ç†**, è€Œ**å¤±è´¥ä¹‹åä¼šè°ƒç”¨  myReject å‡½æ•°å¤„ç†**; å®é™…ä¸Šæ˜¯åœ¨ Promise ä¸­å®šä¹‰éœ€è¦çš„ä¸¤ä¸ªå‡½æ•°:
```js
letÂ myPromise =Â newÂ Promise(function(myResolve, myReject) {  
// "Producing Code" (May take some time)
Â  myResolve();Â // when successful   -> è¿”å› value   
Â  myReject(); Â // when error  -> å®é™…ä¸Šè¿”å› err 
});
//å¦‚æœè°ƒç”¨ myResolve ä¸æˆåŠŸ, åˆ™è°ƒç”¨ myReject æ‹’ç» 

// è°ƒç”¨ then æ–¹æ³•:
myPromise.then(
Â Â function(value) {Â /* code if successful */Â },  // å½“è¿è¡ŒæˆåŠŸæ—¶æ‰§è¡Œ
Â Â function(error) {Â /* code if some error */Â }  
);
```
ä¸»è¦çš„æ–¹æ³•å‚è€ƒ[Js Promise](https://www.w3schools.com/jsref/jsref_obj_promise.asp), æ–¹æ³•ç½—åˆ—å¦‚ä¸‹:
![[attachments/Pasted image 20241104164532.png]] 

å…¶ä¸­, ==error éƒ¨åˆ†æ˜¯å¯ä»¥çœç•¥çš„== 
#### 2. Promise-then æ–¹æ³•
then å®é™…ä¸Šæ˜¯ä¸€ç§ç­‰å¾…æœºåˆ¶, å³ç­‰å¾…ä¸€ä¸ª Promise æ‰§è¡Œå®Œæ¯•ä¹‹å, å†å»æ‰§è¡Œ then ä¸­çš„å†…å®¹:

ä¾‹å¦‚åˆ›å»ºä¸€ä¸ªæ¥å£, æœ€ç»ˆå¦‚æœæˆåŠŸè°ƒç”¨ resolve,å¤±è´¥è°ƒç”¨ reject, è€Œç›¸åº”çš„ p.then è·å–åˆ°å“åº”ä¹‹å, ä¼šè¿”å› value æˆ–è€… err, å¯ä»¥åœ¨ then ä¸­æŒ‡å®šä¸åŒçš„å¤„ç†æ–¹å¼:
```js
// æ¥å£åœ°å€: https://api.apiopen.top/getJoke
const p = new Promise((resolve, reject) => {
    //1. åˆ›å»ºå¯¹è±¡
    const xhr = new XMLHttpRequest();
    //2. åˆå§‹åŒ–
    xhr.open("GET", "https://api.apiopen.top/getJoke");
    //3. å‘é€
    xhr.send();
    //4. ç»‘å®šäº‹ä»¶, å¤„ç†å“åº”ç»“æœ
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
            //åˆ¤æ–­å“åº”çŠ¶æ€ç  200-299
            if (xhr.status >= 200 && xhr.status < 300) {
                //è¡¨ç¤ºæˆåŠŸ
                resolve(xhr.response);
            } else {
                //å¦‚æœå¤±è´¥
                reject(xhr.status);
            }
        }
    }
});
//  å¯ä»¥ä¸ºå¯¹åº”çš„è¿”å›å€¼æŒ‡å®šå›è°ƒ
p.then(
	function (value) {
	    console.log(value);
	},
	function (err) {
	    console.error(err);
	}
);
```

**è°ƒç”¨ then æ–¹æ³•æ—¶, then æ–¹æ³•è¿”å›ç»“æœä»ç„¶æ˜¯ Promise å¯¹è±¡**(å›è°ƒå‡½æ•°æ‰§è¡Œç»“æœä¸ºvalue è€Œépromiseæ—¶æ˜¯æˆåŠŸçš„) 
```js
//åˆ›å»º promise å¯¹è±¡
const p = new Promise((resolve, reject) => {
    setTimeout(() => {
        resolve("ç”¨æˆ·æ•°æ®");
    }, 1000)
});

//é“¾å¼è°ƒç”¨+ç®­å¤´å‡½æ•°
p.then(value => {
    console.log(value);   // "ç”¨æˆ·æ•°æ®"
    return 'Hello'; // è¿”å›ä¸€ä¸ªæ–°å€¼, ä¼ é€’åˆ°ä¸‹ä¸€ä¸ª then ä¸­
}).then(value => {
    console.log(value);
});
```
ä¸Šè¿°æ–¹æ³•å®é™…ä¸Šæ˜¯è°ƒç”¨äº† promise ä¸€æ¬¡, å³ç¬¬ä¸€ä¸ª promise.then å®é™…ä¸Šè·å–äº†"ç”¨æˆ·æ•°æ®". value ä¼šæå–å…¶ä¸­çš„ Promise è¿”å›å€¼

#### 3. Promise-catch æ–¹æ³•
å¯¹äºä»…æƒ³è¦å¤„ç†é”™è¯¯çŠ¶æ€çš„æƒ…å†µ, å¯ä»¥é‡‡ç”¨ promise-catch 
```js
const p = New Promise(resolve, reject){
	if (....){
		resolve();
	}else{
		reject();
	}
}
p.catch (err => {
	console.log(error);
})
```

#### 4. å¤š Promise å¹¶å‘æ‰§è¡Œ
åœ¨åˆ›å»ºå¤šä¸ª `Promise` è€Œä¸ä½¿ç”¨ `await` æˆ– `.then()` æ—¶ï¼Œæ‰€æœ‰çš„ `Promise` ä¼šç«‹å³å¯åŠ¨ï¼Œå„è‡ªçš„å¼‚æ­¥ä»»åŠ¡ä¼š**å¹¶å‘**æ‰§è¡Œï¼ˆå‡ ä¹åŒæ—¶å¼€å§‹ï¼‰ï¼Œç­‰å¾…çš„è¿‡ç¨‹æ˜¯å¹¶è¡Œçš„ã€‚è™½ç„¶å®ƒä»¬çš„æ‰§è¡Œé¡ºåºå¯èƒ½ä¼šå› ä¸ºåˆ›å»ºé¡ºåºè€Œç¨æœ‰ä¸åŒï¼Œä½†å®ƒä»¬æœ¬è´¨ä¸Šä¸ä¼šå½¼æ­¤é˜»å¡ï¼Œå› è€Œä¼šå‘ˆç°å‡ºç±»ä¼¼â€œåŒæ­¥â€æ‰§è¡Œçš„æ•ˆæœ

ä¾‹å¦‚:
```js
const promise1 = new Promise((resolve) => {
  console.log("Promise 1 started");
  setTimeout(() => {
    console.log("Promise 1 resolved");
    resolve();
  }, 1000);
});

const promise2 = new Promise((resolve) => {
  console.log("Promise 2 started");
  setTimeout(() => {
    console.log("Promise 2 resolved");
    resolve();
  }, 500);
});

console.log("Promises created but not awaited");
```

è¾“å‡ºç»“æœä¸º:
```js
Promise 1 started
Promise 2 started
Promises created but not awaited
Promise 2 resolved
Promise 1 resolved
```

#### 5. Promise.race å’Œå¤š Promise ä¼˜å…ˆè¿”å›
`Promise.race` æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨**äºå¤„ç†å¤šä¸ª Promise å¯¹è±¡çš„å¹¶å‘æ‰§è¡Œ**ã€‚å®ƒçš„åŠŸèƒ½æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œè¯¥ Promise ä¼šåœ¨ä¼ å…¥çš„ Promise ä¸­ç¬¬ä¸€ä¸ªæ”¹å˜çŠ¶æ€ï¼ˆæ— è®ºæ˜¯ fulfilled è¿˜æ˜¯ rejectedï¼‰æ—¶è¢«è§£å†³æˆ–æ‹’ç»ã€‚
```javascript
Promise.race(iterable);
```
- **iterable**: ä»»ä½•å¯è¿­ä»£å¯¹è±¡ï¼ˆä¾‹å¦‚æ•°ç»„ï¼‰é‡Œé¢çš„ Promise å¯¹è±¡ã€‚
- è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå…¶çŠ¶æ€ä¸é¦–å…ˆæ”¹å˜çŠ¶æ€çš„ Promise çŠ¶æ€ç›¸åŒã€‚
```javascript
const promise1 = new Promise((resolve, reject) => {
  setTimeout(resolve, 100, 'ç¬¬ä¸€');
});
const promise2 = new Promise((resolve, reject) => {
  setTimeout(reject, 50, 'ç¬¬äºŒ');
});
// æ˜¾ç„¶ä¸Šè¿°ä¸¤ä¸ªæ˜¯å¹¶å‘æ‰§è¡Œçš„
Promise.race([promise1, promise2])
  .then((value) => {
    console.log(value); // è¾“å‡º: "ç¬¬ä¸€"ï¼ˆå› ä¸º promise2 å…ˆè¢«æ‹’ç»ï¼Œä½†æ˜¯ promise1 å…ˆè§£å†³ï¼‰
  })
  .catch((error) => {
    console.log(error); // è¾“å‡º: "ç¬¬äºŒ"
  });
```

- ä¸€æ—¦ç¬¬ä¸€ä¸ª Promise æ”¹å˜çŠ¶æ€ï¼Œè¿”å›çš„ Promise å°±ä¼šç«‹å³å˜ä¸ºè¯¥çŠ¶æ€ï¼Œå¹¶å¸¦ä¸Šç›¸åº”çš„ç»“æœï¼ˆå¦‚æœæ˜¯ fulfilled å°±å¸¦ç€è§£å†³çš„å€¼ï¼Œå¦‚æœæ˜¯ rejected å°±å¸¦ç€æ‹’ç»çš„åŸå› ï¼‰ã€‚å› æ­¤ä¸Šè¿°ä»£ç å®é™…ä¸Šæ˜¯è¿”å› error åœ¨ç¬¬äºŒä¸ªè¢«æ‹’ç»çš„;
- `Promise.race` è¿”å›çš„ Promise **åªä¼šä»ç¬¬ä¸€ä¸ªè§£å†³æˆ–æ‹’ç»çš„ Promise ä¸­è·å–å€¼ï¼Œå…¶ä»–çš„ Promise ä¼šç»§ç»­æ‰§è¡Œ**ã€‚
- **å¦‚æœæ²¡æœ‰ä»»ä½• Promise è¢«è§£å†³æˆ–æ‹’ç»ï¼Œåˆ™è¿”å›çš„ Promise ä¼šå¤„äºæŒ‚èµ·çŠ¶æ€**ã€‚
`Promise.race` ç”¨äºç®¡ç†å¤šä¸ªå¼‚æ­¥æ“ä½œçš„ç«èµ›æƒ…å½¢ï¼Œé€šå¸¸åœ¨ç½‘ç»œè¯·æ±‚çš„åœºæ™¯ä¸­ä½¿ç”¨ï¼Œå¦‚å®ç°è¶…æ—¶æœºåˆ¶ç­‰ã€‚

#### 6. ä½¿ç”¨ setTimeout æ¨¡æ‹Ÿ Promise è¶…æ—¶ç­‰å¾… 
æˆ‘ä»¬å¯ä»¥ç”¨ `setTimeout` æ¥<mark style="background: transparent; color: red">æ¨¡æ‹Ÿä¸€ä¸ªéœ€è¦å»¶è¿Ÿçš„å¼‚æ­¥æ“ä½œ</mark>ã€‚
ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª `delay` å‡½æ•°ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´åè¿”å›ä¸€ä¸ªå®ŒæˆçŠ¶æ€çš„ `Promise`, ä½†æ˜¯è¿™ä¸ªä¸€èˆ¬å»¶æ—¶æ¯”è¾ƒé•¿, å› æ­¤å¾€å¾€ä¸ä½¿ç”¨è¿™ç§æ–¹æ³•:
```js
function delay(ms) {
    return new Promise((resolve) => {
        setTimeout(resolve, ms);
    });
}
// ä½¿ç”¨ delay å‡½æ•°ç­‰å¾… 3 ç§’é’Ÿ
delay(3000).then(() => {
    console.log("3 ç§’é’Ÿåæ‰§è¡Œ");
});
```
åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬<mark style="background: transparent; color: red">å¯èƒ½æƒ³è®¾ç½®ä¸€ä¸ªç­‰å¾…è¶…æ—¶åŠŸèƒ½</mark>ï¼Œæ¯”å¦‚åœ¨ç½‘ç»œè¯·æ±‚ä¸­ç­‰å¾…ä¸€æ®µæ—¶é—´åè‡ªåŠ¨åœæ­¢ã€‚è¿™æ—¶å¯ä»¥ç”¨ `Promise.race` æ¥**ç»“åˆä¸€ä¸ªè¶…æ—¶** `Promise` å’ŒåŸå§‹ `Promise`:
```js
function fetchDataWithTimeout(url, timeout) {
    // 1. åŸå§‹è¯·æ±‚çš„ Promise
    const fetchPromise = fetch(url);
    // 2. è¶…æ—¶çš„ Promise
    const timeoutPromise = new Promise((_, reject) => {
        setTimeout(() => reject(new Error("è¯·æ±‚è¶…æ—¶")), timeout);
    });

    // 3. ä½¿ç”¨ Promise.race ç­‰å¾…ç¬¬ä¸€ä¸ªå®Œæˆçš„
    return Promise.race([fetchPromise, timeoutPromise]);
}

// è°ƒç”¨ç¤ºä¾‹ï¼šå¦‚æœ 2 ç§’å†…è¯·æ±‚æœªå®Œæˆï¼Œåˆ™è§¦å‘è¶…æ—¶
fetchDataWithTimeout("https://jsonplaceholder.typicode.com/posts", 2000)
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error(error.message));
```
è¯´æ˜:
1. `fetchPromise` æ˜¯å®é™…çš„ç½‘ç»œè¯·æ±‚çš„ `Promise`ã€‚
2. `timeoutPromise` æ˜¯ä¸€ä¸ªåœ¨æŒ‡å®šæ—¶é—´åè§¦å‘å¤±è´¥çš„ `Promise`ã€‚
3. `Promise.race([fetchPromise, timeoutPromise])` ç­‰å¾…å…¶ä¸­ç¬¬ä¸€ä¸ªå®Œæˆçš„ `Promise`ï¼Œè‹¥è¯·æ±‚åœ¨è¶…æ—¶å‰å®Œæˆåˆ™è¿”å›æ•°æ®ï¼Œå¦åˆ™è§¦å‘è¶…æ—¶é”™è¯¯ã€‚
ä¹Ÿå¯ä»¥å°†è¿™ç§è¶…æ—¶åŠŸèƒ½å°è£…åˆ°ä¸€ä¸ªé€šç”¨å‡½æ•°ä¸­ï¼Œä½¿å¾—å®ƒèƒ½ä¸ºä»»æ„ `Promise` æ·»åŠ è¶…æ—¶:
```js
function withTimeout(promise, ms) {
    const timeoutPromise = new Promise((_, reject) => {
        setTimeout(() => reject(new Error("æ“ä½œè¶…æ—¶")), ms);
    });
    return Promise.race([promise, timeoutPromise]);
}

// ç¤ºä¾‹ï¼šå¯¹ä»»æ„ Promise æ·»åŠ è¶…æ—¶åŠŸèƒ½
const myPromise = new Promise(resolve => {
    setTimeout(() => resolve("æ“ä½œæˆåŠŸ"), 3000);
});

withTimeout(myPromise, 2000)
    .then(result => console.log(result))
    .catch(error => console.error(error.message)); // è¾“å‡º "æ“ä½œè¶…æ—¶"

```
è¿™æ ·ï¼Œé€šè¿‡ä½¿ç”¨ `setTimeout` å’Œ `Promise.race`ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä¸ºä»»ä½•å¼‚æ­¥æ“ä½œè½»æ¾å®ç°è¶…æ—¶æ§åˆ¶ã€‚


### (4) å¯¹è±¡æ–¹æ³•æ‹“å±•
#### 1. å¸¸ç”¨å±æ€§è¡¥å……
å¯¹è±¡æœ‰å¦‚ä¸‹çš„ç‰¹æ®Šå±æ€§:
```js
Object.keys();  // å¯æšä¸¾çš„é”®å€¼æ•°ç»„
Object.values();   // 
Object.entries();  //  ç»™å®šè‡ªèº«å±æ€§çš„å¯éå† [key, value] æ•°ç»„
Object.getOwnPropertyDescriptors();    // è¿”å›æŒ‡å®šå¯¹è±¡æ‰€æœ‰è‡ªèº«å±æ€§çš„æè¿°å¯¹è±¡
Object.fromEntries();  //  å°†é”®å€¼æ•°ç»„è½¬åŒ–ä¸ºå¯¹è±¡
```
ä¾‹å¦‚:
```js
const m  = new Map(Objec.entries(obj));
m.get("name");
```

#### 2. å¯¹è±¡å±•å¼€å’Œå¯¹è±¡åˆå¹¶
å‚è€ƒ[[#(1) æ‰©å±•è¿ç®—ç¬¦]]
```js
// å¯¹è±¡å±•å¼€ç¤ºä¾‹:
function connect({host, port, ...user}) {
    console.log(host);
    console.log(port);
    console.log(user);   // user æ˜¯å±•å¼€åå†åˆå¹¶çš„å¯¹è±¡
}
connect({
    host: '127.0.0.1',
    port: 3306,
    username: 'root',
    password: 'root',
    type: 'master'
});

// å¯¹è±¡åˆå¹¶ç¤ºä¾‹
const skillOne = {
    q: 'å¤©éŸ³æ³¢'
};
const skillTwo = {
    w: 'é‡‘é’Ÿç½©'
};
const skillThree = {
    e: 'å¤©é›·ç ´'
};
const skillFour = {
    r: 'çŒ›é¾™æ‘†å°¾'
};
const mangseng = {...skillOne, ...skillTwo, ...skillThree, ...skillFour};
console.log(mangseng);  // å¾—åˆ°çš„æ˜¯ object å¯¹è±¡
```

## äº”ã€æ‹“å±•é«˜çº§å‡½æ•°æ–¹æ³•
### (1) æ‰©å±•è¿ç®—ç¬¦
æ‰©å±•è¿ç®—ç¬¦ç”¨äºå°†å¤šä¸ªå‚æ•°è¿›è¡Œè§£åŒ…, ä¾‹å¦‚:
```js
a =  ["A", "B","C"];
console.log(...a);  //  "A"  "B"   "C"
```

ä¹Ÿå¯ä»¥å±•å¼€å¯¹è±¡:
```js
let A = {
	"test1":"Hello, world";
}
let m = {...A, ...B};
console.log(m);    // å°† A, B ä¸­éƒ¨åˆ†åˆ†åˆ«å±•å¼€è¾“å‡º
```

### (2) rest å‚æ•°
rest å‚æ•°ç±»ä¼¼äº arguments å‚æ•°, å³ ...args, ä½†æ˜¯**æ›´åŠ é€‚åˆä¸å®šå‚æ•°çš„åœºæ™¯**:
```js
function  add(a,b,...args){
	console.log(a,b, args);   // args å®é™…ä¸Šæ˜¯æ•°ç»„, è€Œ ... è§£åŒ…å¹¶ä¸”ä¼ å…¥ 
}
```

### (3) ç”Ÿæˆå™¨
#### 1. ç”Ÿæˆå™¨å‡½æ•°å’Œ yield ä½¿ç”¨
ç”Ÿæˆå™¨å‡½æ•°æ˜¯ä¸€ç§ ES6 æä¾›çš„å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ, å¾€å¾€é€šè¿‡ function* å®šä¹‰, å¹¶é‡‡ç”¨ yield è¿”å›å€¼ã€‚
ä¸[[#(4) è¿­ä»£å™¨]]ç±»ä¼¼çš„, é‡‡ç”¨ next æ–¹æ³•è®¿é—®ä¸‹ä¸€ä¸ªå¯¹è±¡; åŒæ—¶ä¹Ÿæ”¯æŒè¿›è¡Œ for....of éå†è¯­æ³•:
```js
function* generatorFunction() {
    yield 1;
    yield 2;
    yield 3;
}

// è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡
const generator = generatorFunction();
console.log(generator.next());
console.log(generator.next());
for (let v of generator()){
	console.log(v);
}
```

é‡‡ç”¨ç”Ÿæˆå™¨å¯ä»¥å®ç°æ›´åŠ ç®€æ´çš„è¿­ä»£å™¨å®ç°: 
```js
function* fibonacciGenerator() {
    let a = 0, b = 1;
    while (true) {
        yield a;
        [a, b] = [b, a + b];
    }
}

const fib = fibonacciGenerator();
console.log(fib.next().value); // 0
console.log(fib.next().value); // 1
console.log(fib.next().value); // 1
```
å¯¹äºä¼ å…¥å®å‚çš„æƒ…å†µ, æ¯ä¸€æ¬¡å¯ä»¥ä¼ å…¥ä¸åŒå®å‚ã€‚

#### 2. ç”¨ yield  å’Œç”Ÿæˆå™¨å®ç°åç¨‹:
ç”Ÿæˆå™¨å‡½æ•°çš„æš‚åœç‰¹æ€§å¯ä»¥ç”¨æ¥æ§åˆ¶å¼‚æ­¥æµç¨‹ï¼Œå°¤å…¶åœ¨ä½¿ç”¨ `yield` æ¥æš‚åœå’Œç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆæ—¶æ›´ä¸ºç›´è§‚ã€‚è¿™åœ¨ä½¿ç”¨ `async/await` ä¹‹å‰éå¸¸æµè¡Œï¼Œé…åˆ `Promise` å¯ä»¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚
ä¾‹å¦‚å®šä¹‰ä¸€ä¸ª  fetchData å‡½æ•°:
```js 
function fetchData(url) {
    return new Promise(resolve => {
        setTimeout(() => resolve(`Data from ${url}`), 1000);    // resolve è¿”å› Promise å¯¹è±¡ 
    });
}
```
<mark style="background: transparent; color: red">éœ€è¦è¯´æ˜çš„æ˜¯, yield æ–¹æ³•ä¸ä»…èƒ½å¤Ÿåœ¨ç›¸åº”çš„éƒ¨åˆ†è¿”å›å€¼, ä¹Ÿèƒ½å¤Ÿåœ¨æ–­ç‚¹éƒ¨åˆ†æ¥å—å¤–éƒ¨æä¾›çš„å€¼: å¦‚ä¸‹æ‰€ç¤º:</mark> (å…¶ä¸­, è°ƒç”¨then æ–¹æ³•æ—¶, å¼€å§‹æ‰§è¡Œåˆ° yield åœæ­¢, next å¯ä»¥ä¼ å…¥ç›¸åº”çš„å€¼)
```js title:å¼‚æ­¥ç¼–ç¨‹(åç¨‹)
function* asyncGenerator() {
    const data1 = yield fetchData("url1");
    console.log(data1);
    const data2 = yield fetchData("url2");
    console.log(data2);
}
const asyncGen = asyncGenerator();
asyncGen.next().value.then(data1 => {
    asyncGen.next(data1).value.then(data2 => {
        asyncGen.next(data2);
    });
});
```
åˆ†è§£æ­¥éª¤:
1. `asyncGen.next()` å–å¾—ç”Ÿæˆå™¨çš„ç¬¬ä¸€ä¸ª `yield` å€¼ï¼Œå¹¶å°†å®ƒä½œä¸ºä¸€ä¸ª `Promise`ã€‚
2. è°ƒç”¨ `.then(data1 => {...})` æ¥ç­‰å¾…è¿™ä¸ª `Promise` çš„å®Œæˆï¼Œå½“å®ƒå®Œæˆåè¿”å› `data1`ã€‚
3. åœ¨ç¬¬ä¸€ä¸ª `.then` ä¸­ï¼Œè°ƒç”¨ `asyncGen.next(data1)` å°† `data1` ä¼ å›ç”Ÿæˆå™¨ã€‚ç”Ÿæˆå™¨ç»§ç»­è¿è¡Œåˆ°ä¸‹ä¸€ä¸ª `yield` å¹¶è¿”å›å¦ä¸€ä¸ª `Promise`ã€‚
4. é€šè¿‡ `.then(data2 => {...})` å†æ¬¡ç­‰å¾…ä¸‹ä¸€ä¸ª `Promise` å®Œæˆï¼Œå°† `data2` ä¼ å›ç”Ÿæˆå™¨ï¼Œæœ€ç»ˆç»“æŸã€‚

### (4) async å’Œ await å®ç°å¼‚æ­¥ä»£ç 
ä¸Šé¢ç”Ÿæˆå™¨ yield çš„å†™æ³•åµŒå¥—å±‚çº§è¾ƒæ·±è€Œä¸”ä¸ç›´è§‚ã€‚ä¸ºç®€åŒ–å¼‚æ­¥ä»£ç ï¼ŒES2017 å¼•å…¥äº† `async` å’Œ `await`ï¼Œå¯ä»¥ä½¿ä»£ç æ›´ç®€æ´æ˜“è¯»ã€‚

`async` å’Œ `await` æ˜¯ç”¨äºç®€åŒ–å¤„ç† `Promise` çš„å¼‚æ­¥æ“ä½œçš„æ–°è¯­æ³•:
- **`async` å‡½æ•°**ï¼šå£°æ˜ä¸º `async` çš„å‡½æ•°ä¼šè‡ªåŠ¨è¿”å›ä¸€ä¸ª `Promise` å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ `await` åœ¨å‡½æ•°å†…éƒ¨ç­‰å¾…å¼‚æ­¥æ“ä½œã€‚
- **`await` è¡¨è¾¾å¼**ï¼šç”¨äºæš‚åœ `async` å‡½æ•°çš„æ‰§è¡Œï¼Œç­‰å¾… `Promise` å®Œæˆå¹¶è¿”å›ç»“æœã€‚åªæœ‰åœ¨ `async` å‡½æ•°ä¸­æ‰èƒ½ä½¿ç”¨ `await`ã€‚

#### 1. async å’Œ await å‡½æ•°åŸºæœ¬è¯­æ³•
`async` å’Œ `await` çš„ä¸»è¦ä½œç”¨æ˜¯è®©å¼‚æ­¥ä»£ç åƒåŒæ­¥ä»£ç ä¸€æ ·ä¹¦å†™ï¼Œæ¶ˆé™¤å›è°ƒåœ°ç‹±æˆ– `then` é“¾å¼åµŒå¥—ã€‚
åŸºæœ¬ async è¯­æ³•:
```js
async function fn(){
}
```
å…¶ä¸­è¿”å›å€¼æœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µ: 
1. ä¸æ˜¯ promise å¯¹è±¡, åˆ™è¿”å›çš„æ˜¯æˆåŠŸå€¼
2. å¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡, å…·ä½“çœ‹æ‰§è¡Œ resolve æ–¹æ³•è¿˜æ˜¯ reject æ–¹æ³•
3. æŠ›å‡ºé”™è¯¯, è¿”å›å¤±è´¥çš„ promise 
å¯¹äº await è¡¨è¾¾å¼, å¿…é¡»å†™åœ¨ async å‡½æ•°ä¸­, å…¶ä¸­å³ä¾§çš„è¡¨è¾¾å¼ä¸ºä¸€èˆ¬çš„ promise çš„å¯¹è±¡, è€Œè¿”å›çš„æ˜¯ promise æˆåŠŸçš„å€¼ã€‚
<mark style="background: transparent; color: red">å¦‚æœ await çš„ promise æ‰§è¡Œå¤±è´¥, åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œ æ­¤æ—¶å¯ä»¥é€šè¿‡ try.. catch å¤„ç†</mark>
```js 
const p = new  Promise((resolve, reject)=>{
	resolve("ç”¨æˆ·æ•°æ®");
});

async  function fun() {
	try{
		let result =  await p;   /*  å°è¯•è¿”å›ä¸€ä¸ª  p çš„ Promise å¯¹è±¡ */
		console.log(result);
	}
	catch(e){
		console.log(e); 
	} 
}
fun();  // è°ƒç”¨å‡½æ•°
```

#### 2. async å’Œ await æ–¹æ³•å°è£… ajax è¯·æ±‚ 
å¯¹äº async æ–¹æ³•å’Œ await æ–¹æ³•å°è£… ajax è¯·æ±‚, å…·ä½“å¦‚ä¸‹ (ajax å‚è€ƒ [[ğŸ“˜ClassNotes/âŒ¨ï¸ Pre-front Programming/ğŸµJavaScript/7. ESLintè°ƒè¯•å·¥å…·ï¼ŒJSON, AJAX|JSON, AJAX]] ç›¸å…³)
```js
// å‘é€ AJAX è¯·æ±‚, è¿”å›çš„ç»“æœæ˜¯ Promise å¯¹è±¡
function sendAJAX(url) {
    return new Promise((resolve, reject) => {
        //1. åˆ›å»ºå¯¹è±¡
        const x = new XMLHttpRequest();
        //2. åˆå§‹åŒ–
        x.open('GET', url);
        //3. å‘é€
        x.send();
        //4. äº‹ä»¶ç»‘å®š
        x.onreadystatechange = function () {
            if (x.readyState === 4) {
                if (x.status >= 200 && x.status < 300) {
                    resolve(x.response);//æˆåŠŸ
                } else {
                    reject(x.status);//å¤±è´¥
                }
            }
        }
    })
}
// async ä¸ await æµ‹è¯•
async function fun() {
    //å‘é€ AJAX è¯·æ±‚ 1
    let joke = await sendAJAX("https://api.apiopen.top/getJoke");
    //å‘é€ AJAX è¯·æ±‚ 2
    let tianqi = await sendAJAX('https://www.tianqiapi.com/api/?version=v1&city=%E5%8C%97%E4%BA%AC&appid=23941491&appsecret=TXoD5e8P');
    console.log(joke);
    console.error(tianqi);//ä¸ºäº†åŒºåˆ«æ•°æ®ï¼Œæˆ‘è¿™é‡Œç”¨çº¢è‰²çš„errorè¾“å‡º
}
// è°ƒç”¨å‡½æ•°
fun();
```
ä¸Šè¿°ä¸¤ä¸ª ajax è¯·æ±‚, å®é™…ä¸Šæ˜¯å¼‚æ­¥æ‰§è¡Œçš„, **åœ¨åŒä¸€ä¸ª async æŒ‡å®šçš„åŒæ­¥å‡½æ•°ä¸­, await ä¼šç­‰å¾…ä¸Šä¸€ä¸ªæ‰§è¡Œå®Œæ¯•ä¹‹å, å¼‚æ­¥æ‰§è¡Œ**

#### 3. **ä½¿ç”¨ `async` å’Œ `await` é‡å†™ yield å¼‚æ­¥å‡½æ•°**:
æˆ‘ä»¬å¯ä»¥ç”¨ `async` å’Œ `await` é‡æ–°å®ç°ä¸Šé¢çš„ç”Ÿæˆå™¨é€»è¾‘ï¼Œä½¿å¾—ä»£ç æ›´æ˜“è¯»ã€‚é¦–å…ˆï¼Œå°†ç”Ÿæˆå™¨å‡½æ•°è½¬æ¢æˆ `async` å‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨ `await` æ¥ç­‰å¾… `Promise` çš„å®Œæˆã€‚

å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹çš„ç”Ÿæˆå™¨å‡½æ•°(ç¤ºä¾‹ä¸­çš„ `asyncGenerator`), æˆ‘ä»¬å¯ä»¥é‡‡ç”¨è¿”å›ä¸€ä¸ª promise çš„æ–¹å¼, å¹¶é‡‡ç”¨ await è¿›è¡Œ å°è£…ã€‚
```javascript
function fetchData(url) {
    return new Promise(resolve => {
        setTimeout(() => resolve(`Data from ${url}`), 1000);
    });
}

// ä½¿ç”¨ async/await é‡å†™ç”Ÿæˆå™¨é€»è¾‘
async function asyncFunction() {
    const data1 = await fetchData("url1");
    console.log(data1);
    const data2 = await fetchData("url2");
    console.log(data2);
    return "Done";
}
asyncFunction().then(result => console.log(result));
```

ä»£ç è§£é‡Š:
- `asyncFunction` å‡½æ•°è¢«å£°æ˜ä¸º `async`ï¼Œä½¿å¾—å®ƒè¿”å›ä¸€ä¸ª `Promise`ï¼Œå¯ä»¥ç”¨ `then` å¤„ç†ç»“æœã€‚
- åœ¨ `asyncFunction` å†…éƒ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ `await` æ¥ç­‰å¾…æ¯ä¸ª `fetchData` çš„ `Promise` å®Œæˆã€‚
- `await` ä¼šåœ¨ `Promise` å®Œæˆåå°†ç»“æœè¿”å›ï¼Œå¹¶èµ‹å€¼ç»™å˜é‡ `data1` å’Œ `data2`ï¼Œç„¶åè¾“å‡ºç»“æœã€‚
- æœ€åè¿”å› `"Done"`ï¼Œå¹¶åœ¨ `then` ä¸­æ¥æ”¶è¿”å›å€¼å¹¶æ‰“å°ã€‚

ç”Ÿæˆå™¨å’Œ `async/await` éƒ½å¯ä»¥ç”¨äºæ§åˆ¶å¼‚æ­¥æµç¨‹ï¼Œä½† `async/await` æ˜¯åŸºäº `Promise` çš„è¯­æ³•ç³–ï¼Œæ›´åŠ ç®€æ´æ˜“è¯»ã€‚ç”Ÿæˆå™¨æ›´å¤šç”¨äºå®šåˆ¶è¿­ä»£è¡Œä¸ºï¼Œè€Œ `async/await` åˆ™æ˜¯ä¸“ä¸ºç®€åŒ–å¼‚æ­¥æ“ä½œã€‚

- `async/await` é€šè¿‡æ¸…æ™°çš„è¯­æ³•ä½¿å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œ**é€‚åˆæ›¿ä»£å¤æ‚çš„ `then` é“¾**ã€‚
- `async` å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ª `Promise`ï¼Œè€Œ `await` è¡¨è¾¾å¼ç”¨æ¥ç­‰å¾… `Promise` çš„å®Œæˆå¹¶è¿”å›ç»“æœã€‚

`async/await` æ˜¯ç°ä»£ JavaScript å¼‚æ­¥æ“ä½œçš„ä¸»æµæ–¹æ³•ï¼Œæ¨èåœ¨æ¶‰åŠå¼‚æ­¥ä»»åŠ¡æ—¶ä¼˜å…ˆä½¿ç”¨å®ƒã€‚

