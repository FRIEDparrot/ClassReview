## ä¸€ã€JavaScript DOM æ¦‚å¿µ
HTML DOM æ˜¯è¿›è¡Œè·å–, æ›´æ”¹, æ·»åŠ å’Œåˆ é™¤ HTML å…ƒç´ çš„æ ‡å‡†ã€‚
![[Excalidraw/4. DOM èŠ‚ç‚¹å’Œäº‹ä»¶å¤„ç†ç¨‹åº 2024-10-28 16.27.55|300]]
ç”±äºä¸Šè¿°æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯¹åº”çš„èŠ‚ç‚¹, èŠ‚ç‚¹ä¸­çš„æ•°å€¼å¯ä»¥é‡‡ç”¨ innerHTML è¿›è¡Œè®¿é—®, ä¹Ÿå¯ä»¥é€šè¿‡ innerText è·å–(ä½†æ˜¯æœ‰æ—¶æ˜¯ textContent, å› æ­¤éœ€è¦åˆ¤æ–­å¦‚æœinnerText ä¸º undefined æ—¶å¯èƒ½éœ€è¦è¿›è¡Œé€»è¾‘å¤„ç†,  ä¾‹å¦‚è·å–, è®¾ç½®ç­‰ç­‰) 
è¯­è¨€å‚è€ƒ [language ccodes](https://www.w3schools.com/tags/ref_language_codes.asp) 
ä¸»è¦æ“ä½œå¯¹è±¡: å‚è€ƒ[[ğŸ“˜ClassNotes/âŒ¨ï¸ Pre-front Programming/ğŸµJavaScript/3. JavaScript è¯­æ³•å…¥é—¨å’Œå¯¹è±¡#(5) JS é¢„å®šä¹‰å¯¹è±¡|JS é¢„å®šä¹‰å¯¹è±¡]]  

### (1) DOM ä¸­æŸ¥æ‰¾å’Œå…ƒç´ é€‰æ‹©å™¨(èŠ‚ç‚¹å…ƒç´ è·å–)

| getElementById()         | Returns the element that has the ID attribute with the specified value                                     |
| ------------------------ | ---------------------------------------------------------------------------------------------------------- |
| getElementsByClassName() | Returns an HTMLCollection containing all elements with the specified class name                            |
| getElementsByName()      | Returns an live NodeList containing all elements with the specified name                                   |
| getElementsByTagName()   | Returns an HTMLCollection containing all elements with the specified tag name                              |
| querySelector()          | Returns the first element that matches a specified CSS selector(s) in the document                         |
| querySelectorAll()       | Returns a static NodeList containing all elements that matches a specified CSS selector(s) in the document |
è·å–å¯¹åº”çš„å…ƒç´ å€¼; 
å…¶ä¸­å…ƒç´ `<>` ä¸­çš„å±æ€§è®¾ç½®å¯ä»¥é‡‡ç”¨ `element.getAttribute` è·å–;
```js
element.getAttribute(name)
```
è€Œæ‰€æœ‰çš„ css æ ·å¼è®¾ç½®ç›¸å…³éƒ½å¯ä»¥ä» [element.style](https://www.w3schools.com/jsref/prop_html_style.asp) è¿›è¡Œè®¿é—®; 
css é€‰æ‹©å™¨å‚è€ƒ[[ğŸ“˜ClassNotes/âŒ¨ï¸ Pre-front Programming/âœ³ï¸ HTML & CSS sheet/2. CSS3 åŸºç¡€å’Œç»„ä»¶çŸ¥è¯†#ä¸€ã€CSS é€‰æ‹©å™¨æ¦‚å¿µ|2. CSS3 åŸºç¡€å’Œç»„ä»¶çŸ¥è¯†]]
```js
document.querySelector("div > p");
document.querySelector("#demo").innerHTMLÂ =Â "Hello World!";
document.querySelector("a[target]");  /* ç¬¬ä¸€ä¸ªå¸¦æœ‰  target  çš„ a å…ƒç´ */
```
éœ€è¦è¯´æ˜çš„æ˜¯, querySelector å½“é‡‡ç”¨å¤šé€‰æ‹©å™¨æ—¶, ä¼šé€‰æ‹©ç¬¬ä¸€ä¸ªå…¶ä¸­æœ‰çš„å…ƒç´ 
html çš„èŠ‚ç‚¹æ¨¡å‹

<b><mark style="background: transparent; color: orange">å¸¸ç”¨æ–¹æ³•</mark></b>å¦‚ä¸‹: 
async :  åŠ è½½æ–¹å¼
body : è¿”å› body å…ƒç´ 
url = document.url è·å–é“¾æ¥
**lastModified** : è¿”å›æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´
doctype 
```js
document.activeElement();// å½“å‰æ¿€æ´»å…ƒç´ 
document.open()
document.close();  // å…³é—­äº‹ä»¶â€˜
document.dir = "ltr" 
```

| designMode | Controls whether the entire document should be editable or not. |
| ---------- | --------------------------------------------------------------- |
|            | document ä¸‹æ‰€æœ‰çš„ form                                              |

å¯¹äºé€‰ä¸­çš„å†…å®¹, å¯ä»¥é‡‡ç”¨ js ä¸­ textAreaçš„ selectionStart å’Œ selectionEnd è¿›è¡Œè·å–, 
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·å–é€‰ä¸­æ–‡æœ¬</title>
</head>
<body>
    <textarea id="myTextArea" rows="5" cols="30">
è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ–‡æœ¬ã€‚ä½ å¯ä»¥é€‰ä¸­å…¶ä¸­çš„ä»»ä½•éƒ¨åˆ†ã€‚
    </textarea>
    <p>é€‰ä¸­çš„æ–‡æœ¬: <span id="selectedText"></span></p>
    <script>
        const textArea = document.getElementById('myTextArea');
        const selectedTextSpan = document.getElementById('selectedText');

        textArea.addEventListener('mouseup', () => {
            const selectedText = getSelectedText(textArea);
            selectedTextSpan.textContent = selectedText;
        });

        function getSelectedText(textArea) {
            const start = textArea.selectionStart;
            const end = textArea.selectionEnd;
            return textArea.value.substring(start, end);
        }
    </script>
</body>
</html>
```

### (2) æ·»åŠ å’Œåˆ é™¤å…ƒç´ 
å‚è€ƒ[HTML documents](https://www.w3schools.com/jsref/dom_obj_document.asp), å¸¸è§çš„åˆ›å»ºå…ƒç´ æ–¹æ³•æœ‰:

| åˆ›å»ºå…ƒç´                          | description                                    |
| ---------------------------- | ---------------------------------------------- |
| **createAttribute()**        | Creates an attribute node                      |
| **createComment()**          | Creates a Comment node with the specified text |
| **createDocumentFragment()** | Creates an empty DocumentFragment node         |
| **createElement()**          | Creates an Element node                        |
| **createEvent()**            | Creates a new event                            |
| **createTextNode()**         | Creates a Text node                            |

ä¾‹å¦‚, å¯ä»¥æ•´ä½“åˆ›å»ºä¸€ä¸ª DocumentFragment, ç„¶åé‡‡ç”¨ appendChild æ–¹æ³•æ‹¼æ¥åˆ° myList ä¸­:
```html
<!DOCTYPE html>
<html>
	<body>
		<h1>The Document Object</h1>
		<h2>The createDocumenFragment() Method</h2>
		<p>Add array items to an existing list:</p>
		<ul id="myList">
		<li>Apple</li> 
		<li>Pear</li>
		</ul>
		<script>
		const fruits = ["Banana", "Orange", "Mango"];
		// Create a document fragment:
		const dFrag = document.createDocumentFragment();
		for (let x in fruits) {
		  const li = document.createElement('li');
		  li.textContent = fruits[x];
		  dFrag.appendChild(li);
		}
		// Add fragment to a list: 
		document.getElementById('myList').appendChild(dFrag);
		</script>
	</body>
</html>
```

éœ€è¦æ³¨æ„çš„æ˜¯, document.createElement å®é™…ä¸Šå¹¶ä¸ä¼šå°†æŸä¸ªèŠ‚ç‚¹æ·»åŠ è¿›æ–‡æ¡£, å®é™…ä¸Šéƒ½æ˜¯é€šè¿‡ body è¿›è¡Œæ·»åŠ çš„ã€‚ä¾‹å¦‚:
```js
ul = document.createElement("ul");
li1 = document.createElement("li");
li1.appendChild(text2) 
ul.append(li1) ;
document.getElementsByTagName("Body")[0].appendChild(ul);
```

éœ€è¦è¯´æ˜çš„æ˜¯, ä¸€èˆ¬é‡‡ç”¨å¦‚ä¸‹çš„:
```js
document.body.appendChild(ul);
document.querySelector("body").appendChild(ul);
```


cookie å±æ€§æ˜¯ä¿å­˜åœ¨æµè§ˆå™¨ä¸­çš„å°æ–‡æœ¬, å¹¶å…è®¸ä¿å­˜ç‰¹å®šé•¿æ—¶é—´ã€‚å¯ä»¥ç›´æ¥è®¾å®š document.cookies çš„å€¼

open() æ–¹æ³•å’Œ close() æ–¹æ³• (åŸºæœ¬ä¸Šä¸é€‚ç”¨):
documnet.open() : æ‰“å¼€ä¸€ä¸ªæ–°æ–‡æ¡£å¹¶å®Œå…¨é‡‡ç”¨ document.write ç”Ÿæˆå†…å®¹
document.close() : å®Œæˆæ–°çš„ç•Œé¢ (å…³é—­å¹¶æ˜¾ç¤ºå…¶å†…å®¹)

ä¸€èˆ¬åœ°, **å¯¹äº React, Vue, Angular ç­‰æä¾›äº†æ›´åŠ çµæ´»çš„æ–¹å¼æ¥ç®¡ç† DOM å’Œæ›´æ–°å†…å®¹ï¼Œè€Œä¸æ˜¯ç›´æ¥æ“ä½œæ•´ä¸ªæ–‡æ¡£ã€‚ä¾‹å¦‚ï¼Œè¿™äº›æ¡†æ¶ä¼šä½¿ç”¨è™šæ‹Ÿ DOMã€ç»„ä»¶åŒ–ç»“æ„å’Œæ•°æ®ç»‘å®šæ¥å¤„ç†é¡µé¢æ›´æ–°**ã€‚

ä¸€èˆ¬é‡‡ç”¨ appendChild, replaceChild è¿›è¡Œ DOM çš„æ“ä½œã€‚

### (3) å…ƒç´ çº§æ“ä½œ 
å¯¹åº”çš„å…ƒç´ å‚è€ƒ [HTML elements](https://www.w3schools.com/jsref/dom_obj_all.asp) 

é‡ç‚¹å¦‚ä¸‹: 

| hasAttribute()  | Returns true if an element has a given attribute |
|-----------------|--------------------------------------------------|
| hasAttributes() | Returns true if an element has any attributes    |
| hasChildNodes() | Returns true if an element has any child nodes   |

| click()                 | Simulates a mouse-click on an element                                    |
| ----------------------- | ------------------------------------------------------------------------ |
| classList               | Returns the class name(s) of an element                                  |
| blur()                  | Removes focus from an element                                            |
| appendChild()           | Adds (appends) a new child node to an element                            |
| focus()                 | Gives focus to an element                                                |
| getAttribute()          | Returns the value of an element's attribute                              |
| getAttributeNode()      | Returns an attribute node                                                |
| getBoundingClientRect() | Returns the size of an element and its position relative to the viewport |

| childElementCount | Returns an elements's number of child elements           |
|-------------------|----------------------------------------------------------|
| childNodes        | Returns a NodeList of an element's child nodes           |
| children          | Returns an HTMLCollection of an element's child elements |

| clientHeight | Returns the height of an element, including padding |
|--------------|-----------------------------------------------------|
| clientLeft   | Returns the width of the left border of an element  |
| clientTop    | Returns the width of the top border of an element   |
| clientWidth  | Returns the width of an element, including padding  |

| innerHTML | Sets or returns the content of an element                      |
|-----------|----------------------------------------------------------------|
| innerText | Sets or returns the text content of a node and its descendants |

| insertAdjacentElement() | Inserts a new HTML element at a position relative to an element     |
|-------------------------|---------------------------------------------------------------------|
| insertAdjacentHTML()    | Inserts an HTML formatted text at a position relative to an element |
| insertAdjacentText()    | Inserts text into a position relative to an element                 |
| insertBefore()          | Inserts a new child node before an existing child node              |

| nodeName      | Returns the name of a node                                |
| ------------- | --------------------------------------------------------- |
| nodeType      | Returns the node type of a node                           |
| nodeValue     | Sets or returns the value of a node                       |
| ownerDocument | Returns the root element (document object) for an element |
|               |                                                           |

| remove()              | Removes an element from the DOM                                                    |
| --------------------- | ---------------------------------------------------------------------------------- |
| removeAttributeNode() | Removes an attribute node, and returns the removed node                            |
| removeChild()         | Removes a child node from an element                                               |
| removeEventListener() | Removes an event handler that has been attached with the addEventListener() method |
| replaceChild()        | Replaces a child node in an element                                                |
| style                 | Sets or returns the value of the style attribute of an element                     |
| toString()            | Converts an element to a string                                                    |

å…¶ä¸­æ’å…¥å…ƒç´ æœ€å¤šçš„æ˜¯append Child æˆ–è€… insertBefore
æ³¨æ„: å¦‚æœå¸Œæœ›ç”Ÿæˆ  `<p> </p>` ä¹‹é—´çš„æ–‡æœ¬æ—¶, éœ€è¦é‡‡ç”¨  document.createTextNode å…ˆåˆ›å»º, ç„¶åé‡‡ç”¨ **div1.appendChild è¿›è¡Œæ·»åŠ **

div1.removeChild ç”¨äºåˆ é™¤èŠ‚ç‚¹

æ­¤å¤–, ä¹Ÿå¯ä»¥ç›´æ¥ä¸ºå…ƒç´ çš„æŸäº›æ–¹æ³•ç›´æ¥è‡ªå®šä¹‰è¡¨è¾¾å¼,ä¾‹å¦‚
```js
d1.onclick = () =>{
	d1.style.color = red;
}
```

## äºŒã€äº‹ä»¶å¤„ç†ç¨‹åº
### (1) å¸¸ç”¨å±æ€§
ä¸€èˆ¬å¯¹äº html å…ƒç´ å‡æœ‰ onclick  å±æ€§, å¯ä»¥é€šè¿‡ onclick è®¾ç½®å‡½æ•°, è¿›è¡Œå¤„ç†ã€‚
å¯¹äºåœ¨ html æ–‡æ¡£ä¸­å¼•ç”¨çš„  js æ–‡ä»¶, html å¯ä»¥ç›´æ¥è®¿é—®å…¶ä¸­å®šä¹‰çš„å‡½æ•°, å¦‚:
```js
<button onclick="fun()"></button>
```

ä¸»è¦çš„äº‹ä»¶éƒ¨åˆ†å‚è€ƒ [html events](https://www.w3schools.com/jsrEF/dom_obj_event.asp), å…·ä½“æå–å¸¸ç”¨çš„å¦‚ä¸‹:

| Event                        | Occurs When                                                  | Belongs To                    |
| ---------------------------- | ------------------------------------------------------------ | ----------------------------- |
| abort                        | The loading of a media is aborted                            | UiEvent, Event                |
| animationstart               | A CSS animation has started                                  | AnimationEvent                |
| beforeprint                  | A page is about to be printed                                | Event                         |
| beforeunload                 | Before a document is about to be unloaded                    | UiEvent, Event                |
| **blur**                     | **An element loses focus**                                   | **FocusEvent**                |
| change                       | The content of a form element has changed                    | Event                         |
| click                        | An element is clicked on                                     | MouseEvent                    |
| contextmenu                  | An element is right-clicked to open a context menu           | MouseEvent                    |
| copy                         | The content of an element is copied                          | ClipboardEvent                |
| cut                          | The content of an element is cut                             | ClipboardEvent                |
| ==dblclick==                 | ==An element is double-clicked==                             | ==MouseEvent==                |
| drag                         | An element is being dragged                                  | DragEvent                     |
| dragend                      | Dragging of an element has ended                             | DragEvent                     |
| dragenter                    | A dragged element enters the drop target                     | DragEvent                     |
| dragstart                    | Dragging of an element has started                           | DragEvent                     |
| drop                         | A dragged element is dropped on the target                   | DragEvent                     |
| durationchange               | The duration of a media is changed                           | Event                         |
| ==ended==                    | ==A media has reach the end ("thanks for listening")==       | ==Event==                     |
| error                        | An error has occurred while loading a file                   | ProgressEvent, UiEvent, Event |
| ==ç„¦ç‚¹äº‹ä»¶éƒ¨åˆ†==                   |                                                              |                               |
| **focus**                    | **An element gets focus**                                    | **FocusEvent**                |
| **focusin**                  | **An element is about to get focus**                         | **FocusEvent**                |
| **focusout**                 | **An element is about to lose focus**                        | **FocusEvent**                |
| fullscreenchange             | An element is displayed in fullscreen mode                   | Event                         |
| fullscreenerror              | An element can not be displayed in fullscreen mode           | Event                         |
| hashchange                   | There has been changes to the anchor part of a URL           | HashChangeEvent               |
| input                        | An element gets user input                                   | InputEvent, Event             |
| ==é”®ç›˜äº‹ä»¶==                     |                                                              |                               |
| **keydown**                  | **A key is down**                                            | **KeyboardEvent**             |
| **keypress**                 | **A key is pressed**                                         | **KeyboardEvent**             |
| **keyup**                    | **A key is released**                                        | **KeyboardEvent**             |
| load                         | An object has loaded                                         | UiEvent, Event                |
| message                      | A message is received through the event source               | Event                         |
| ==é¼ æ ‡äº‹ä»¶éƒ¨åˆ†==                   |                                                              |                               |
| **mousedown**                | The mouse button is pressed over an element(not lift)        | MouseEvent                    |
| mouseenter                   | The pointer is moved onto an element                         | MouseEvent                    |
| mouseleave                   | The pointer is moved out of an element                       | MouseEvent                    |
| mousemove                    | The pointer is moved over an element                         | MouseEvent                    |
| **mouseover**                | The pointer is moved onto an element                         | MouseEvent                    |
| mouseout                     | The pointer is moved out of an element                       | MouseEvent                    |
| **mouseup**(è°ƒç”¨ä¸€èˆ¬æ¯”mousedownå¤š) | A user releases a mouse button over an element               | MouseEvent                    |
| mousewheel                   | Deprecated. Use the wheel event instead                      | WheelEvent                    |
| offline                      | The browser starts working offline                           | Event                         |
| online                       | The browser starts working online                            | Event                         |
| open                         | A connection with the event source is opened                 | Event                         |
| pagehide                     | User navigates away from a webpage                           | PageTransitionEvent           |
| pageshow                     | User navigates to a webpage                                  | PageTransitionEvent           |
| paste                        | Some content is pasted in an element                         | ClipboardEvent                |
| resize                       | The document view is resized                                 | UiEvent, Event                |
| reset                        | A form is reset                                              | Event                         |
| scroll                       | An scrollbar is being scrolled                               | UiEvent, Event                |
| search                       | Something is written in a search field                       | Event                         |
| select                       | User selects some text                                       | UiEvent, Event                |
| show                         | A `<menu>` element is shown as a context menu                | Event                         |
| stalled                      | The browser is trying to get unavailable media data          | Event                         |
| storage                      | A Web Storage area is updated                                | StorageEvent                  |
| submit                       | A form is submitted                                          | Event                         |
| toggle                       | The user opens or closes the <details> element               | Event                         |
| waiting                      | A media is paused but is expected to resume (e.g. buffering) | Event                         |
| **wheel**                    | **The mouse wheel rolls up or down over an element**         | **WheelEvent**                |
| unload                       | A page has unloaded                                          | UiEvent, Event                |

éœ€è¦è¯´æ˜çš„æ˜¯, onabort è¡¨ç¤ºåœ¨å›¾ç‰‡åŠ è½½å®Œæ¯•ä¹‹å‰åœæ­¢åŠ è½½, è€Œ onunload ä¸ºå°è¯•ç¦»å¼€é¡µé¢æ—¶è°ƒç”¨çš„è„šæœ¬.

```js
<elementÂ onabort="myScript">
object.onabortÂ =Â function(){_myScript_};   /* javascript */
_object_.addEventListener("abort",Â _myScript_);
```

éœ€è¦è¯´æ˜çš„æ˜¯:
- **`mouseover`**: æ˜¯ä¸€ä¸ª**å¾ªç¯è§¦å‘**çš„äº‹ä»¶ã€‚å½“é¼ æ ‡åœ¨å…ƒç´ ä¸Šç§»åŠ¨æ—¶ï¼Œæ¯æ¬¡è¿›å…¥ä¸€ä¸ªæ–°çš„å­å…ƒç´ æˆ–é‡æ–°è¿›å…¥ç›®æ ‡å…ƒç´ æ—¶ï¼Œéƒ½ä¼šè§¦å‘ `mouseover` äº‹ä»¶ã€‚æ‰€ä»¥å¦‚æœé¼ æ ‡åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šä¸æ–­ç§»åŠ¨å¹¶è¿›å…¥å…¶å­å…ƒç´ ï¼Œ`mouseover` äº‹ä»¶ä¼šåå¤è§¦å‘ã€‚    
- **`mousedown`**: æ˜¯ä¸€ä¸ª**ä¸€æ¬¡æ€§è§¦å‘**çš„äº‹ä»¶ã€‚å½“é¼ æ ‡æŒ‰ä¸‹æ—¶ï¼ˆä¸ç®¡æ˜¯å·¦é”®ã€å³é”®æˆ–ä¸­é”®ï¼‰ï¼Œ`mousedown` äº‹ä»¶ä¼šè§¦å‘ä¸€æ¬¡ï¼Œç›´åˆ°é¼ æ ‡è¢«å†æ¬¡æŒ‰ä¸‹æ‰ä¼šå†æ¬¡è§¦å‘ã€‚å› æ­¤ï¼Œå¦‚æœé¼ æ ‡æŒ‰ä½ä¸æ”¾ï¼Œ`mousedown` åªä¼šè§¦å‘ä¸€æ¬¡ã€‚

### (2) äº‹ä»¶ç›‘å¬å™¨
æ ¹æ®ä¸Šè¿°è¡¨æ ¼, å®é™…ä¸Š<b><mark style="background: transparent; color: orange">è°ƒç”¨çš„äº‹ä»¶å¤„ç†ç¨‹åºå¯¹åº”çš„å±æ€§</mark></b>éƒ½æ˜¯ä»¥ on å¼€å¤´çš„, å¦‚ onabort äº‹ä»¶å¤„ç†ç¨‹åºã€‚onwheel ç­‰ç­‰, è¿™ä¸ªå¸¦on çš„å¯ä»¥åœ¨ html çš„ `<>` ä¸­è¿›è¡Œè®¾ç½®, å¹¶å¯ä»¥<b><mark style="background: transparent; color: orange">è°ƒç”¨ document.addEventListener ("abort")</mark></b> ç±»ä¼¼æ–¹æ³•è¿›è¡Œæ·»åŠ äº‹ä»¶ç›‘å¬å’Œå¤„ç†å‡½æ•°ã€‚

æœ€å¸¸çš„ EventListener ç›¸å…³å‡½æ•°:
1. addEventListener : æ·»åŠ ç›‘å¬å™¨ (ç¤ºä¾‹: [docment.addEventListener](https://www.w3schools.com/jsref/met_element_addeventlistener.asp)) 
2. **removeEventListener** : è¿›è¡Œäº‹ä»¶ç›‘å¬å™¨çš„åˆ é™¤ remove
3. attchEevent (ä»…ç”¨äºIE9 ä¹‹å‰) : ç”¨äºäº‹ä»¶å†’æ³¡, ä¸èƒ½ç”¨äºäº‹ä»¶æ•æ‰, 
4. detachEvent (ä»…ç”¨äºIE9 ä¹‹å‰): ç§»é™¤äº‹ä»¶ 
å¦å¤–, attachEvent Listener <b><mark style="background: transparent; color: red">å…è®¸æ·»åŠ ä¸€ä¸ª true å’Œ false æ ‡ç­¾, è¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µæ‰§è¡Œè¿˜æ˜¯åœ¨æ•è·é˜¶æ®µæ—¶æ‰§è¡Œ</mark></b>ã€‚
- **`false`**ï¼šäº‹ä»¶ç›‘å¬å™¨åœ¨äº‹ä»¶ **å†’æ³¡é˜¶æ®µ** è¢«è§¦å‘ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰ã€‚**äº‹ä»¶å†’æ³¡æŒ‡çš„æ˜¯äº‹ä»¶ä»ç›®æ ‡å…ƒç´ å‘ä¸Šä¼ é€’åˆ°å…¶çˆ¶å…ƒç´ ï¼Œç›´è‡³æ ¹èŠ‚ç‚¹**ã€‚
- **`true`**ï¼šäº‹ä»¶ç›‘å¬å™¨åœ¨äº‹ä»¶ **æ•è·é˜¶æ®µ** è¢«è§¦å‘ã€‚æ•è·é˜¶æ®µæŒ‡çš„æ˜¯**äº‹ä»¶ä»æ ¹èŠ‚ç‚¹å‘ä¸‹ä¼ é€’åˆ°ç›®æ ‡å…ƒç´ çš„é˜¶æ®µ**ã€‚
å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨å†’æ³¡é˜¶æ®µï¼ˆå³ä¼ å…¥ `false`ï¼‰å°±å¯ä»¥æ»¡è¶³éœ€æ±‚ï¼Œæ‰€ä»¥é€šå¸¸å°†å…¶è®¾ç½®ä¸º `false`ã€‚
```js
myDIV.addEventListener("mousemove", myFunction);
myDIV.removeEventListener("mousemove", myFunction);
myDIV.addEventListener("mousemove", function(){
					window.alert("hi");
				},false); // åœ¨å†’æ³¡é˜¶æ®µæ‰§è¡Œ, å³åœ¨è·å¾—false æ—¶æ‰§è¡Œ 
```

#### 1. ç¤ºä¾‹: æ ‡ç­¾æ˜¾ç¤ºå™¨
ä¾‹å¦‚,é‡‡ç”¨äº‹ä»¶çš„ç›‘å¬æ–¹æ³•, åˆ›å»ºä¸€ä¸ªlabel, è€Œåªéœ€è¦ mouse hover è¶…è¿‡ä¸€å®šæ—¶é—´ä¼šæ˜¾ç¤ºè§£é‡Š, ä»¥ä¸‹ç»™å‡ºä¸€ä¸ªç¤ºä¾‹, é‡‡ç”¨ç±»çš„æ–¹æ³•å»ºç«‹ ToolTipLabel å¯¹è±¡:

å¦å¤–ï¼Œdocument.create çš„ä¿®é¥°ä¸€èˆ¬é‡‡ç”¨ const è€Œä¸é‡‡ç”¨ let, ä¿è¯å˜é‡åˆ›å»ºå®Œæ¯•ä¹‹åä¸è¢«ä¿®æ”¹ã€‚
å®é™…ä¸Šä¸ºäº†é¿å…å¾ªç¯è§¦å‘, é‡‡ç”¨ç›‘å¬ mouseenter å’Œ mouseleave äº‹ä»¶çš„æ–¹æ³•åˆ›å»ºå“åº”å…ƒç´ ã€‚
```js
class TooltipLabel {  
    constructor(labelText, tooltipText) {  
        this.labelText = labelText;  
        this.tooltipText = tooltipText;
        this.obj = this.createTooltip();
    }
    createTooltip() {
        // Create elements
        const container = document.createElement('div');  
        const label = document.createElement('label');
        const tooltip = document.createElement('span');
        // Set label and tooltip text  
        label.textContent = this.labelText;  
        tooltip.textContent = this.tooltipText;
        
        // Add classes and styles
        container.classList.add('tooltip-container');
        tooltip.classList.add('tooltip');
        
        // Append to container
        container.appendChild(label);  
        container.appendChild(tooltip);  
        // Tooltip visibility logic
        let timer;  
        label.addEventListener('mouseenter', () => {  
            timer = setTimeout(() => {  
                tooltip.classList.add('show');  
            }, 1500); // Delay for tooltip  
        });

        label.addEventListener('mouseleave', () => {  
            clearTimeout(timer);  
            tooltip.classList.remove('show');  
        });
        return container;
    }
}  

// CSS for tooltip (you can use the same as before)  
const style = document.createElement('style');  
style.textContent = `  
    .tooltip-container {  
        position: relative;  
        display: inline-block;  
    }
    .tooltip {  
        visibility: hidden;  
        width: 120px;  
        background-color: black;  
        color: #fff; 
        text-align: center;  
        border-radius: 5px;  
        padding: 5px;  
        position: absolute;  
        z-index: 1;  
        bottom: 125%;  
        left: 50%;  
        margin-left: -60px;  
        opacity: 0;  
        transition: opacity 0.2s ease-in-out;  
    }  
    .tooltip.show {  
        visibility: visible;  
        opacity: 1;  
    }
`;
document.head.appendChild(style);
// Usage: create a label with tooltip in one line
const myTooltip = new TooltipLabel('Hover over me!', 'This is the tooltip text!');
if (myTooltip.obj == null){
    console.log("can't find tooltip object");
}else{
    console.log("add tooltip to body" + myTooltip.obj);
}

const docBody = document.getElementById("body-content");
if (docBody == null){
    console.log("can't find body");
}else{
    docBody.appendChild(myTooltip.obj);
}
```

### (3) event å¯¹è±¡å’Œå±æ€§è¯´æ˜
event å¯¹è±¡é»˜è®¤æ˜¯ä»¥ DOM çº§åˆ« 0 è¿›è¡Œæ³¨å†Œçš„, è€Œç›®å‰ä¸€èˆ¬æµè§ˆå™¨éƒ½æ”¯æŒä»¥ DOM çº§åˆ« 2 è¿›è¡Œæ³¨å†Œäº‹ä»¶ã€‚
äº‹ä»¶å‘ç”Ÿæ—¶, å°†åˆ›å»º event å¯¹è±¡, å…·ä½“ç§ç±»å‚è€ƒ [HTML EventObjects](https://www.w3schools.com/jsrEF/obj_events.asp):

| Object              | Handles                                |
|---------------------|----------------------------------------|
| AnimationEvent      | CSS animations                         |
| ClipboardEvent      | Modification of the clipboard          |
| DragEvent           | Drag and drop interaction              |
| FocusEvent          | Focus-related events                   |
| HashChangeEvent     | Changes in the anchor part of an URL   |
| InputEvent          | User input                             |
| KeyboardEvent       | Keyboard interaction                   |
| MouseEvent          | Mouse interaction                      |
| PageTransitionEvent | Navigation between web pages           |
| PopStateEvent       | Changes in the page history            |
| ProgressEvent       | The progress of loading external files |
| StorageEvent        | Changes in the Web Storage             |
| TouchEvent          | Touch interaction                      |
| TransitionEvent     | CSS transitions                        |
| UiEvent             | User interface interaction             |
| WheelEvent          | Mouse-wheel interaction                |
è€Œå®é™…ä¸Šåœ¨å‡½æ•°ä¸­, ä¹Ÿå¯ä»¥åŠ ä¸Š event å‚æ•°, ä»¥è®¿é—®å½“å‰æ‰€æŒ‡çš„ event å¯¹è±¡çš„å‚æ•°
éœ€è¦è¯´æ˜çš„æ˜¯, æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥é€šè¿‡æ·»åŠ  event å‚æ•°æ–¹å¼æ•è·å…¶ä¸­å‘ç”Ÿçš„äº‹ä»¶, è·å–å…¶å¯¹åº”å±æ€§, å¹¶åšå‡ºç›¸åº”çš„è¡Œä¸º. å¦‚ä¸‹:
```js
/*æ·»åŠ ä¸€ä¸ª eventlistener ,ç›‘å¬æ‰€æœ‰ click äº‹ä»¶å¹¶è¾“å‡ºå‚æ•° */
document.addEventListener('click', function(event) {
Â  Â  console.log('The event type is:' + event.type +'and the element is:' + event.target.tagName)
Â  Â  })

element.addEventListener("click", myFunction1);
```
ç›¸åº”çš„äº‹ä»¶ç±»å‹åŒ…æ‹¬ bubble, cancelabl, type, view ç­‰ç­‰å„ç§å±æ€§, å…·ä½“å‚è€ƒ [HTML Event Properties](https://www.w3schools.com/jsref/dom_obj_event_prop.asp) 

å¸¸ç”¨çš„è¿˜æœ‰ key_property, ä¾‹å¦‚æ•è· keyDown æˆ–è€… keyup æ—¶, ä¸€èˆ¬ä¼šé‡‡ç”¨ event.key è·å–å…¶ä¸­çš„æŒ‰ä¸‹çš„ key äº‹ä»¶ã€‚
```js
var text = document.getElementById("txtBox1");
text.addEventListener("keyup", function(event){
	letÂ key =Â event.key;
	if (key == "a"){
		do....
	}
})
```
å¦å¤–å‚è€ƒ [alt key perperty](https://www.w3schools.com/jsref/event_key_altkey.asp), åˆ™æ£€æµ‹æ˜¯å¦æœ‰ alté”®æŒ‰ä¸‹æ—¶, é‡‡ç”¨:

```js
if (event.altKey  || event.ctrlKey) ||  event.shiftKey)    /*  æ£€æµ‹å„ä¸ªæŒ‰é”®çš„æŒ‰ä¸‹æƒ…å†µ  */
```

è®¾ç½®éšè—å’Œæ˜¾ç¤º, å¯ä»¥è®¾ç½® [visibility](https://www.w3schools.com/jsref/prop_style_visibility.asp) å±æ€§ (hidden, collapse)ï¼Œä¹Ÿå¯ä»¥è®¾ç½® [display](https://www.w3schools.com/jsref/prop_style_display.asp) å±æ€§ (none, block,compact,flex, inline, tableç­‰ç­‰). 

éœ€è¦è¯´æ˜çš„æ˜¯, display = none ä¼šéšè—æ•´ä¸ªå¯¹è±¡, è€Œ visibility ä»…ä»…ä¼šå°†å¯¹åº”é¡¹è®¾ç½®ä¸º invisible, ä½†æ˜¯å…ƒç´ ä»ç„¶ä¼šåœæ­¢åœ¨å¯¹åº”çš„ä½ç½®ï¼Œå³ç›¸åº”onclick ç­‰ç­‰äº‹ä»¶ä»ç„¶ä¼šè§¦å‘, **å› æ­¤å»ºè®®è®¾ç½® `dislay = none` æ¥è¿›è¡Œä¸´æ—¶çª—å£çš„éšè—**

### (4) ä¸¤ç§äº‹ä»¶æ³¨å†Œæ–¹å¼, äº‹ä»¶æ–¹æ³•çš„ä½¿ç”¨
event ç›¸å…³äº‹ä»¶å…·ä½“å‚è€ƒ [Event Methods](https://www.w3schools.com/jsrEF/dom_obj_event_methods.asp), å½“ä½¿ç”¨ DOM0 äº‹ä»¶æ³¨å†Œæ—¶, æ˜¯é€šè¿‡ è¿”å›return false é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚

æ­¤å¤–**å¯ä»¥é‡‡ç”¨ `event.preventDefault()` æ–¹æ³•æ¥å®Œæˆå¯¹é»˜è®¤è¡Œä¸ºçš„é˜»æ­¢**ã€‚
æˆ–è€… **event.stopPropagation(**)  **é˜»æ­¢äº‹ä»¶å†’æ³¡**

ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸¾ä¾‹, è¯´æ˜ DOM0 å’Œ DOM2 æ–¹å¼æ³¨å†Œäº‹ä»¶çš„åŒºåˆ«;

#### 1. DOM0 äº‹ä»¶æ³¨å†Œ
DOM0 çš„äº‹ä»¶æ³¨å†Œæ˜¯æœ€æ—©çš„æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡è®¾ç½®å…ƒç´ çš„äº‹ä»¶å±æ€§ï¼ˆå¦‚ `onclick`ï¼‰æ¥æ³¨å†Œäº‹ä»¶ã€‚åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ `return false` æ¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º(ä¾‹å¦‚, é˜»æ­¢æŒ‰é’®ç‚¹å‡»å’Œäº‹ä»¶çš„å“åº”)ã€‚
```html
<!DOCTYPE html>
<html>
<body>
    <a href="https://example.com" onclick="return false;">ç‚¹å‡»æˆ‘ (DOM0, return false)</a>
    <script>
        // ä¹Ÿå¯ä»¥è¿™æ ·å®šä¹‰
        const link = document.querySelector('a');
        link.onclick = function () {
            alert("DOM0 - é“¾æ¥ç‚¹å‡»äº‹ä»¶å·²è¢«é˜»æ­¢");
            return false; // é˜»æ­¢é»˜è®¤è¡Œä¸º
        };
    </script>
</body>
</html>
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé€šè¿‡ `onclick` å±æ€§ç›´æ¥æ³¨å†Œç‚¹å‡»äº‹ä»¶ï¼Œå¹¶åœ¨äº‹ä»¶å¤„ç†å‡½æ•°å†… `return false` æ¥é˜»æ­¢é“¾æ¥çš„è·³è½¬ã€‚

#### 2. DOM2 äº‹ä»¶æ³¨å†Œ
DOM2 äº‹ä»¶æ¨¡å‹å¯ä»¥é€šè¿‡ `addEventListener` æ¥æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œå¹¶å…è®¸æ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ã€‚ä¸ºäº†é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨ `event.preventDefault()` æ–¹æ³•ã€‚


> [!caution] è¯´æ˜
> ä¸‹è¿°æ–¹æ³•å¿…é¡»**é‡‡ç”¨ä¼ å…¥ addEventListener ä¸­çš„å‡½æ•°ä¼ å…¥å‚æ•° event çš„æ–¹æ³•è¿›è¡Œ**

**ç¤ºä¾‹ï¼š**
```html
<!DOCTYPE html>
<html>
<body>
    <a href="https://example.com" id="dom2-link">ç‚¹å‡»æˆ‘ (DOM2, preventDefault)</a>
    <script>
        const link = document.getElementById("dom2-link");
        link.addEventListener("click", function(event) {
            alert("DOM2 - é“¾æ¥ç‚¹å‡»äº‹ä»¶å·²è¢«é˜»æ­¢");
            event.preventDefault(); // é˜»æ­¢é»˜è®¤è¡Œä¸º
        });
    </script>
</body>
</html>
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ `addEventListener` æ³¨å†Œäº†ç‚¹å‡»äº‹ä»¶ï¼Œé€šè¿‡ `event.preventDefault()` æ¥é˜»æ­¢é“¾æ¥è·³è½¬ã€‚è¿™ç§æ–¹å¼çš„ä¼˜åŠ¿æ˜¯å¯ä»¥åœ¨åŒä¸€å…ƒç´ ä¸Šæ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œä¸ä¼šäº’ç›¸è¦†ç›–ã€‚

1. **DOM0 äº‹ä»¶æ³¨å†Œ**ï¼šé€šè¿‡ `element.onclick = function () { ... }`ï¼Œé˜»æ­¢é»˜è®¤è¡Œä¸ºä½¿ç”¨ `return false`ã€‚
2. **DOM2 äº‹ä»¶æ³¨å†Œ**ï¼šé€šè¿‡ `element.addEventListener("click", function (event) { ... })`ï¼Œé˜»æ­¢é»˜è®¤è¡Œä¸ºä½¿ç”¨ `event.preventDefault()`ã€‚

æ­¤å¤–, äº‹ä»¶å¤„ç†å‡½æ•°, ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§: 

| Method                         | Description                                                                                                         | Belongs To |
| ------------------------------ | ------------------------------------------------------------------------------------------------------------------- | ---------- |
| getModifierState()             | Returns true if a specified key is activated                                                                        | MouseEvent |
| getTargetRanges()              | Returns an array containing target ranges that will be affected by the insertion/deletion                           | InputEvent |
| preventDefault()               | **Cancels the event if it is cancelable**, meaning that the default action that belongs to the event will not occur | Event      |
| **stopImmediatePropagation()** | **Prevents other listeners of the same event from being called**                                                    | Event      |
| stopPropagation()              | Prevents further propagation of an event during event flow                                                          | Event      |

### (5) äº‹ä»¶çš„æ•è·å’Œå†’æ³¡æœºåˆ¶
#### 1. äº‹ä»¶æ•è·å’Œå†’æ³¡çš„åŸºæœ¬æ¦‚å¿µ
å½“ç”¨æˆ·ä¸ç½‘é¡µå…ƒç´ ï¼ˆä¾‹å¦‚æŒ‰é’®ã€è¾“å…¥æ¡†ç­‰ï¼‰äº¤äº’æ—¶ï¼Œä¼šè§¦å‘ **äº‹ä»¶**ï¼Œå¦‚ `click`ã€`submit` æˆ– `focus`ã€‚åœ¨æµè§ˆå™¨çš„äº‹ä»¶æ¨¡å‹ä¸­ï¼Œäº‹ä»¶ä¼ é€’ä¼šç»å†ä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µï¼š

1. **æ•è·é˜¶æ®µï¼ˆCapture Phaseï¼‰**ï¼šäº‹ä»¶ä» `window` å¯¹è±¡å¼€å§‹ï¼Œé€å±‚å‘ä¸‹ä¼ é€’åˆ°è§¦å‘äº‹ä»¶çš„å…ƒç´ ï¼ˆç›®æ ‡å…ƒç´ ï¼‰ã€‚
2. **ç›®æ ‡é˜¶æ®µï¼ˆTarget Phaseï¼‰**ï¼šäº‹ä»¶åˆ°è¾¾å¹¶ä½œç”¨äºç›®æ ‡å…ƒç´ æœ¬èº«ã€‚
3. **å†’æ³¡é˜¶æ®µï¼ˆBubble Phaseï¼‰**ï¼šäº‹ä»¶ä»ç›®æ ‡å…ƒç´ å¼€å§‹ï¼Œé€å±‚å‘ä¸Šä¼ é€’åˆ° `window` å¯¹è±¡ã€‚

#### ä¸¾ä¾‹è¯´æ˜ï¼š
å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹ HTML ç»“æ„ï¼š

```html
<div id="parent">
    <button id="child">Click me!</button>
</div>
```

å½“ç‚¹å‡» `<button>` æ—¶ï¼Œäº‹ä»¶ä¼šä» `window` ä¼ é€’åˆ° `#parent`ï¼Œå†åˆ° `#child`ï¼Œç„¶åä» `#child` å‘ä¸Šä¼ é€’å›åˆ° `#parent` å’Œ `window`ã€‚å…·ä½“è¿‡ç¨‹æ˜¯ï¼š

1. **æ•è·é˜¶æ®µ**ï¼š`window` â†’ `#parent` â†’ `#child`
2. **ç›®æ ‡é˜¶æ®µ**ï¼šäº‹ä»¶åˆ°è¾¾ç›®æ ‡å…ƒç´  `#child`
3. **å†’æ³¡é˜¶æ®µ**ï¼š`#child` â†’ `#parent` â†’ `window`

#### 2. å¦‚ä½•ä½¿ç”¨æ•è·å’Œå†’æ³¡
åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥é€šè¿‡ `addEventListener` çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ¥æŒ‡å®šäº‹ä»¶å¤„ç†å™¨æ˜¯åœ¨æ•è·é˜¶æ®µè¿˜æ˜¯å†’æ³¡é˜¶æ®µè§¦å‘ã€‚
```javascript
element.addEventListener('click', function(event) {
    // å¤„ç†äº‹ä»¶
}, true); // æ•è·é˜¶æ®µ

element.addEventListener('click', function(event) {
    // å¤„ç†äº‹ä»¶
}, false); // å†’æ³¡é˜¶æ®µ
```
- **`true`**ï¼šäº‹ä»¶å¤„ç†å™¨ä¼šåœ¨æ•è·é˜¶æ®µè§¦å‘ï¼Œå³åœ¨äº‹ä»¶ä»çˆ¶å…ƒç´ ä¼ é€’åˆ°å­å…ƒç´ æ—¶å…ˆå¤„ç†ã€‚
- **`false`**ï¼šäº‹ä»¶å¤„ç†å™¨ä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ï¼Œå³äº‹ä»¶ä»å­å…ƒç´ å‘ä¸Šä¼ é€’å›çˆ¶å…ƒç´ æ—¶å¤„ç†ã€‚

#### 3. æ•è·å’Œå†’æ³¡çš„ä½¿ç”¨åœºæ™¯
- **æ•è·é˜¶æ®µ**ï¼šé€šå¸¸ç”¨äº**å¸Œæœ›åœ¨äº‹ä»¶ä¼ é€’åˆ°ç›®æ ‡å…ƒç´ ä¹‹å‰æ‹¦æˆªäº‹ä»¶çš„æƒ…å†µ**ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå…¨å±€çš„ `window` äº‹ä»¶ç›‘å¬å™¨ï¼Œå¯ä»¥åœ¨æ•è·é˜¶æ®µä¸­æ£€æŸ¥å¹¶è¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„äº‹ä»¶ã€‚
- **å†’æ³¡é˜¶æ®µ**ï¼šæ›´å¸¸ç”¨çš„æ–¹å¼ï¼Œå› ä¸ºå†’æ³¡é˜¶æ®µå‘ç”Ÿåœ¨äº‹ä»¶åˆ°è¾¾ç›®æ ‡ä¹‹åï¼Œé€‚åˆå“åº”ç”¨æˆ·ç›´æ¥è§¦å‘çš„äº‹ä»¶ã€‚å¸¸ç”¨äºäº‹ä»¶å§”æ‰˜ï¼ˆEvent Delegationï¼‰â€”â€”å°†äº‹ä»¶ç»‘å®šåœ¨çˆ¶å…ƒç´ ä¸Šï¼Œé€šè¿‡å†’æ³¡å“åº”å­å…ƒç´ è§¦å‘çš„äº‹ä»¶ï¼Œè¿™æ ·å¯ä»¥é¿å…ç»™æ¯ä¸ªå­å…ƒç´ ç»‘å®šäº‹ä»¶ã€‚
  
éœ€è¦è¯´æ˜çš„æ˜¯, event.stopPropagation å¯ä»¥åœ¨ IE8  ä»¥ä¸‹æµè§ˆå™¨å–æ¶ˆäº‹ä»¶ä¼ æ’­ã€‚

#### 4. äº‹ä»¶å§”æ‰˜
äº‹ä»¶å§”æ‰˜å…è®¸æˆ‘ä»¬åœ¨çˆ¶çº§å…ƒç´ ä¸Šæ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œè€Œä¸éœ€è¦å¯¹æ¯ä¸ªå­å…ƒç´ å•ç‹¬ç»‘å®šã€‚ä¾‹å¦‚:
```javascript
document.getElementById("parent").addEventListener("click", function(event) {
    if (event.target.tagName === "BUTTON") {
        console.log("Button clicked:", event.target.id);
    }
});
```
è¿™æ ·ï¼Œå³ä½¿åœ¨ `#parent` ä¸­åŠ¨æ€æ·»åŠ æ›´å¤šæŒ‰é’®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡äº‹ä»¶å†’æ³¡ç»Ÿä¸€å¤„ç†ç‚¹å‡»äº‹ä»¶ã€‚

#### 5. äº‹ä»¶å¤„ç†çš„æµç¨‹å’Œå®é™…ä¼ é€’åˆ°åç«¯çš„æ—¶æœº
**å‰ç«¯å¤„ç†**ï¼šäº‹ä»¶ä¸»è¦æ˜¯åœ¨å‰ç«¯æ•è·å’Œå¤„ç†çš„ã€‚ä¸€èˆ¬çš„ç”¨æˆ·äº¤äº’ï¼ˆå¦‚ `click`ã€`input` ç­‰ï¼‰ä¼šè§¦å‘ JavaScript å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥å¯¹æ•°æ®è¿›è¡ŒéªŒè¯ã€ä¿®æ”¹é¡µé¢å†…å®¹ç­‰ã€‚è¿™ä¸€è¿‡ç¨‹é€šå¸¸ä¸ä¼šæ¶‰åŠåç«¯ï¼Œé™¤éå‰ç«¯ä»£ç æ˜¾å¼åœ°å‘å‡ºè¯·æ±‚ã€‚
**åç«¯å¤„ç†**ï¼šå¦‚æœéœ€è¦ä¸åç«¯äº¤äº’ï¼Œä¾‹å¦‚åœ¨è¡¨å•æäº¤æ—¶å‘é€æ•°æ®åˆ°æœåŠ¡å™¨ï¼Œå°±éœ€è¦åœ¨å‰ç«¯äº‹ä»¶å¤„ç†å‡½æ•°ä¸­å‘èµ·è¯·æ±‚ã€‚é€šå¸¸é€šè¿‡ä»¥ä¸‹æ–¹å¼å®Œæˆ:
1. **è¡¨å•æäº¤**ï¼šåœ¨è¡¨å•çš„ `submit` äº‹ä»¶ä¸­ï¼Œè°ƒç”¨ `event.preventDefault()` æ¥é˜»æ­¢é»˜è®¤çš„é¡µé¢åˆ·æ–°ã€‚ç„¶åå¯ä»¥ä½¿ç”¨ `fetch` æˆ– `XMLHttpRequest` æ¥å°†æ•°æ®å‘é€åˆ°åç«¯ï¼š
    ```javascript
    my_form.addEventListener("submit", function(event) {
        event.preventDefault();
        let data = new FormData(my_form);
        fetch("/submit-url", {
            method: "POST",
            body: data
        }) // è¿”å›åŒ…å«å“åº”ä¿¡æ¯çš„ response
        .then(response => response.json())  
        // å¤„ç†è¿”å›å€¼ response ä¸º json å¯¹è±¡, å¹¶å°† response.json è¿”å›å€¼èµ‹å€¼ä¸º data 
        .then(data => {  // è°ƒç”¨å‡½æ•°, 
            console.log("Response from server:", data);
        });
    });
    ```

`````ad-important
title:  Then æ–¹æ³•å’Œ  Promise å¯¹è±¡è§£æ
collapse: close
é‡è¦ : `.then()` æ˜¯ **Promise** å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯æ‰€æœ‰å‡½æ•°éƒ½æœ‰çš„ã€‚åªæœ‰å½“å‡½æ•°è¿”å›ä¸€ä¸ª **Promise** å¯¹è±¡æ—¶ï¼Œæ‰èƒ½ä½¿ç”¨ `.then()` æ–¹æ³•æ¥å¤„ç†è¯¥ Promise è§£æåçš„å€¼ã€‚

`.then()` æ˜¯ **Promise** å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯æ‰€æœ‰å‡½æ•°éƒ½æœ‰çš„ã€‚åªæœ‰å½“å‡½æ•°è¿”å›ä¸€ä¸ª **Promise** å¯¹è±¡æ—¶ï¼Œæ‰èƒ½ä½¿ç”¨ `.then()` æ–¹æ³•æ¥å¤„ç†è¯¥ Promise è§£æåçš„å€¼ã€‚ä¸‹é¢æˆ‘ä¼šè¯¦ç»†è§£é‡Š Promiseã€`.then()` çš„æœºåˆ¶ï¼Œä»¥åŠå¦‚ä½•ç”¨å®ƒæ¥å¤„ç†å¼‚æ­¥æ“ä½œçš„è¿”å›å€¼ã€‚

### 1. ä»€ä¹ˆæ˜¯ Promiseï¼Ÿ

Promise æ˜¯ä¸€ç§ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„ JavaScript å¯¹è±¡ã€‚å¼‚æ­¥æ“ä½œï¼ˆä¾‹å¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€æ–‡ä»¶è¯»å†™ç­‰ï¼‰ä¼šåœ¨æœªæ¥æŸä¸ªæ—¶åˆ»å®Œæˆï¼Œè€Œä¸ä¼šç«‹å³è¿”å›ç»“æœã€‚Promise æä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼ï¼Œå¯ä»¥â€œæ‰¿è¯ºâ€ä¸€ä¸ªæœªæ¥çš„å€¼ï¼Œå½“è¿™ä¸ªæ“ä½œå®Œæˆæ—¶ï¼ŒPromise ä¼šå°†å€¼ä¼ é€’ç»™ä½ ã€‚

ä¸€ä¸ª Promise å¯ä»¥æœ‰ä¸‰ç§çŠ¶æ€ï¼š

- **pending**ï¼ˆè¿›è¡Œä¸­ï¼‰ï¼šPromise å¤„äºç­‰å¾…çŠ¶æ€ï¼Œæ“ä½œæœªå®Œæˆã€‚
- **fulfilled**ï¼ˆå·²æˆåŠŸï¼‰ï¼šæ“ä½œå®Œæˆï¼ŒPromise è¿”å›ä¸€ä¸ªå€¼ã€‚
- **rejected**ï¼ˆå·²å¤±è´¥ï¼‰ï¼šæ“ä½œå¤±è´¥ï¼ŒPromise è¿”å›ä¸€ä¸ªé”™è¯¯åŸå› ã€‚

### 2. `.then()` æ–¹æ³•çš„ä½œç”¨

`.then()` æ˜¯ä¸“é—¨ç”¨äºå¤„ç† **æˆåŠŸå®Œæˆ**ï¼ˆfulfilledï¼‰çš„ Promise çš„æ–¹æ³•ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ Promise å®Œæˆåè·å–è¿”å›å€¼ï¼Œå¹¶æ‰§è¡Œåç»­çš„æ“ä½œã€‚

**è¯­æ³•**ï¼š

```javascript
promise.then(onFulfilled, onRejected);
```

- **`onFulfilled`**ï¼šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“ Promise æˆåŠŸè§£æï¼ˆfulfilledï¼‰æ—¶è°ƒç”¨ã€‚`onFulfilled` çš„å‚æ•°æ˜¯ Promise æˆåŠŸå®Œæˆæ—¶è¿”å›çš„å€¼ã€‚
- **`onRejected`**ï¼ˆå¯é€‰ï¼‰ï¼šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“ Promise è¢«æ‹’ç»ï¼ˆrejectedï¼‰æ—¶è°ƒç”¨ã€‚`onRejected` çš„å‚æ•°æ˜¯ Promise è¢«æ‹’ç»çš„åŸå› ã€‚

é€šå¸¸ `.then()` ç”¨æ³•å¦‚ä¸‹ï¼š

```javascript
promise.then(result => {
    console.log("Promise resolved with:", result);
}).catch(error => {
    console.log("Promise rejected with:", error);
});
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š
- **`result`** æ˜¯ `onFulfilled` çš„å‚æ•°ï¼Œå®ƒä¼šæ¥æ”¶åˆ° Promise æˆåŠŸå®Œæˆæ—¶è¿”å›çš„å€¼ã€‚
- **`error`** æ˜¯ `onRejected` çš„å‚æ•°ï¼Œå®ƒä¼šæ¥æ”¶åˆ° Promise è¢«æ‹’ç»æ—¶çš„é”™è¯¯ä¿¡æ¯ã€‚

### 3. `.then()` è¿”å›ä¸€ä¸ªæ–°çš„ Promise

`.then()` çš„å…³é”®ç‰¹æ€§ä¹‹ä¸€æ˜¯å®ƒ **è¿”å›ä¸€ä¸ªæ–°çš„ Promise**ï¼Œè¿™ä½¿å¾—å¯ä»¥å°†å¤šä¸ªå¼‚æ­¥æ“ä½œé“¾æ¥ï¼ˆchainingï¼‰åœ¨ä¸€èµ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åœ¨ `.then()` ä¹‹åç»§ç»­ä½¿ç”¨ `.then()` æˆ– `.catch()` æ¥å¤„ç†åç»­æ“ä½œã€‚

ä¾‹å¦‚ï¼š

```javascript
fetch("/api/data")
    .then(response => response.json())       // è¿”å›ä¸€ä¸ª Promiseï¼Œè§£æä¸º JSON æ•°æ®
    .then(data => {
        console.log("First then:", data);    // å¤„ç† JSON æ•°æ®
        return data.someProperty;            // è¿”å›ä¸€ä¸ªå€¼ï¼Œå°†ä¼ é€’ç»™ä¸‹ä¸€ä¸ª then
    })
    .then(someProperty => {
        console.log("Second then:", someProperty);  // ä½¿ç”¨ä¸Šä¸€ä¸ª then è¿”å›çš„å€¼
    })
    .catch(error => {
        console.error("Error:", error);      // æ•è·ä»»ä½•é“¾ä¸­å‘ç”Ÿçš„é”™è¯¯
    });
```

**è§£é‡Š**ï¼š

- ç¬¬ä¸€ä¸ª `.then()` è§£æå“åº”çš„ JSON æ•°æ®ã€‚
- ç¬¬äºŒä¸ª `.then()` æ‹¿åˆ°è§£æåçš„æ•°æ®ï¼Œå¹¶å¤„ç†å…¶ä¸­çš„æŸä¸ªå±æ€§ `someProperty`ã€‚
- `return` è¯­å¥å¯ä»¥åœ¨æ¯ä¸ª `.then()` ä¸­ä¼ é€’å€¼ï¼Œä½œä¸ºä¸‹ä¸€ä¸ª `.then()` çš„è¾“å…¥å‚æ•°ã€‚

### 4. ä¸ºä»€ä¹ˆ .then() é€‚ç”¨äºå¼‚æ­¥æ“ä½œ

JavaScript çš„ Promise å’Œ `.then()` æä¾›äº†ä¸€ç§å¤„ç†å¼‚æ­¥æ“ä½œçš„æ–¹å¼ï¼Œä½¿ä»£ç ç»“æ„ä¸Šæ›´æ¥è¿‘äºåŒæ­¥ä»£ç ã€‚å®ƒå…è®¸æˆ‘ä»¬â€œç­‰å¾…â€æ“ä½œå®Œæˆä¹‹åå†å»å¤„ç†ç»“æœï¼Œè€Œä¸ä¼šé˜»å¡ä»£ç çš„æ‰§è¡Œã€‚

### 5. æ€»ç»“å’Œè¦ç‚¹

- **.then() ä¸æ˜¯æ‰€æœ‰å‡½æ•°éƒ½æœ‰**ï¼šåªæœ‰å½“å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡æ—¶ï¼Œæ‰èƒ½ä½¿ç”¨ `.then()`ã€‚
- **.then() ç”¨äºå¤„ç†å¼‚æ­¥ç»“æœ**ï¼šå¯ä»¥åœ¨ Promise æˆåŠŸè§£æåï¼Œæ‹¿åˆ°è¿”å›å€¼å¹¶å¤„ç†å®ƒã€‚
- **æ¯æ¬¡è°ƒç”¨ .then() è¿”å›ä¸€ä¸ªæ–°çš„ Promise**ï¼šè¿™ä½¿å¾—å¯ä»¥å°†å¼‚æ­¥æ“ä½œä¸²è”åœ¨ä¸€èµ·ã€‚
- **.then() å¯ä»¥ä¼ é€’è¿”å›å€¼**ï¼šæ¯ä¸ª `.then()` å¯ä»¥è¿”å›ä¸€ä¸ªå€¼ï¼Œä¾›ä¸‹ä¸€ä¸ª `.then()` ä½¿ç”¨ã€‚

Promise é“¾è®©æˆ‘ä»¬èƒ½å¤Ÿå°†ä¸€ç³»åˆ—å¼‚æ­¥æ“ä½œé€æ­¥å¤„ç†ã€‚ 

`````

1. **AJAX æˆ– Fetch è¯·æ±‚**ï¼šå¯ä»¥åœ¨ç”¨æˆ·è§¦å‘æŸä¸ªäº‹ä»¶æ—¶ï¼ˆä¾‹å¦‚ `click`ï¼‰ä½¿ç”¨ `fetch` å‘èµ·è¯·æ±‚ï¼š
    ```javascript
    button.addEventListener("click", function() {
        fetch("/api/data")
            .then(response => response.json())
            .then(data => {
                console.log("Data from server:", data);
            });
    });
    ```

- **æ•è·** å’Œ **å†’æ³¡** æ˜¯äº‹ä»¶ä¼ é€’çš„ä¸¤ä¸ªé˜¶æ®µã€‚ä½¿ç”¨ `addEventListener` çš„ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥é€‰æ‹©äº‹ä»¶åœ¨å“ªä¸ªé˜¶æ®µè¢«è§¦å‘ã€‚
- **æ•è·é˜¶æ®µ**ï¼šäº‹ä»¶ä» `window` ä¸€è·¯å‘ä¸‹åˆ°ç›®æ ‡å…ƒç´ ã€‚
- **å†’æ³¡é˜¶æ®µ**ï¼šäº‹ä»¶ä»ç›®æ ‡å…ƒç´ å‘ä¸Šä¼ é€’åˆ° `window`ã€‚
- **å‰ç«¯å¤„ç†å’Œåç«¯äº¤äº’**ï¼šå¤§éƒ¨åˆ†äº‹ä»¶åœ¨å‰ç«¯å¤„ç†ï¼Œé€šè¿‡ `fetch` æˆ–è¡¨å•æäº¤å°†æ•°æ®å‘é€åˆ°åç«¯ï¼›äº‹ä»¶å¹¶ä¸ä¼šè‡ªåŠ¨ä¼ é€’åˆ°åç«¯ï¼Œé™¤éå‰ç«¯æ˜¾å¼åœ°å‘å‡ºè¯·æ±‚ã€‚

#### 6. äº‹ä»¶ä»£ç†
å¯¹äºå¤šä¸ªå…ƒç´ æ˜¯åŒä¸€ä¸ªçˆ¶å…ƒç´ çš„å­å…ƒç´ æ—¶, ä¸€èˆ¬é‡‡ç”¨ <mark style="background: transparent; color: red">event.target.classList.contains</mark> çš„æ–¹æ³•, è·å–å®é™…çš„ç‚¹å‡»å¯¹è±¡ target ä¸­æ˜¯å¦æœ‰è¯¥å®¹å™¨, **ä»è€Œé¿å…äº†çˆ¶å…ƒç´ è¢«ç‚¹å‡»è§¦å‘äº‹ä»¶**ã€‚
```js
// é€‰æ‹©çˆ¶å…ƒç´ 
const container = document.querySelector('.button-container');

// ä¸ºçˆ¶å…ƒç´ æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
container.addEventListener('click', (event) => {
  if (event.target.classList.contains('my-button')) {
    console.log('Button clicked!');
  }
});
```

ä¹Ÿå¯ä»¥é‡‡ç”¨ event.target.className ç­‰è¿›è¡Œåˆ¤æ–­ã€‚

## ä¸‰ã€å±æ€§çš„æ·»åŠ , åˆ é™¤ä¸è®¿é—®
ä¸€èˆ¬æ‰€æœ‰çš„ html Element å¯¹è±¡éƒ½å…·æœ‰å±æ€§, é€šè¿‡ attributes è®¿é—®:
å½“éœ€è¦æ·»åŠ æ—¶, é‡‡ç”¨ createAttribute; 
å¯ä»¥é€šè¿‡ getAttribute å¾—åˆ°å¯¹åº”çš„value : letÂ text = element.getAttribute("class");
hasAttribute()

ä¸»è¦æ–¹æ³•å¦‚ä¸‹:
[The getAttribute() Method](https://www.w3schools.com/jsref/met_element_getattribute.asp) 
[The setAttribute() Method](https://www.w3schools.com/jsref/met_element_setattribute.asp)
[The removeAttribute() Method](https://www.w3schools.com/jsref/met_element_removeattribute.asp)
[The hasAttribute() Method](https://www.w3schools.com/jsref/met_element_hasattribute.asp)
[The hasAttributes() Method](https://www.w3schools.com/jsref/met_node_hasattributes.asp)
[The createAttribute() Method](https://www.w3schools.com/jsref/met_document_createattribute.asp)
[The getAttributeNode() method](https://www.w3schools.com/jsref/met_element_getattributenode.asp)
[The setAttributeNode() method](https://www.w3schools.com/jsref/met_element_setattributenode.asp)
[The removeAttributeNode() method](https://www.w3schools.com/jsref/met_element_removeattributenode.asp)

```js
constÂ nodeMap = document.getElementById("myImg")
let l = nodeMapLength.attributes.length;
document.getElementById("myImg").attributes.message="hello";  /* æµè§ˆå™¨ä¸ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥å±æ€§ã€‚å¦‚æœè¿™ä¸ªå±æ€§ä¸å­˜åœ¨ï¼Œå®ƒä¸ä¼šè¢«è‡ªåŠ¨æ·»åŠ ,åªå¯¹ JavaScript å¯¹è±¡çš„ `attributes` é›†åˆæœ‰æ•ˆã€‚è¿™ç§æ“ä½œä¸ä¼šå½±å“å®é™…çš„ DOM å…ƒç´ å±æ€§ */
document.getElementById("myImg").setAttribute("message", "hello"); /* å¦‚æœä¸å­˜åœ¨, åˆ™ä¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„å±æ€§åˆ° */
document.getElementById("myImg").removeAttribute("message");   /* åˆ é™¤å±æ€§ */
```

éœ€è¦æ³¨æ„çš„æ˜¯, å¯¹äºç»“æ„ä½“ä¼šå¯¼è‡´è¦†ç›–, å› æ­¤ä¸€èˆ¬æœ‰æ—¶ä¸é‡‡ç”¨ SetAttribute æ–¹å¼ã€‚

```js
element.setAttribute("style",Â "background-color:red;");    /* å¯¼è‡´è¦†ç›–å…¶ä»–å…ƒç´ å±æ€§ */
element.style.backgroundColorÂ =Â "red";
```

## å››ã€Windows å¯¹è±¡
### (1) Windows å¯¹è±¡ç®€ä»‹
æµè§ˆå™¨ä¸­, æ¯ä¸ªçª—å£éƒ½æœ‰ä¸€ä¸ª window å¯¹è±¡([Window Object](https://www.w3schools.com/jsref/obj_window.asp)) 

| closed   | Returns a boolean true if a window is closed.(æ£€æµ‹å½“å‰windowæ˜¯å¦å·²ç»è¢«close)      |
| -------- | ------------------------------------------------------------------------ |
| console  | Returns the Console Object for the window.                               |
| document | Returns the Document object for the window.See also The Document Object. |
å¸¸ç”¨çš„æœ‰  frames (æ‰€æœ‰å¯¹è±¡çš„æ•°ç»„), history, navigator, [opener](https://www.w3schools.com/jsref/prop_win_opener.asp) (è¿”å›æ‰“å¼€æ­¤çª—å£çš„çª—å£å¯¹è±¡), status (æ¶ˆæ¯å¯ä»¥æ˜¾ç¤ºåœ¨çŠ¶æ€æ ä¸­-> æ³¨æ„**ä¸€èˆ¬æµè§ˆå™¨é»˜è®¤ä¸æ˜¾ç¤ºè¢« js ä¿®æ”¹çš„çŠ¶æ€æ ï¼Œå› æ­¤è¿™ä¸ªä¸€èˆ¬ä¸ä½¿ç”¨**), name, length(çª—å£ä¸­çš„æ¡†æ¶æ•°ç›®), innerHeight, innerWidth ç­‰ç­‰ã€‚

æ­¤å¤–, window.location æŒ‡æ˜äº† window çš„ url å±æ€§ ,å¹¶å¯ä»¥é€šè¿‡ç›´æ¥ä¿®æ”¹è·³è½¬åˆ°å…¶ä»–é¡µé¢ã€‚ç§°ä¸º<b><mark style="background: transparent; color: orange">åŠæ—¶é‡å®šå‘(Instant Redirection)</mark></b>
[type æŒ‡å®šç§ç±»å‚è€ƒ](https://www.iana.org/assignments/media-types/media-types.xhtml)
```html
<script type = "text/javascript">
	window.location =  "newpage.html"
</script>
```

å°†é¡µé¢é‡æ–°å®šä½åˆ°è¯¥åœ°å€ã€‚å¯¹åº”çš„æ–¹æ³•åœ¨ Window Object Methods ä¸­, æœ‰ä¾‹å¦‚  alert ç­‰ç­‰æ–¹æ³•ï¼Œå¸¸ç”¨çš„æœ‰:

| Method             | Description                                                                          |
| ------------------ | ------------------------------------------------------------------------------------ |
| addEventListener() | Attaches an event handler to the window                                              |
| alert()            | Displays an alert box with a message and an OK button                                |
| atob()             | Decodes a base-64 encoded string                                                     |
| blur()             | Removes focus from the current window                                                |
| confirm()          | Displays a dialog box with a message and an OK and a Cancel button                   |
| close()            | Closes the current window                                                            |
| focus()            | Sets focus to the current window                                                     |
| open()             | Opens a new browser window                                                           |
| resizeBy()         | Resizes the window by the specified pixels                                           |
| resizeTo()         | Resizes the window to the specified width and height                                 |
| scrollTo()         | Scrolls the document to the specified coordinates                                    |
| stop()             | Stops the window from loading                                                        |
| setTimeout()       | Calls a function or evaluates an expression after a specified number of milliseconds |

å…¶ä¸­ï¼Œå¯¹äºå‰è¿›å’Œåé€€é€‰é¡¹çš„å®ç°, éœ€è¦ç”¨åˆ° [history](https://www.w3schools.com/jsref/prop_win_history.asp) çš„æ–¹æ³•ã€‚ä¸»è¦æ˜¯å¦‚ä¸‹ä¸¤ä¸ª(å‚è€ƒ[[ğŸ“˜ClassNotes/âŒ¨ï¸ Pre-front Programming/ğŸµJavaScript/3. JavaScript è¯­æ³•å…¥é—¨å’Œå¯¹è±¡#(5) JS é¢„å®šä¹‰å¯¹è±¡|3. JavaScript è¯­æ³•å…¥é—¨]])

| back()    | Loads the previous URL (page) in the history list |
| --------- | ------------------------------------------------- |
| forward() | Loads the next URL (page) in the history list     |

opener ç”¨äº**å¼•ç”¨æ‰“å¼€å½“å‰çª—å£çš„çª—å£**,  ä¾‹å¦‚ window.opener.closed å¯ä»¥æ£€æµ‹æ‰“å¼€å½“å‰çª—å£çš„çª—å£æ˜¯å¦è¢«å…³é—­ã€‚ 

### (2) Windows å¯¹è±¡çš„å¼¹çª—æ–¹æ³•
æœ€å¤šç”¨çš„å¼¹çª—æ˜¯
```js
window.alert();
window.prompt();    // è¾“å…¥ä¿¡æ¯ 
window.confirm();   /* ç¡®è®¤å’Œå–æ¶ˆ */
window.find();         /* æŸ¥æ‰¾æµè§ˆé¡µé¢çš„ç‰¹å®šæ–‡æœ¬ */
window.home();      /* é‡å®šå‘åˆ°ä¸»é¡µ  */
window.print();  // æ‰“å° å½“å‰é¡µ
```


### (3) å›ºå®šæ—¶é—´é—´éš”æ‰§è¡Œå‡½æ•°
1. ä¸ºäº†ä»¥ä¸€å®šçš„æ—¶é—´é—´éš”æ‰§è¡Œ, å¾€å¾€é‡‡ç”¨ <b><mark style="background: transparent; color: orange">setInteval() å’Œ clearInterval() æ–¹æ³•</mark></b>è¿›è¡Œç›¸åº”çš„è®¾ç½®;
2. <b><mark style="background: transparent; color: orange">setTimeout() æ–¹æ³•å’Œ clearTimeout() æ–¹æ³•</mark></b>, ç”¨äºå»¶è¿Ÿæ‰§è¡ŒæŸæ®µä»£ç å’Œæ¸…é™¤ä»»åŠ¡, 

**è¯­æ³•**ï¼š`setInterval(callback, delay, ...args)` å…¶ä¸­ ...args æ˜¯ä¼ é€’ç»™ 
```js
var fun = setInterval(function(param1){
		console.log(param1);
	},10000,10);   // å•ä½ä¸º ms 
clearInterval(fun);
```

ä¸€èˆ¬å¯ä»¥é‡‡ç”¨ let è‡ªå®šä¹‰å®šæ—¶å™¨, å®ç°å»¶è¿Ÿä¸€å®šæ—¶é—´çš„äº‹ä»¶å¤„ç†ã€‚
```js
setTimeout(callback, delay, params);    // åˆ›å»ºå»¶è¿Ÿæ‰§è¡Œçš„å®šæ—¶å™¨ 
// å»¶è¿Ÿ 2 ç§’åè¾“å‡º "Hello after 2 seconds!"
const timeoutID = setTimeout(() => {
  console.log("Hello after 2 seconds!");
}, 2000);
clearTimeout(timeoutID);

let delayFun; // å…¨å±€å˜é‡ç”¨äºä¿å­˜å®šæ—¶å™¨ ID

box1.addEventListener("mouseenter", () => {
  // è®¾ç½®ä¸€ä¸ªå»¶æ—¶ä»»åŠ¡ï¼Œåœ¨ 10 ç§’åæ˜¾ç¤º label1
  delayFun = setTimeout(() => {
    label1.visibility = true;
  }, 10000);
});

box1.addEventListener("mouseleave", () => {
  // é¼ æ ‡ç§»å¼€æ—¶ï¼Œæ¸…é™¤å»¶æ—¶ä»»åŠ¡
  clearTimeout(delayFun);
});
```

### (4) ä¸»çª—å£å’Œæ–°çª—å£çš„é‡‡ç”¨
ä¸€èˆ¬é‡‡ç”¨ window.open("newpage.html", "my_window", attribute1=value1, attribute2 = value2); æ‰“å¼€æ–°çš„ url å¹¶è¿›è¡Œæ›¿æ¢, å…¶ä¸­ target æ˜¯ç¬¬äºŒä¸ªå‚æ•°; features ä¸ºç¬¬ä¸‰ä¸ª

éœ€è¦æ³¨æ„çš„æ˜¯,  ä¸æ˜¯æ–°å»ºä¸€ä¸ª tab(ä¸€èˆ¬é‡‡ç”¨hrefå¯¼èˆª), è€Œæ˜¯å¤–éƒ¨æ–°å»ºä¸€ä¸ªçª—å£è¿›è¡Œè®¾ç½®ã€‚(å®é™…ä¸Šä¹Ÿæ˜¯,),  ä¹Ÿå¯èƒ½æ˜¯åˆ°å¦ä¸€ä¸ª tab; 
window.close() å…³é—­å½“å‰çª—å£, 
window.moveBy() ç§»åŠ¨çª—å£ï¼›
window.moveTo() 
window.focus()
window.scrollTo()
window.scrollBy()
window.resizeBy()
window.resizeTo()

```js
mywin = window.open("newpage.html", "cool", "width=400, height=300");
mywin.moveBy(300,300);
var myWindow = window.open("", "MsgWindow", "width=200,height=100");
myWindow.document.write("<p>This is 'MsgWindow'. I am 200px wide and 100px tall!</p>");
win = window.open("https://www.w3schools.com",Â "_blank",Â "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=500,width=400,height=400");
win.focus();
```

ç¼–ç å’Œè§£ç 
```js
letÂ text =Â "Hello World!";  
letÂ encoded = window.btoa(text);  
letÂ decoded = window.atob(encoded);
```

## äº”ã€å…¶ä»–å¯¹è±¡è¡¥å…… 
[Math](https://www.w3schools.com/js/js_math.asp)  å¯¹è±¡: æä¾›å„ç§æ•°å­¦å‡½æ•°, (åŒ…æ‹¬ Math.PI, Math.Eç­‰ç­‰)
ä¾‹å¦‚ random æ–¹æ³•è¿”å› 0-1 ä¹‹é—´çš„éšæœºæ•´æ•°(å‡åŒ€åˆ†å¸ƒ)

ä¸€èˆ¬åœ°, å¯ä»¥é€šè¿‡ Box-Muller å˜æ¢è·å–æ­£æ€åˆ†å¸ƒ:
```js
function randomNormal(mean = 0, stdDev = 1) {
    let u = 1 - Math.random(); // è½¬æ¢åˆ° (0, 1] åŒºé—´
    let v = 1 - Math.random();
    let z = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
    return z * stdDev + mean; // è°ƒæ•´ä¸ºæŒ‡å®šçš„å‡å€¼å’Œæ ‡å‡†å·®
}
```
ä¸€èˆ¬æœ‰ js å¯ä»¥ç”Ÿæˆæ³Šæ¾å’ŒæŒ‡æ•°åˆ†å¸ƒçš„æŠ½æ ·å‡½æ•°, æ­¤å¤„ç•¥å»; 
æ­¤å¤–, å¯ä»¥åˆ©ç”¨ç°æˆçš„åº“è¿›è¡Œç”Ÿæˆç›¸å…³çš„éšæœºæ•°:
```js
npm install random
const random = require('random');
```

trunc();
sign();


[Number]() å¯¹è±¡: å‚è€ƒ[[ğŸ“˜ClassNotes/âŒ¨ï¸ Pre-front Programming/ğŸµJavaScript/3. JavaScript è¯­æ³•å…¥é—¨å’Œå¯¹è±¡#2. å‡½æ•°æ•°æ®ç±»å‹|3. JavaScript æ•°æ®ç±»å‹]] 
ä¸€èˆ¬å¯ä»¥é€šè¿‡ toExponential(), toFixed(), toPrecision(), toSource()

Number.EPSILON æœ€å°å€¼ï¼Œæœ€å°ç²¾åº¦
isFinite();
isNaN();
parseInt();
parseFloat();
isInteger();


| toExponential(x) | Converts a number into an exponential notation (string)                  |
| ---------------- | ------------------------------------------------------------------------ |
| toFixed(x)       | Formats a number with x numbers of digits after the decimal point (è¿›è¡Œèˆå…¥) |
| toLocaleString() | Converts a number into a string, based on the locale settings            |
| toPrecision(x)   | Formats a number to x length (æœ‰æ•ˆæ•°)                                       |
| toString()       | Converts a number to a string                                            |

è½¬æ¢ä¸ºä¸åŒçš„å½¢å¼. å…¶ä¸­å¦‚æœè½¬æ¢ä¸åˆ°, åˆ™è½¬æ¢ä¸ºæŒ‡æ•°å½¢å¼ 
```js
Number(100000).toPrecision(2)
'1.0e+5'
```

Date å¯¹è±¡æ„é€ æ—¶, å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸åŒçš„æ—¥æœŸ, å…·ä½“å‚è€ƒ[[ğŸ“˜ClassNotes/âŒ¨ï¸ Pre-front Programming/ğŸµJavaScript/3. JavaScript è¯­æ³•å…¥é—¨å’Œå¯¹è±¡#(3) å…¶ä»–å¸¸ç”¨å¯¹è±¡|3. JavaScript è¯­æ³•å…¥é—¨]] 
```js
 instance = new Date()
Thu Oct 31 2024 17:26:53 GMT+0800 (China Standard Time)
```

ä¾‹å¦‚: Date.parse("Dec 12, 1999"), toString(), toGMTString() ç­‰ç­‰
