被控对象的参数常常是模拟量, 首先需要将模拟量转换为相应的数字量, 才能送到计算机中进行运算和处理。在处理完毕之后， 将数字量转换为模拟量, 从而实现对被控的模拟量进行相应的控制。因而转换器包括模拟/数字转换器 (analog/digital converter, A/D) 和数字/模拟转换器(digital/analog converter, D/A)。
![[Excalidraw/第十章 模拟-数字信号转换器 2023-12-27 09.48.36|600]]
常见的转换器有AD转换器(模/数转换器)和D/A(数/模转换器)转换器两种
## 一、D/A转换器
基本的组成环节有<mark style="background: transparent; color: red">参考电压源, 电阻网络和电子开关三个基本环节</mark>, 并分为以下三类: 
- 权电阻网络 D/A 转换器 
- R-2R T形电阻网络 D/A 转换器 
- R-2R 倒T形电阻网络 D/A 转换器  
> [!cite] D/A转换器的转换特性
> 理想D/A 转换器的转换输出的模拟量是和数字量成正比的。
> 设输入的n位二进制数, 则其最低位到高位的权分别为$2^{0}, 2^{1}, \dots 2^{n}$ 
> $$X = X_{n-1} \cdot  2^{n-1} + \dots  + X_{1} \cdot  2^{1} + X_{0} \cdot  2^{0} = \sum^{n-1}_{i=0} (X_{i} \cdot  2^{i})$$
> 即有转换特性表达式 : 
> $$u_{o} =  K_{V} \cdot  K_{V} \cdot  \sum^{n-1}_{i=0} (X_{i}\cdot  2^{i}) (或者电流转换形式相同)$$
### (1) 权电阻求和网络 DAC 
![[Excalidraw/第十章 模拟-数字信号转换器 2023-12-27 10.17.53]]
公式简单, 上图中已经给出。 通过<mark style="background: transparent; color: red">不同的电阻实现电流的求和输出</mark>。
说明: **数字量的位数足够多, 输出的电压可以达到很高的精度**。 
缺点: 
1. 权电阻网络中的各个电阻的相差很大, 从而要求电阻值的精确度必须高
2. 电阻的制造与选择更加困难， 从而<mark style="background: transparent; color: red">适用于转换位数不太多的部分</mark>。

### (2) T型电阻网络DAC 
![[Excalidraw/第十章 模拟-数字信号转换器 2023-12-27 09.59.52|900]]
T型电阻网络DAC的结构图如上。 则利用网孔电流, 有 :
由于左侧并联一个2R进行接地, 则当仅输入$X_{3}$时, <mark style="background: transparent; color: red">由于右侧的电阻网络直接等效为一个2R的电阻</mark> 得到的电阻, 从而我们<b><mark style="background: transparent; color: blue">利用叠加原理</mark></b>, **分别分析出各个电压源单独作用时的输出电流**, 则可以<b><mark style="background: transparent; color: blue">利用级联电阻网络的分流特性， 设计出如上左图的电路</mark></b>:
各个电压源单独作用时, 输出的电流为(带0的是干路):
$$I_{3} = \frac{X_{3} I_{30}}{2}\qquad I_{2} = \frac{X_{2} I_{20}}{2^{2}} \qquad I_{1}= \frac{X_{1} I_{10}}{2^{3}} \qquad  I_{0}  = \frac{X_{0} I_{40}}{ 2^{4}}$$
为了寻找电流与输入电压的关系，显然单独作用时, 每一个的左侧电路都可以看做一个2R并联, 而右侧到地的总电阻也为2R。我们<b><mark style="background: transparent; color: blue">依次使用戴维南等效电路</mark></b>, 下面给出了$X_0$作用而其余断开的等效电路分析方法。 
![[Excalidraw/第十章 模拟-数字信号转换器 2023-12-27 11.21.21|700]]
显然对于X0, 输出的电流为 (其余同理):
$$I_{0} = \frac{U_{r}}{3R}\times \frac{1}{2^{4}} \qquad I_{1} = 2 I_{0}\dots $$
即可实现D/A的转换过程。 从而有输出电压的计算公式 :
$$\Large\boxed{U_{o} = - \frac{R_{F} U_{r}}{3R \cdot  2^{4}}\left[  X_{0} +2 X_{1}  + 2^{2} X_{2} + 2^{3}X_{3}\right]}$$

> [!NOTE] T型电阻网络的优缺点
> 1. 电阻的阻值为标准阻值, 电阻种类少, 制造精度容易提高 
> 2. 流过各个模拟开关的电流都是相同的, 这给电子开关的制造提供了方便
>    
>    缺点: 电阻种类较多

### (3) 倒T型电阻网络DAC 
为了进一步提高电路的转换速度, 倒T型电阻网络DAC是较为常用的类型
![[Excalidraw/第十章 模拟-数字信号转换器 2023-12-27 12.17.06|500]]
利用<b><mark style="background: transparent; color: blue">倒T形电阻网络每一次分一半电流的特性</mark></b>， 设计会更加简单, 基本设计如上图(每次分一半电流, 如下图)

如图的电路的分析方法是将某一个接通之后其余全部接地， 其中$X_3$的分析方法已经给出, 下面给出$X_{0}$的分析方法
![[Excalidraw/第十章 模拟-数字信号转换器 2023-12-27 13.16.13|500]]
从而有:
$$\frac{U_{r}}{2^{4}R} (X_{0} + 2 X_{1} + 4 X_{2} + 8X_{3})$$

> [!NOTE] 倒T型D/A转换器的优点
> 倒T型D/A转换器是速度最快的D/A转换器, 也使用最为广泛

### (3) 集成电路 D/A 转换器
集成D/A转换芯片按照二进制数可以分为8,10, 12, 16位等等, 常用的集成 D/A 转换芯片以DA7520 (10 位D/A转换器) 为例, 采用CMOS型并外接集成运算放大器

DA 7520 的管脚排列以及外引线如图所示(proteus库中没有此元件) 
![[attachments/Pasted image 20240102134223.png]]
其中, d0为1时, 输出为$U_{o} = -\frac{1}{1024} U_{R}$, 依次大小为$-\frac{2}{1024}, \dots$排列, 而当D0 - D9均为1时, 最小输出电压为$- \frac{1023}{1024} U_{R}$ 

##  二、A/D 转换器 
ADC的主要参数参考[[💻softwares/⚡Circuit/💻51单片机教程/5. 红外遥控,DS1302时钟, AD转换/ADC模数转换与信号处理|ADC模数转换与信号处理]] 

ADC 转换器的基本转换过程分为两步 : 
1. 使用<mark style="background: transparent; color: red">传感器</mark>将物理量转换为**连续变化的模拟信号**。
2. 通过ADC 将模拟信号转换为数字信号。 

> [!NOTE] ADC 的转换方式
> 按照转换方式进行分类，可以分为: 
> 1. 逐次逼近型 (实际中使用最为广泛)
> 2. 并联比较型 
> 3. 双积分型 

对于逐次逼近型 ADC 的转换过程是类似天平砝码式承重的过程。即<mark style="background: transparent; color: red">一次次输入不同的数字量， 并使用D/A转换器转换成模拟量并与所测试的模拟量</mark>进行比较的过程, 入果输出的模拟量比数字量转换成的大, 则增大该数字量, 反之减小该数字量。 是负反馈原理。
![[Excalidraw/第十章 模拟-数字信号转换器 2024-01-02 14.36.58|600]]
其中, 顺序脉冲发生器可以在下图中依次发出从$Q_{4}, Q_{3}, Q_{2}\dots Q_{1}$的脉冲。
![[Excalidraw/第十章 模拟-数字信号转换器 2024-01-02 15.08.37|900]]
工作过程梳理如下 :
1. 如图, 首先, 对于左上角的运算放大器, 若有$U_{o} < U_{in}$, 则输出0, 若有$U_{o}  > U_{in}$, 则输出1
2. 参考[[📘ClassNotes/⚡Circuit/电工电子技术/第九章 触发器与时序逻辑电路#(2) 钟控RS触发器|钟控RS触发器]], 钟控RS触发器当 S = 1, R = 0时, Q置一;  S =0 ,R= 1 时置零, 而S= 0, R= 0时, 保持状态。 
3. 在分析时钟变化前, 我们首先<mark style="background: transparent; color: red">设放大器的输出为0</mark>, 时钟信号使得$Q_{4}'$先输出1, 此时, 输出为$Q_{4}' = 1, Q_{3}' =  Q_{2}' = Q_{1}'=  Q_{0}' = 0$,
对于DAC中的**转换方式**, 我们给出公式: 
$$U_{o} = \frac{U_{R}}{2^{4}} (Q_{3} \times 2^{3} + Q_{2}\times 2^{2}  + Q_{1}\times 2 + Q_{0})$$
RS触发器输出为1000 (或门只起到Reset的作用) 

此时, 我们假设$U_{in} < U_{o}$ , 蓝线输出置1, 此时, 若时钟不进行变换, 则仍然为1000, 在时钟变换之后, $Q_{3}'$成为1, $Q_{4}$**由于$Q_3$启动和事件Y($U_o> U_{in}$)作用, 则输出端$Q_{3}$置零(如果$U_{o} < U_{in}$, 则此时$Q_{4}$保持, 相当于保持最大砝码不变, 继续加砝码)** 

同样地, 在脉冲从$Q_{3}'$切换到$Q_{2}'$时, 则如果仍然$U_{o} > U_{in}$, 则输出端$Q_{2}$置零, $Q_{1}$置一, 反之, $Q_{2}$保持, ==实现调节输出的$Q_0 -Q_{3}$对应的电压逐次逼近$U_{in}$的值;==  

当最后输入为00001时, 如果$U_o > U_i$, 则与门启动将$Q_0$置零, 反之保持。 从而<mark style="background: transparent; color: red">在一周脉冲之后,  即可实现模拟信号的数字测量方案</mark>。 
![[Excalidraw/第十章 模拟-数字信号转换器 2024-01-02 16.22.58]]
## 三、 数据采集系统
### (1) 数据采集系统设计
数据采集系统是将电测的模拟信号自动进行采集, 并转为数字量, 再送到计算机中进行处理, 传输, 显示, 存储,打印的系统。 其中S/H电路为采样/保持电路。基本结构如下: 
![[Excalidraw/第十章 模拟-数字信号转换器 2024-01-02 16.28.05|800]]
对于数据采集系统的设计, 往往考虑的主要因素有被测信号对系统的结构形式, 变化速率和通道数, 电测精度, 分辨率, 速度, 性价比等等。 
### (2) 多通道共享S/H和A/D系统
采用<mark style="background: transparent; color: red">分时转换工作方式,</mark> 各路被测参数共用一个S/H和 A/D电路。(参考[[💻softwares/⚡Circuit/💻51单片机教程/5. 红外遥控,DS1302时钟, AD转换/ADC模数转换与信号处理#(1) 采样-保持(S-H)电路|ADC模数转换与信号处理]]) 在==某一时刻,  多路开关仅选择其中一路进行输出==, 经过S/H之后进行A/D转换并输出数字信号。 
![[Excalidraw/第十章 模拟-数字信号转换器 2024-01-02 16.37.42|800]]
**当S/H电路的输出已经充分接近输入信号之后, 通过控制指令让S/H自动进入保持状态**。此时A/D转换电路将得到的信号转换为数字信号输出。

此方式适用于信号变化速率不高的场合。 
而多通道共享A/D系统是共用一个A/D转换器, 但每一路的通道都有一个S/H电路, 可以同时进行采样保持。 常常用于三相瞬时功率的测量中。 由于串行在A/D转换器中转换, 从而速度较慢。 
![[attachments/13348659028797637.jpg|500]]
### (3) 多通道A/D系统
每个通道都有各自的S/H和A/D转换器,各个通道独立进行采样和A/D转换, 由于数据采样速度很快,  应当距离尽可能短以不受干扰,  在信号源附近设置 S/H 和A/D 电路 , 实现就近采样保持和模数转换。 
![[attachments/Weixin Image_20240102165037.jpg|500]]
用于高速系统, 分散系统, 多通道并行数据采集系统等等。 
